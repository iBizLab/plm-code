!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,r,o,s=[],l=!0,c=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=r.call(a)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,a,n){return t=s()?Reflect.construct.bind():function(e,t,a){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return a&&i(r,a.prototype),r},t.apply(null,arguments)}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:a):i.value}},a.apply(this,arguments)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e){var t=s();return function(){var a,n=l(e);if(t){var i=l(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}(this,a)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=p(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function v(e,t,a){return t&&m(e.prototype,t),a&&m(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */y=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function d(e,t,a,n){var r=t&&t.prototype instanceof b?t:b,o=Object.create(r.prototype),s=new R(n||[]);return i(o,"_invoke",{value:O(e,a,s)}),o}function p(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",f="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function I(){}var C={};c(C,o,(function(){return this}));var T=Object.getPrototypeOf,x=T&&T(T(k([])));x&&x!==a&&n.call(x,o)&&(C=x);var E=I.prototype=b.prototype=Object.create(C);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function a(i,r,o,s){var l=p(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==h(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(l.arg)}var r;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){a(e,n,t,i)}))}return r=r?r.then(i,i):i()}})}function O(t,a,n){var i=u;return function(r,o){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===r)throw o;return{value:e,done:!0}}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var l=A(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(t,a,n);if("normal"===c.type){if(i=n.done?v:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function A(t,a){var n=a.method,i=t.iterator[n];if(i===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,A(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=p(i,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,g;var o=r.arg;return o?o.done?(a[t.resultName]=o.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,g):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function k(t){if(t||""===t){var a=t[o];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function a(){for(;++i<t.length;)if(n.call(t,i))return a.value=t[i],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=I,i(E,"constructor",{value:I,configurable:!0}),i(I,"constructor",{value:w,configurable:!0}),w.displayName=c(I,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(D.prototype),c(D.prototype,s,(function(){return this})),t.AsyncIterator=D,t.async=function(e,a,n,i,r){void 0===r&&(r=Promise);var o=new D(d(e,a,n,i),r);return t.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),c(E,l,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function i(n,i){return s.type="throw",s.arg=t,a.next=n,i&&(a.method="next",a.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),L(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var i=n.arg;L(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:k(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function g(e,t,a,n,i,r,o){try{var s=e[r](o),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function o(e){g(r,n,i,o,s,"next",e)}function s(e){g(r,n,i,o,s,"throw",e)}o(void 0)}))}}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return(t=T(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}System.register(["vue","@ibiz-template/core","ramda","@ibiz-template/runtime","vuedraggable","dayjs"],(function(i,s){"use strict";var p,u,m,g,w,T,x,E,S,D,O,A,M,L,R,k,F,N,P,B,z,G,V,j,U,_,H,q,X,J,W,Y,$,K,Z,Q,ee,te,ae,ne,ie,re;return{setters:[function(e){p=e.reactive,u=e.onBeforeUnmount,m=e.getCurrentInstance,g=e.defineComponent,w=e.computed,T=e.createVNode,x=e.ref,E=e.watch,S=e.onMounted,D=e.nextTick,O=e.resolveComponent,A=e.createTextVNode,M=e.isVNode,L=e.h,R=e.onUnmounted,k=e.mergeProps,F=e.provide,N=e.withDirectives,P=e.resolveDirective},function(e){B=e.Namespace,z=e.RuntimeError,G=e.listenJSEvent,V=e.NOOP,j=e.plus,U=e.clone,_=e.IBizContext},function(e){H=e.clone},function(e){q=e.ValueOP,X=e.calcSearchConds,J=e.getEditorProvider,W=e.getUIActionById,Y=e.UIActionUtil,$=e.ButtonContainerState,K=e.UIActionButtonState,Z=e.calcResPath,Q=e.ViewController,ee=e.PanelItemController,te=e.calcDeCodeNameById,ae=e.registerPanelItemProvider,ne=e.PanelItemState},function(e){ie=e.default},function(e){re=e.default}],execute:function(){function s(e){return new B(e)}function oe(e){var t=m().proxy.$props,a=e(t.context,t.viewParams,t.config,t.dismiss,t.measureToolbar,t.dimensionToolbar);return a.state=p(a.state),a.created(),u((function(){return a.destroyed()})),a}function se(e,t){var a=e(t.mode,t.context,t.viewParams,H(t.config));return a.state=p(a.state),a.created(),u((function(){return a.destroyed()})),a}var le=g({name:"BISplit",components:{IBizSplitTrigger:g({name:"IBizSplitTrigger",props:{mode:String},setup:function(e){var t=s("split-trigger"),a=w((function(){return"vertical"===e.mode})),n=w((function(){return[t.b(),a.value?t.m("vertical"):t.m("horizontal")]})),i=w((function(){return[t.b("bar-con"),a.value?t.bm("bar-con","vertical"):t.bm("bar-con","horizontal")]})),r=Array(8).fill(0);return{ns:t,classes:n,barConClasses:i,items:r}},render:function(){var e=this;return T("div",{class:this.classes},[T("div",{class:this.barConClasses},[this.items.map((function(t,a){return T("i",{class:e.ns.b("bar"),key:"trigger-".concat(a)},null)}))])])}})},props:{modelValue:{type:[Number,String],default:.5},mode:{validator:function(e){return["horizontal","vertical"].includes(e)},default:"horizontal"},min:{type:[Number,String],default:"30px"},max:{type:[Number,String],default:"30px"}},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],setup:function(e,t){var a=t.emit,n=s("split"),i=x(null),r=x(0),o=x(0),l=x(!1),c=x(0),d=x(0),p=x(.5),h=x(0),f=w((function(){return[n.b("wrapper"),n.is("no-select",l.value)]})),m=w((function(){return[n.b("pane"),l.value?n.bm("pane","moving"):""]})),v=w((function(){return"horizontal"===e.mode})),y=w((function(){return 100-r.value})),g=w((function(){return"string"==typeof e.modelValue})),b=w((function(){return v.value?"offsetWidth":"offsetHeight"})),I=function(e,t){return parseFloat(e)/parseFloat(t)},C=function(t){var a=i.value[b.value];return g.value?"string"==typeof e[t]?e[t]:a*e[t]:"string"==typeof e[t]?I(e[t],a):e[t]},T=function(e,t){return g.value?"".concat(Math.max(parseFloat(e),parseFloat(t)),"px"):Math.max(e,t)},O=function(e){return g.value?"".concat(i.value[b.value]-parseFloat(e),"px"):1-e},A=function(t){var n=(v.value?t.pageX:t.pageY)-h.value,r=i.value[b.value],s=g.value?"".concat(parseFloat(o.value)+n,"px"):I(r*o.value+n,r),l=O(s);parseFloat(s)<=parseFloat(c.value)&&(s=T(s,c.value)),parseFloat(l)<=parseFloat(d.value)&&(s=O(T(l,d.value))),Object.assign(t,{atMin:e.modelValue===c.value,atMax:g.value?O(e.modelValue)===d.value:O(e.modelValue).toFixed(5)===d.value.toFixed(5)}),a("update:modelValue",s),a("on-moving",t)},M=function e(){l.value=!1,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",e),a("on-move-end")},L=function(){D((function(){c.value=C("min"),d.value=C("max"),r.value=1e4*(g.value?I(e.modelValue,i.value[b.value]):e.modelValue)/100}))};return E((function(){return e.modelValue}),(function(e){e!==p.value&&(p.value=e,L())})),S((function(){D((function(){L()})),window.addEventListener("resize",L)})),u((function(){window.removeEventListener("resize",L)})),{ns:n,outerWrapper:i,offset:r,wrapperClasses:f,paneClasses:m,isHorizontal:v,anotherOffset:y,handleMousedown:function(t){h.value=v.value?t.pageX:t.pageY,o.value=e.modelValue,l.value=!0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",M),a("on-move-start")}}},render:function(){var e,t,a,n,i,r,o,s,l,c,d,p,u=this;return T("div",{class:this.wrapperClasses,ref:"outerWrapper"},[this.isHorizontal?T("div",{class:this.ns.m("horizontal")},[T("div",{style:{right:"".concat(this.anotherOffset,"%")},class:[this.paneClasses,this.ns.bm("pane","left")]},[null===(e=(t=this.$slots).left)||void 0===e?void 0:e.call(t)]),T("div",{style:{left:"".concat(this.offset,"%")},class:this.ns.b("trigger-con"),onMousedown:function(e){return u.handleMousedown(e)}},[(null===(a=(n=this.$slots).trigger)||void 0===a?void 0:a.call(n))||T(O("iBizSplitTrigger"),{mode:"vertical"},null)]),T("div",{style:{left:"".concat(this.offset,"%")},class:[this.paneClasses,this.ns.bm("pane","right")]},[null===(i=(r=this.$slots).right)||void 0===i?void 0:i.call(r)])]):T("div",{class:this.ns.m("vertical")},[T("div",{style:{bottom:"".concat(this.anotherOffset,"%")},class:[this.paneClasses,this.ns.bm("pane","top")]},[null===(o=(s=this.$slots).top)||void 0===o?void 0:o.call(s)]),T("div",{style:{top:"".concat(this.offset,"%")},class:this.ns.b("trigger-con"),onMousedown:function(e){return u.handleMousedown(e)}},[(null===(l=(c=this.$slots).trigger)||void 0===l?void 0:l.call(c))||T(O("iBizSplitTrigger"),{mode:"horizontal"},null)]),T("div",{style:{top:"".concat(this.offset,"%")},class:[this.paneClasses,this.ns.bm("pane","bottom")]},[null===(d=(p=this.$slots).bottom)||void 0===d?void 0:d.call(p)])])])}}),ce=g({name:"BISelectGroup",props:{caption:{type:String,required:!0},items:{type:Array,default:function(){return[]}},isSearch:{type:Boolean,default:!1},searchValue:{type:String,default:""},collapse:{type:Boolean,default:!1},controller:{type:Object,required:!0},type:{type:String,required:!0}},emits:["add","collapse"],setup:function(e,t){var a=t.emit,n=s("select-group"),i=x({}),r=x(!1),o=x({}),l=function(){r.value=!1,e.controller.evt.emit("onDragTarget",null)},c=function(e){return"COMMON"===e.bimeasuretype?T("svg",{class:n.em("content","item-icon-com"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"alzeditor/hashtag","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.236 9.9l.422-3.8H2.6a.6.6 0 1 1 0-1.2h2.19l.372-3.347a.6.6 0 1 1 1.192.133L5.998 4.9h4.793l.37-3.347a.6.6 0 0 1 1.193.133L11.998 4.9h2.459a.6.6 0 0 1 0 1.2h-2.592l-.421 3.8h2.013a.6.6 0 0 1 0 1.2H11.31l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H5.311l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H1.6a.6.6 0 0 1 0-1.2h2.636zm1.208 0h4.792l.422-3.8H5.865l-.421 3.8z",id:"alz形状结合"},null)])]):T("svg",{class:n.em("content","item-icon-fx"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"alheditor/formula","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M12.663 11.027c-.117.142-.25.318-.4.527.09.88.404 1.722.913 2.446a.807.807 0 0 0 .951.051c.212-.071.317.313 0 .494a2.582 2.582 0 0 1-2.376.185 2.786 2.786 0 0 1-.918-1.726c-.101.152-.177.27-.223.346-.05.08-.121.194-.215.34a5.11 5.11 0 0 1-.776.993 1.134 1.134 0 0 1-.787.3.82.82 0 0 1-.832-.852 1.058 1.058 0 0 1 1.085-1.113c.176 0 .352.021.522.066.167.045.324.094.471.147a2.69 2.69 0 0 0 .264-.271c.129-.15.25-.305.362-.467-.15-.602-.31-1.287-.527-2.038a.869.869 0 0 0-1.281-.585c-.259.118-.388-.329.094-.529.447-.184 2.482-1.047 2.941.8.075.303.144.597.212.885l.246-.38c.085-.13.157-.246.218-.346.213-.368.476-.704.781-1 .214-.194.492-.301.781-.3a.8.8 0 0 1 .594.239.84.84 0 0 1 .238.619c.015.3-.1.59-.314.8a1.075 1.075 0 0 1-.767.3 2.1 2.1 0 0 1-.535-.069 5.572 5.572 0 0 1-.456-.138 1.662 1.662 0 0 0-.266.276zM7.223 5.4H8.5a.6.6 0 1 1 0 1.2H6.928c-.236 1.116-.614 3-.573 2.8-.105.506-.198.919-.297 1.318-.17.677-.36 1.312-.604 1.999-.587 1.652-1.397 2.363-2.395 2.363-.146 0-.283-.009-.412-.027-.627-.087-1.061-.549-1.305-1.273a.6.6 0 0 1 1.137-.383c.112.334.224.452.334.468.072.01.154.015.246.015.432 0 .833-.352 1.264-1.565.23-.65.41-1.248.57-1.889.096-.38.185-.778.287-1.27-.04.193.285-1.423.522-2.556H4.5a.6.6 0 1 1 0-1.2h1.472c.456-1.698 1.376-3.494 2.285-4.009.84-.476 1.634-.401 2.159.29a.6.6 0 0 1-.955.726c-.124-.163-.254-.175-.612.028-.51.289-1.218 1.642-1.627 2.965z",id:"alh形状结合"},null)])])},d=function(e){return"COMMON"===e.bidimensiontype?T("svg",{class:n.em("content","item-icon-fx"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"bbd1.Base基础/1.icon图标/2.normal/View-report-fill","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M9 1.2v4.974h1V3.2h2v2.974h1.5a1.5 1.5 0 0 1 1.5 1.5v5.784a1.5 1.5 0 0 1-1.5 1.5h-11a1.5 1.5 0 0 1-1.5-1.5V7.674a1.5 1.5 0 0 1 1.5-1.5H4V3.2h2v2.974h1V1.2h2zM6 6.636H4v4.038h2V6.636zm1 4.038h2V6.636H7v4.038zm5-4.053h-2v4.053h2V6.621z",id:"bbd形状结合"},null)])]):T("svg",{class:n.em("content","item-icon-fx"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"alheditor/formula","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M12.663 11.027c-.117.142-.25.318-.4.527.09.88.404 1.722.913 2.446a.807.807 0 0 0 .951.051c.212-.071.317.313 0 .494a2.582 2.582 0 0 1-2.376.185 2.786 2.786 0 0 1-.918-1.726c-.101.152-.177.27-.223.346-.05.08-.121.194-.215.34a5.11 5.11 0 0 1-.776.993 1.134 1.134 0 0 1-.787.3.82.82 0 0 1-.832-.852 1.058 1.058 0 0 1 1.085-1.113c.176 0 .352.021.522.066.167.045.324.094.471.147a2.69 2.69 0 0 0 .264-.271c.129-.15.25-.305.362-.467-.15-.602-.31-1.287-.527-2.038a.869.869 0 0 0-1.281-.585c-.259.118-.388-.329.094-.529.447-.184 2.482-1.047 2.941.8.075.303.144.597.212.885l.246-.38c.085-.13.157-.246.218-.346.213-.368.476-.704.781-1 .214-.194.492-.301.781-.3a.8.8 0 0 1 .594.239.84.84 0 0 1 .238.619c.015.3-.1.59-.314.8a1.075 1.075 0 0 1-.767.3 2.1 2.1 0 0 1-.535-.069 5.572 5.572 0 0 1-.456-.138 1.662 1.662 0 0 0-.266.276zM7.223 5.4H8.5a.6.6 0 1 1 0 1.2H6.928c-.236 1.116-.614 3-.573 2.8-.105.506-.198.919-.297 1.318-.17.677-.36 1.312-.604 1.999-.587 1.652-1.397 2.363-2.395 2.363-.146 0-.283-.009-.412-.027-.627-.087-1.061-.549-1.305-1.273a.6.6 0 0 1 1.137-.383c.112.334.224.452.334.468.072.01.154.015.246.015.432 0 .833-.352 1.264-1.565.23-.65.41-1.248.57-1.889.096-.38.185-.778.287-1.27-.04.193.285-1.423.522-2.556H4.5a.6.6 0 1 1 0-1.2h1.472c.456-1.698 1.376-3.494 2.285-4.009.84-.476 1.634-.401 2.159.29a.6.6 0 0 1-.955.726c-.124-.163-.254-.175-.612.028-.51.289-1.218 1.642-1.627 2.965z",id:"alh形状结合"},null)])])},p=function(t){var a;if(t.dynamodelflag)return"measure"===e.type&&"CALCULATED"===t.bimeasuretype&&(a=e.controller.measureToolbar),"dimension"===e.type&&"CALCULATED"===t.bidimensiontype&&(a=e.controller.dimensionToolbar),a?T(O("iBizActionToolbar"),{class:n.e("action"),"action-details":a.detoolbarItems,"actions-state":e.controller.getOptItemAction(t,a.detoolbarItems||[]),groupLevelKeys:[50,100],onActionClick:function(a,n){return function(t,a,n){e.controller.evt.emit("onActionClick",{detail:t,item:a,event:n})}(a,t,n)}},null):void 0},u=function(t){var a=p(t),s=T("div",{class:n.em("content","item"),draggable:!0,onDragstart:function(){return function(t){var a=I(I({},t),{},{dragTypes:"measure"===e.type?["measure"]:["dimension","filter","period","group"]});r.value=!0,i.value[t.codename]=!1,e.controller.evt.emit("onDragTarget",a)}(t)},onDragend:l,onMouseenter:function(e){return function(e,t){o.value[e.codename]=setTimeout((function(){i.value={},!1===r.value&&(i.value[e.codename]=!0)}),1e3)}(t)},onMouseleave:function(e){return function(e,t){clearTimeout(o.value[e.codename]),i.value={}}(t)}},[T("div",{class:n.em("content","item-icon")},["measure"===e.type?c(t):d(t),T("svg",{class:n.em("content","item-icon-move"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false"},[T("g",{id:"aitaction/drag--","stroke-width":"1","fill-rule":"evenodd"},[T("g",{id:"ait拖动",transform:"translate(5 1)","fill-rule":"nonzero"},[T("path",{d:"M1 2a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM1 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm-4 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm-4 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z",id:"ait形状结合"},null)])])])]),T("span",{class:n.em("content","text")},[t.pssysbicubemeasurename||t.pssysbicubedimensionname])]),u=T(O("el-popover"),{visible:!!i.value[t.codename]&&!r.value,trigger:"hover",placement:"right",width:230},{default:function(){return function(t){return T("div",{class:n.b("item-pop")},[T("div",{class:n.be("item-pop","title")},["measure"===e.type?c(t):d(t),T("span",{class:n.em("content","text")},[t.pssysbicubemeasurename||t.pssysbicubedimensionname])]),t.memo&&T("div",{class:n.be("item-pop","mome")},[t.memo])])}(t)},reference:function(){return s}});return e.isSearch?(t.pssysbicubemeasurename||t.pssysbicubedimensionname).indexOf(e.searchValue)>=0?"measure"===e.type?[u,a]:[s,a]:null:"measure"===e.type?[u,a]:[s,a]};return{ns:n,renderItem:function(e){return u(e)},switchCollapse:function(){a("collapse",!e.collapse)},onAdd:function(){a("add")},computeNumber:function(){return e.isSearch?e.items.filter((function(t){return(t.pssysbicubemeasurename||t.pssysbicubedimensionname).indexOf(e.searchValue)>-1})).length:e.items.length}}},render:function(){var e=this;return T("div",{class:this.ns.b()},[T("div",{class:[this.ns.e("header"),this.ns.is("collapse",this.collapse)]},[T("div",{class:this.ns.em("header","caption")},[T("span",null,[this.caption]),T("span",null,[A("·")]),T("span",null,[this.computeNumber()])]),T("div",{class:this.ns.em("header","icons")},[T("div",{class:this.ns.em("header","icons-add"),onClick:this.onAdd},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false"},[T("g",{id:"ars1.Base基础/1.icon图标/1.-action/plus","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M8.578 7.383V1.602a.601.601 0 1 0-1.2 0v5.781H1.6a.601.601 0 0 0 0 1.203h5.777v5.812a.601.601 0 1 0 1.2 0V8.586H14.4a.601.601 0 0 0 0-1.203H8.578z",id:"arsFill-1"},null)])])]),T("div",{class:this.ns.em("header","icons-collapse"),onClick:this.switchCollapse},[this.collapse?T("i",{class:"fa fa-angle-right","aria-hidden":"true"},null):T("i",{class:"fa fa-angle-up","aria-hidden":"true"},null)])])]),!this.collapse&&T("div",{class:this.ns.e("content")},[this.items.map((function(t){return e.renderItem(t)}))])])}});var de=g({name:"BIReportSelect",components:{"bi-split":le,"bi-select-group":ce},props:{controller:{type:Object,required:!0}},setup:function(e){var t=s("select"),a=e.controller,n=x({searchState:!1,searchValue:"",popoverVisible:!1,splitValue:.5,measureCollapse:!1,dimensionCollapse:!1}),i=x(),r=function(){n.value.searchState=!n.value.searchState,n.value.searchState?D((function(){i.value.focus()})):n.value.searchValue=""},o=function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"aubnormal/search","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M6.751 12.303A5.557 5.557 0 0 1 1.2 6.751C1.2 3.691 3.69 1.2 6.751 1.2a5.558 5.558 0 0 1 5.551 5.551 5.557 5.557 0 0 1-5.551 5.552M6.751 0a6.751 6.751 0 1 0 4.309 11.949l3.855 3.855a.6.6 0 1 0 .849-.849l-3.854-3.853A6.751 6.751 0 0 0 6.751 0",id:"aubFill-1"},null)])])},l=function(){return T("div",{class:t.em("header","switch-data")},[T(O("el-tooltip"),{effect:"dark",content:"切换数据集",placement:"top"},{default:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"adqnormal/arrow-right-left","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.473 1.027a.6.6 0 0 1 .778.573v12.99a.6.6 0 0 1-1.2 0V3.707L2.617 6.182a.6.6 0 1 1-1.04-.6l2.47-4.262a.599.599 0 0 1 .426-.293zm7.156 14.051a.6.6 0 0 1-.778-.573V1.7a.6.6 0 1 1 1.2 0v10.723l1.523-2.594a.6.6 0 1 1 1.04.6l-2.558 4.357a.599.599 0 0 1-.427.292z",id:"adq形状结合",transform:"rotate(90 8.095 8.095)"},null)])])}})])},c=function(){var e=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.switchCube(t.pssysbicubeid);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){a.state.selectedScheme=e,a.state.cube=[],a.switchScheme(e.id)},p=function(e){"Escape"===e.code&&(e.stopPropagation(),r())},u=w((function(){return a.state.scheme&&a.state.scheme.length>0})),h=function(){var e,i,s;return T("div",{class:t.e("header")},[T("div",{class:t.em("header","caption")},[null===(e=a.state.selectedScheme)||void 0===e?void 0:e.name]),T("div",{class:t.em("header","select-icon")},[T("div",{class:t.em("header","search"),onClick:r},[T(O("el-tooltip"),{effect:"dark",content:"搜索",placement:"top"},(s=i=o(),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!M(s)?i:{default:function(){return[i]}}))]),T("div",{class:t.em("header","select")},[u.value?T(O("el-popover"),{visible:n.value.popoverVisible,"onUpdate:visible":function(e){return n.value.popoverVisible=e},trigger:"click",width:"200px","popper-class":t.em("header","cascader-list")},{reference:function(){return l()},default:function(){var e;return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return a.state.cube&&a.state.cube.length>0&&a.state.selectedScheme.id===e.id?n.value.popoverVisible&&T(O("el-popover"),{placement:"right-start",width:"200px",trigger:"hover",offset:0,"popper-class":t.em("header","cascader-list")},{reference:function(){return T("div",{class:t.e("select-item"),onClick:function(){return d(e)}},[T("div",{class:t.em("select-item","label")},[e.name]),T("div",{class:t.em("select-item","icon")},[T("i",{class:"fa fa-angle-right","aria-hidden":"true"},null)])])},default:function(){return a.state.cube.map((function(e){return T("div",{class:[t.e("select-item"),t.is("selected",a.state.selectCube.pssysbicubeid===e.pssysbicubeid)],onClick:function(){return c(e)}},[e.pssysbicubename])}))}}):T("div",{class:t.e("select-item"),onClick:function(){return d(e)}},[T("div",{class:t.em("select-item","label")},[e.name]),T("div",{class:t.em("select-item","icon")},[T("i",{class:"fa fa-angle-right","aria-hidden":"true"},null)])])}))}(null===(e=a.state)||void 0===e?void 0:e.scheme)}}):l()])])])},f=function(){var e=b(y().mark((function e(t){var n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="ps_sys_bi_cube_".concat(t.toLowerCase(),"_quick_create_").concat(t.toLowerCase()),e.next=3,ibiz.hub.config.view.get(n);case 3:return i=e.sent,e.next=6,ibiz.openView.modal(i.id,a.context,a.viewParams);case 6:(r=e.sent)&&r.ok&&a.refreshCubeDetails(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=w((function(){return n.value.measureCollapse||n.value.dimensionCollapse})),v=function(e,i,r,o){return T(O("bi-select-group"),{class:[C({},t.em("content","index"),i),t.is("collapse",i)],caption:e,searchValue:n.value.searchValue,isSearch:n.value.searchState,collapse:i,type:o,items:r,controller:a,onAdd:function(){f(o)},onCollapse:function(e){return function(e,t){"measure"===e?n.value.measureCollapse=t:n.value.dimensionCollapse=t}(o,e)}},null)};return{ns:t,searchInput:i,renderSelectHeader:function(){return n.value.searchState?T("div",{class:t.e("header")},[T(O("el-input"),{ref:"searchInput",class:t.em("header","search-input"),modelValue:n.value.searchValue,"onUpdate:modelValue":function(e){return n.value.searchValue=e},onKeydown:p,placeholder:"搜索"},{prefix:function(){return o()}}),T("div",{class:t.em("header","close"),onClick:r},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"agqaction/close","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.456 7.456V-.115h1.2v7.571h7.572v1.2H8.656v7.572h-1.2V8.656H-.115v-1.2h7.571z",id:"agq形状结合",transform:"rotate(45 8.056 8.056)"},null)])])])]):h()},renderSelectContent:function(){var e,i;return m.value?T("div",{class:[t.e("content"),t.is("collapse",m.value)]},[[v("指标",n.value.measureCollapse,(null===(e=a.state)||void 0===e?void 0:e.measure)||[],"measure"),v("维度",n.value.dimensionCollapse,(null===(i=a.state)||void 0===i?void 0:i.dimension)||[],"dimension")]]):T("div",{class:t.e("content")},[T(O("bi-split"),{modelValue:n.value.splitValue,"onUpdate:modelValue":function(e){return n.value.splitValue=e},mode:"vertical",min:"48px",max:"48px"},{top:function(){var e;return v("指标",n.value.measureCollapse,(null===(e=a.state)||void 0===e?void 0:e.measure)||[],"measure")},bottom:function(){var e;return v("维度",n.value.dimensionCollapse,(null===(e=a.state)||void 0===e?void 0:e.dimension)||[],"dimension")}})])}}},render:function(){return T("div",{class:this.ns.b("container")},[this.renderSelectHeader(),this.renderSelectContent()])}}),pe={data:{details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"period",caption:"同环比",type:"GROUP",isCollapse:!1,details:[{id:"period",caption:"时间维度",subCaption:"同环比",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,disableCalcField:!1,typeLimit:{tag:"IN",types:["DATE"]},actions:[{id:"CONFIG",caption:"配置"},{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",showCaption:!1,type:"ITEM",editorType:"DRAG",disableCalcField:!0,multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"font",caption:"字体设置",type:"GROUP",details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT",fontMax:300}]},{id:"yoy",caption:"同比",type:"GROUP",enableSwitch:!0,details:[{id:"yoy",caption:"同比",showCaption:!1,type:"ITEM",editorType:"CHECKBOXS",items:[{id:"orgin",label:"显示原始值"},{id:"difference",label:"显示差异值"}]}]},{id:"qoq",caption:"环比",type:"GROUP",enableSwitch:!0,details:[{id:"qoq",caption:"环比",showCaption:!1,type:"ITEM",editorType:"CHECKBOXS",items:[{id:"orgin",label:"显示原始值"},{id:"difference",label:"显示差异值"}]}]}]}},ue={caption:"",data:{measure:void 0,period:void 0,filter:void 0},style:{font:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:100,color:"#000"}},yoy:{show:!1,yoy:["orgin","difference"]},qoq:{show:!1,qoq:["orgin","difference"]}},extend:{}},he={data:{pagination:!0,details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEM"}]},{id:"fontSetting",caption:"字体设置",type:"GROUP",show:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"}]},{id:"featureSetting",caption:"功能设置",type:"GROUP",details:[{id:"endpoint",caption:"设置终点值：",showCaption:!0,type:"ITEM",editorType:"ENDPOINT"}]}]}},fe={dechartLegend:{showLegend:!1,id:"legend",appId:"srfAppId"},dechartTitle:{showTitle:!1,id:"title",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",seriesType:"pie",valueField:"srfValue",id:"gauge",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},appDataEntityId:"srfAppDataEntityId",id:"srfAppId.srfAppDataEntityId.chart",appId:"srfAppId",name:"chart",readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"chart",controlType:"CHART",logicName:"srfCaption"},me={caption:"",data:{measure:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:"#6698FF"},fontSetting:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:20,color:"#000"}},featureSetting:{endpoint:100}},extend:{}},ve={data:{pagination:!0,details:[{id:"measure",caption:"指标 / 纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度 / 横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,showEmptyData:!1,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"置顶"},{id:"inside",label:"居中"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},ye={dechartLegend:{showLegend:!1,id:"legend",appId:"srfAppId"},dechartTitle:{showTitle:!1,id:"title",appId:"srfAppId"},dechartSerieses:[{catalogField:"srfCatalogField",seriesType:"bar",valueField:"is_leaf",id:"bar_1",appId:"srfAppId",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",id:"0",appId:"srfAppId"}}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],appDataEntityId:"srfAppDataEntityId",id:"srfAppId.srfAppDataEntityId.chart",appId:"srfAppId",name:"chart",readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"ChartView_Chart",controlType:"CHART",logicName:"Chart"},ge={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#666"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#666"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#eee"},showGridline:!1,gridline:{borderStyle:"dashed",borderSize:1,color:"#eee"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#666"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#666"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#eee"},showGridline:!1,gridline:{borderStyle:"dashed",borderSize:1,color:"#eee"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#666"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},be={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",enableChartDataSet:!0,id:"bar_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"STACKCOL_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.STACKCOL_Chart",appId:"srfAppId"},we={data:{details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"置顶"},{id:"inside",label:"居中"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Ie={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Ce={data:{details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"置顶"},{id:"inside",label:"居中"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Te={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},xe={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",enableChartDataSet:!0,id:"bar_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"STACKCOL_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.STACKCOL_Chart",appId:"srfAppId"},Ee={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",enableChartDataSet:!0,id:"bar_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"MULTI_SERIES_BAR_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.MULTI_SERIES_BAR_Chart",appId:"srfAppId"},Se={data:{details:[{id:"measure",caption:"指标/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"right",label:"置顶"},{id:"inside",label:"居中"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},De={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"}},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},enableLabelInterval:!1,labelInterval:1},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Oe={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",enableChartDataSet:!0,id:"bar_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[bar_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"STACK_BAR_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.STACK_BAR_Chart",appId:"srfAppId"},Ae={data:{details:[{id:"measure",caption:"指标/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"right",label:"置顶"},{id:"inside",label:"居中"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Me={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"}},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},enableLabelInterval:!1,labelInterval:1},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Le={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",enableChartDataSet:!0,id:"line_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"MULTI_SERIES_LINE_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.MULTI_SERIES_LINE_Chart",appId:"srfAppId"},Re={data:{details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"线上方"},{id:"bottom",label:"线下方"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},ke={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Fe={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",enableChartDataSet:!0,id:"line_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"MULTI_SERIES_LINE_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.MULTI_SERIES_LINE_Chart",appId:"srfAppId"},Ne={data:{details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"线上方"},{id:"bottom",label:"线下方"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Pe={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Be={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{showDataGrid:!1,id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",enableChartDataSet:!0,id:"line_1",appId:"srfAppId"}],dechartTitle:{title:"柱状图",id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartGrids:[{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[line_1]直角坐标系[0]",id:"0",appId:"srfAppId"}],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"AREA_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"A1BCD468-3027-4DAF-A36E-F8900BF586DA",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.AREA_Chart",appId:"srfAppId"},ze={data:{details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,enableRemove:!0,required:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"group",caption:"分组",type:"GROUP",isCollapse:!1,details:[{id:"group",caption:"分组",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,typeLimit:{tag:"NOTIN",types:["DATE"]},actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"标签位置",type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"线上方"},{id:"bottom",label:"线下方"}]},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Ge={caption:"",data:{measure:void 0,dimension:void 0,group:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"top",scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},Ve={data:{pagination:!0,details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,allowClear:!0,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:5,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度",type:"GROUP",isCollapse:!1,allowClear:!0,required:!1,enableRemove:!0,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:5,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,allowClear:!0,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"gridFont",caption:"表格字体",type:"GROUP",enableSwitch:!1,details:[{id:"gridHeader",caption:"表头",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"gridHeaderAlign",caption:"表头对齐",showCaption:!1,type:"ITEM",editorType:"POSITION",editorStyle:"CENTER",showCenter:!0},{id:"gridBody",caption:"表身",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"gridBodyAlign",caption:"表身对齐",showCaption:!1,type:"ITEM",editorType:"POSITION",editorStyle:"CENTER",showCenter:!0}]},{id:"agg",caption:"合计行",type:"GROUP",enableSwitch:!0,details:[{id:"position",caption:"合计行位置",showCaption:!1,type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"顶部"},{id:"bottom",label:"底部"}]}]},{id:"function",caption:"功能设置",type:"GROUP",details:[{id:"function",caption:"功能设置",showCaption:!1,type:"ITEM",editorType:"CHECKBOXS",items:[{id:"dimensionMerge",label:"同维度合并"},{id:"fixedGridHeader",label:"固定表头"},{id:"fixedDimension",label:"固定维度列"},{id:"showPercent",label:"显示百分比"}]}]}]}},je={aggMode:"NONE",columnEnableFilter:2,columnEnableLink:2,groupMode:"NONE",pagingMode:1,pagingSize:20,sortMode:"REMOTE",enableCustomized:!1,enablePagingBar:!1,fetchControlAction:{appDEMethodId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},autoLoad:!0,showBusyIndicator:!0,singleSelect:!0,codeName:"PIVOT_TABLE",controlType:"GRID",logicName:"主表格",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"grid",appId:"srfAppId"},modelId:"9db1aa2be35a58b18c1974ca7cb64cc1",modelType:"PSDEGRID",name:"grid",id:"srfAppId.srfAppDataEntityId.PIVOT_TABLE",appId:"srfAppId"},Ue={caption:"",data:{measure:void 0,dimension:void 0,filter:[]},style:{gridFont:{show:!0,gridHeader:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#555b61"},gridHeaderAlign:"center",gridBody:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#1d1f23"},gridBodyAlign:"left"},agg:{show:!1,position:"top"},function:{show:!0,function:["dimensionMerge","fixedGridHeader"]}},extend:{}},_e={data:{pagination:!0,details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,allowClear:!0,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:5,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度(行)",type:"GROUP",isCollapse:!1,allowClear:!0,required:!1,enableRemove:!0,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:5,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension_col",caption:"维度(列)",type:"GROUP",isCollapse:!1,allowClear:!0,required:!1,enableRemove:!0,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,allowClear:!0,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"gridFont",caption:"表格字体",type:"GROUP",enableSwitch:!1,details:[{id:"gridHeader",caption:"表头",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"gridHeaderAlign",caption:"表头对齐",showCaption:!1,type:"ITEM",editorType:"POSITION",editorStyle:"CENTER",showCenter:!0},{id:"gridBody",caption:"表身",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"gridBodyAlign",caption:"表身对齐",showCaption:!1,type:"ITEM",editorType:"POSITION",editorStyle:"CENTER",showCenter:!0}]},{id:"agg",caption:"合计行/列",type:"GROUP",enableSwitch:!0,details:[{id:"rowPosition",caption:"行位置",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"top",label:"顶部"},{id:"bottom",label:"底部"}]},{id:"colPosition",caption:"列位置",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"left",label:"左侧"},{id:"right",label:"右侧"}]}]},{id:"function",caption:"功能设置",type:"GROUP",details:[{id:"function",caption:"功能设置",showCaption:!1,type:"ITEM",editorType:"CHECKBOXS",items:[{id:"dimensionMerge",label:"同维度合并"},{id:"fixedGridHeader",label:"固定表头"},{id:"fixedDimension",label:"固定维度列"},{id:"showPercent",label:"显示百分比"}]}]}]}},He={aggMode:"NONE",columnEnableFilter:2,columnEnableLink:2,gridStyle:"USER",groupMode:"NONE",pagingMode:1,pagingSize:20,sortMode:"REMOTE",enableCustomized:!1,enablePagingBar:!1,singleSelect:!0,fetchControlAction:{appDEMethodId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},autoLoad:!0,showBusyIndicator:!0,codeName:"PIVOT_TABLE",controlType:"GRID",logicName:"主表格",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"grid",appId:"srfAppId"},modelId:"9db1aa2be35a58b18c1974ca7cb64cc1",modelType:"PSDEGRID",name:"grid",id:"srfAppId.srfAppDataEntityId.PIVOT_TABLE",appId:"srfAppId"},qe={caption:"",data:{measure:void 0,dimension:void 0,dimension_col:void 0,filter:[],size:50},style:{gridFont:{show:!0,gridHeader:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#555b61"},gridHeaderAlign:"center",gridBody:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#1d1f23"},gridBodyAlign:"left"},agg:{show:!1,rowPosition:"top",colPosition:"left"},function:{show:!0,function:["dimensionMerge","fixedGridHeader"]}},extend:{}},Xe={data:{pagination:!0,details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"percentage",caption:"显示百分比",type:"ITEM",editorType:"CHECKBOX"},{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"scope",caption:"显示数据范围",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION",showCenter:!0}]}]}},Je={coordinateSystem:"NONE",chartCoordinateSystems:[{echartsType:"none",type:"NONE",name:"[pie]无坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",catalogCodeListId:"srfAppCodeListId",echartsType:"pie",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{category:"srfCatalogField",value:"srfValue",type:"NONE",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"pie",valueField:"srfValue",enableChartDataSet:!0,id:"pie_0",appId:"srfAppId"}],dechartTitle:{title:"srfCaption",showTitle:!1,id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],fetchControlAction:{appDEMethodId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"PIE_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"B5AC8AE3-2186-497C-B6E8-BDBAE218B618",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.PIE_Chart",appId:"srfAppId"},We={caption:"",data:{measure:void 0,dimension:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},label:{show:!1,percentage:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#000"},scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#000"},position:"left-top"}},extend:{}},Ye={coordinateSystem:"RADAR",chartCoordinateSystems:[{chartRadar:{chartCoordinateSystemId:"0",type:"radar",name:"[radar_0]雷达坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"radar",type:"RADAR",name:"[radar_0]雷达坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"radar",chartCoordinateSystemId:"0",chartDataSetId:"0",seriesField:"srfSeriesField",seriesLayoutBy:"column",seriesType:"radar",valueField:"srfValue",enableChartDataSet:!0,id:"radar_0",appId:"srfAppId"}],dechartTitle:{title:"srfCaption",titlePos:"TOP",showTitle:!0,id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartRadars:[{chartCoordinateSystemId:"0",type:"radar",name:"[radar_0]雷达坐标系[0]",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"Radar_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"0517D092-EB9B-4300-91CA-906647294254",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.Radar_Chart",appId:"srfAppId"},$e={caption:"",data:{measure:void 0,dimension:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#000"},scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:14,color:"#000"},position:"left-top"}},extend:{}},Ke={data:{pagination:!0,details:[{id:"measure",caption:"指标",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"scope",caption:"显示数据范围",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION",showCenter:!0}]}]},extend:{}},Ze={data:{pagination:!0,details:[{id:"measure",caption:"指标/纵轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"measure",caption:"指标/纵轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!1,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"AXIS",caption:"应用轴"},{id:"CORDON",caption:"设置警戒线"},{id:"REMOVE",caption:"删除"}]}]},{id:"dimension",caption:"维度/横轴",type:"GROUP",isCollapse:!1,required:!0,enableRemove:!0,details:[{id:"dimension",caption:"维度/横轴",showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,max:3,actions:[{id:"UPDATE",caption:"设置显示名"},{id:"SORT",caption:"排序"},{id:"REMOVE",caption:"删除"}]}]},{id:"filter",caption:"筛选",type:"GROUP",isCollapse:!1,enableRemove:!0,switchEditMode:!0,details:[{id:"filter",caption:"筛选项",subCaption:"筛选",disableCalcField:!0,showCaption:!1,type:"ITEM",editorType:"DRAG",multiple:!0,actions:[{id:"FILTER",caption:"过滤"},{id:"REMOVE",caption:"删除"}],expandActions:[{id:"FILTER",caption:"过滤"}]}]}]},style:{details:[{id:"graphics",caption:"绘图",type:"GROUP",isCollapse:!1,details:[{id:"color",caption:"当前配色",showCaption:!0,type:"ITEM",editorType:"COLOR",editorStyle:"ITEMS"}]},{id:"xAxis",caption:"横轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"enableLabelInterval",caption:"开启轴标签间隔",type:"ITEM",editorType:"CHECKBOX"},{id:"labelInterval",caption:"标签间隔",showCaption:!0,type:"ITEM",editorType:"NUMBER"}]},{id:"yAxis",caption:"纵轴",type:"GROUP",enableSwitch:!1,details:[{id:"showTitle",caption:"显示轴标题",type:"ITEM",editorType:"CHECKBOX"},{id:"titleFont",caption:"显示轴标题",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showLabel",caption:"显示轴标签",type:"ITEM",editorType:"CHECKBOX"},{id:"labelFont",caption:"显示轴标签",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"showAxisline",caption:"显示轴线",type:"ITEM",editorType:"CHECKBOX"},{id:"axisline",caption:"显示轴线",type:"ITEM",editorType:"FONT",mode:"BORDER"},{id:"showGridline",caption:"显示网格线",type:"ITEM",editorType:"CHECKBOX"},{id:"gridline",caption:"显示网格线",type:"ITEM",editorType:"FONT",mode:"BORDER"}]},{id:"label",caption:"标签",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"scope",caption:"显示数据",showCaption:!0,type:"ITEM",editorType:"RADIO",items:[{id:"all",label:"全部数据"},{id:"max_min",label:"最大值/最小值"}]}]},{id:"legend",caption:"图例",type:"GROUP",enableSwitch:!0,details:[{id:"font",caption:"文字",showCaption:!0,type:"ITEM",editorType:"FONT",mode:"FONT"},{id:"position",caption:"数据位置",showCaption:!0,type:"ITEM",editorType:"POSITION",editorStyle:"DIRECTION"}]}]}},Qe={caption:"",data:{measure:void 0,dimension:void 0,filter:void 0},style:{graphics:{colorScheme:"default",color:[]},xAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"solid",borderSize:1,color:"#000"},showGridline:!1,gridline:{borderStyle:"solid",borderSize:1,color:"#000"},enableLabelInterval:!1,labelInterval:1},yAxis:{show:!0,showTitle:!0,titleFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showLabel:!0,labelFont:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},showAxisline:!0,axisline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"},showGridline:!0,gridline:{borderStyle:"dashed",borderSize:1,color:"#dddddd"}},label:{show:!1,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},scope:"all"},legend:{show:!0,font:{fontWeight:"normal",fontStyle:"normal",fontSize:12,color:"#000"},position:"right-top"}},extend:{}},et={coordinateSystem:"XY",chartCoordinateSystems:[{chartGrid:{chartGridXAxis0Id:"0",chartGridYAxis0Id:"0",chartCoordinateSystemId:"0",type:"grid",name:"[scatter_0]直角坐标系[0]",id:"0",appId:"srfAppId"},echartsType:"cartesian2d",type:"XY",name:"[scatter_0]直角坐标系[0]",id:"0",appId:"srfAppId"}],dechartDataGrid:{id:"0",appId:"srfAppId"},dechartLegend:{showLegend:!0,id:"0",appId:"srfAppId"},dechartSerieses:[{catalogField:"srfCatalogField",echartsType:"scatter",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],itemId:"srfValue",itemName:"srfValue",type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesField:"srfValue",seriesLayoutBy:"column",seriesType:"scatter",valueField:"srfValue",enableChartDataSet:!0,id:"scatter_0",appId:"srfAppId"}],dechartTitle:{title:"srfCaption",showTitle:!0,id:"0",appId:"srfAppId"},chartDataSetGroups:[{appDEDataSetId:"srfAppDEDataSetId",appDataEntityId:"srfAppDataEntityId",name:"DEFAULT",id:"0",appId:"srfAppId"}],chartDataSets:[],chartXAxises:[{echartsPos:"xAxis",echartsType:"category",position:"bottom",type:"category",name:"axis_xAxis_0",id:"0",appId:"srfAppId"}],chartYAxises:[{echartsPos:"yAxis",echartsType:"value",position:"left",type:"numeric",name:"axis_yAxis_0",id:"0",appId:"srfAppId"}],fetchControlAction:{appDEMethodId:"fetchdefault",appDataEntityId:"web.reginfo",id:"fetch",appId:"srfAppId"},readOnly:!0,autoLoad:!0,showBusyIndicator:!0,codeName:"SCATTER_Chart",controlType:"CHART",logicName:"srfCaption",appDataEntityId:"srfAppDataEntityId",controlParam:{id:"chart",appId:"srfAppId"},modelId:"AF51908C-6D6F-4055-9E30-C6A599FB191C",modelType:"PSDECHART",name:"chart",id:"srfAppId.srfAppDataEntityId.PIE_Chart",appId:"srfAppId"},tt=[{type:"NUMBER",caption:"数字",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <title>数字</title>\n        <g id="数字" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <path d="M10.0753482,26.9089624 L10.0753482,9.01202017 L7.79185175,9.06345593 L5,10.535639 L5,12.9756265 L7.79185175,11.8852771 L7.79185175,26.9089624 L10.0753482,26.9089624 Z M21.3531141,26.9765798 L21.3797168,24.7390601 L16.4153132,24.7390601 L20.2938049,17.4858646 C20.5066262,17.0937659 20.6751097,16.7613345 20.7992555,16.4885701 C20.9234012,16.2158058 21.0120768,15.9430415 21.0652821,15.6702772 C21.1184874,15.3975129 21.1539576,15.1119628 21.1716927,14.8136268 C21.1894278,14.5152909 21.1982954,14.1445019 21.1982954,13.7012599 C21.1982954,13.0875402 21.1229212,12.5079161 20.9721728,11.9623874 C20.8214244,11.4168588 20.5864342,10.9309974 20.2672022,10.5048032 C19.9302352,10.078609 19.5090264,9.74191552 19.0035758,9.49472287 C18.4981252,9.24753022 17.8906978,9.12393389 17.1812934,9.12393389 C16.61377,9.12393389 16.0817167,9.23048245 15.5851337,9.44357956 C15.0885507,9.65667668 14.6629081,9.94222681 14.3082059,10.30023 C13.9357687,10.6582331 13.6431394,11.0759035 13.4303181,11.553241 C13.2174968,12.0305785 13.1110862,12.5420116 13.1110862,13.0875402 L13.1110862,14.5195528 L15.2259978,14.4939812 L15.2259978,12.7295371 C15.2259978,12.3033428 15.3457098,11.9794352 15.5851337,11.7578142 C15.8245577,11.5361932 16.3034056,11.1952378 17.1546908,11.1952378 C17.9492236,11.1952378 18.1617836,11.5627877 18.3307866,11.7157479 L18.3665311,11.7450284 C18.5438822,11.8728867 18.6768955,12.0305785 18.765571,12.218104 C18.8542466,12.4056294 18.9030181,12.6229885 18.9118857,12.8701812 C18.9207532,13.1173738 18.925187,13.3517806 18.925187,13.5734016 C18.925187,14.0677869 18.9074519,14.4811953 18.8719817,14.8136268 C18.8365115,15.1460583 18.6799553,15.7128967 18.4316638,16.1561386 L13.8185292,24.8413467 L13.8185292,26.9765798 L21.3531141,26.9765798 Z M27.1553491,26.9896583 C27.9996491,26.9896583 28.4890869,26.7867363 29.0079796,26.4802827 C29.5268723,26.173829 29.9534198,25.7886913 30.2876219,25.3248695 C30.4283385,25.1260888 30.5426708,24.9355905 30.6306187,24.7533749 C30.7185667,24.5711592 30.788925,24.3475308 30.8416937,24.0824898 C30.8944625,23.8340139 30.9340391,23.5192777 30.9604234,23.1382812 C30.9868078,22.7572848 31,22.2768979 31,21.6971207 C31,21.0676483 30.9912052,20.5499901 30.9736156,20.1441461 C30.956026,19.738302 30.8944625,19.3862945 30.788925,19.0881233 C30.6833875,18.8065173 30.5206838,18.5580413 30.300814,18.3426955 C30.0809442,18.1273497 29.952093,17.945134 29.5299429,17.696658 C29.9169138,17.4813122 29.9885989,17.3073791 30.2084687,17.1251634 C30.4283385,16.9429477 30.599837,16.7193193 30.7229641,16.4542783 C30.8285016,16.2058024 30.8944625,15.8910662 30.9208469,15.5100697 C30.9472312,15.1290733 30.9604234,14.6321214 30.9604234,14.0192141 C30.9604234,12.942485 30.8812703,12.1307969 30.7229641,11.5841498 C30.6350161,11.3025437 30.5250812,11.0623503 30.3931594,10.8635696 C30.2612375,10.6647888 30.1073286,10.4660081 29.9314328,10.2672273 C29.6851786,9.98562124 29.3201947,9.70815644 28.8364812,9.4348329 C28.3527676,9.16150936 27.9732648,9 27.2345022,9 C26.6716356,9 26.143948,9.09939038 25.6514397,9.29817113 C25.1589313,9.49695189 24.7279865,9.7619929 24.3586053,10.0932942 C23.989224,10.4245954 23.6989959,10.8221569 23.4879209,11.2859787 C23.2768459,11.7498004 23.1713084,12.2384698 23.1713084,12.7519868 L23.1713084,14.2179948 L25.3315282,14.2179948 L25.3315282,12.8265295 C25.3315282,12.5614885 25.4326683,12.288165 25.6349485,12.0065589 C25.8372287,11.7249529 26.4909861,11.2735549 27.1553491,11.2859787 C27.8197121,11.2984025 28.2040127,11.7001053 28.4414721,11.9320161 C28.6789314,12.163927 28.7976611,12.4620982 28.7976611,12.8265295 L28.7976611,15.1125082 C28.7976611,15.7751107 28.6437523,16.1975198 28.3359346,16.3797355 C28.0281168,16.5619512 27.1729387,16.6033639 26.3638178,16.6033639 L26.3638178,18.8396474 C26.8035574,18.8396474 27.1597465,18.8562124 27.4323851,18.8893426 C27.7050236,18.9224727 28.2172049,19.0549932 28.3755111,19.1875137 C28.6569445,19.4028595 28.7976611,19.8583988 28.7976611,20.5541314 L28.7976611,23.088586 C28.7976611,23.5192777 28.6789314,23.8630027 28.4414721,24.1197612 C28.2040127,24.3765197 27.9439519,24.80307 27.1553491,24.80307 C26.3667463,24.80307 25.8888991,24.3765197 25.6514397,24.1197612 C25.4139803,23.8630027 25.2952506,23.5358427 25.2952506,23.1382812 L25.2952506,21.8213587 L23.1713084,21.7716635 L23.1713084,23.212824 C23.1713084,23.9085566 23.2988328,24.4966164 23.5538818,24.9770032 C23.8089308,25.45739 24.1299407,25.846669 24.5169115,26.1448401 C24.9038824,26.4430113 25.3348272,26.6583571 25.8097459,26.7908776 C26.2846647,26.9233981 26.7331991,26.9896583 27.1553491,26.9896583 Z" id="形状结合" fill="#6698FF" fill-rule="nonzero"></path>\n        </g>\n    </svg>'},{type:"MULTI_SERIES_COL",caption:"多系列柱状图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>柱状图</title>\n    <g id="柱状图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(4.771362, 7.011523)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="26.9219971 21 26.9219971 22.5 0 22.5 0 21"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2.4786377 10.1428571 6.4786377 10.1428571 6.4786377 20 2.4786377 20"></polygon>\n            <polygon id="矩形" fill="#73D897" points="8.4786377 3.28571429 12.4786377 3.28571429 12.4786377 20 8.4786377 20"></polygon>\n            <polygon id="矩形" fill="#73D897" points="20.4786377 7.95238095 24.4786377 7.95238095 24.4786377 20 20.4786377 20"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="14.4786377 1.59164348e-12 18.4786377 1.59164348e-12 18.4786377 20 14.4786377 20"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"STACK_COL",caption:"堆叠柱状图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>堆叠柱状图</title>\n    <g id="堆叠柱状图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(4.771362, 8.011523)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="26.9219971 20 26.9219971 21.5 5.56690466e-14 21.5 5.56690466e-14 20"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2.4786377 10 8.4786377 10 8.4786377 19 2.4786377 19"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="10.4786377 9 16.4786377 9 16.4786377 19 10.4786377 19"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="18.4786377 14.0909091 24.4786377 14.0909091 24.4786377 19 18.4786377 19"></polygon>\n            <polygon id="矩形" fill="#73D897" points="2.4786377 4 8.4786377 4 8.4786377 9 2.4786377 9"></polygon>\n            <polygon id="矩形" fill="#73D897" points="10.4786377 -1.70530257e-13 16.4786377 -1.70530257e-13 16.4786377 8 10.4786377 8"></polygon>\n            <polygon id="矩形" fill="#73D897" points="18.4786377 8 24.4786377 8 24.4786377 13 18.4786377 13"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"ZONE_COL",caption:"分区柱状图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>分区柱状图</title>\n    <g id="分区柱状图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(5.000000, 6.000000)" id="编组-5">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="26 10 26 11.5 -2.70117262e-13 11.5 -2.70117262e-13 10"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2 4 8 4 8 9 2 9"></polygon>\n            <polygon id="矩形" fill="#5DCFFF" points="10 4.54761229e-13 16 4.54761229e-13 16 9 10 9"></polygon>\n            <polygon id="矩形" fill="#73D897" points="18 5 24 5 24 9 18 9"></polygon>\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="26 23 26 24.5 -2.70117262e-13 24.5 -2.70117262e-13 23"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2 17 8 17 8 22 2 22"></polygon>\n            <polygon id="矩形" fill="#5DCFFF" points="10 13 16 13 16 22 10 22"></polygon>\n            <polygon id="矩形" fill="#73D897" points="18 16 24 16 24 22 18 22"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"MULTI_SERIES_BAR",caption:"多系列条形图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>条形图</title>\n    <g id="条形图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="柱状图" transform="translate(17.625000, 18.125000) rotate(-270.000000) translate(-17.625000, -18.125000) translate(6.500000, 5.500000)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="22 23.75 22 25.25 2.27304287e-13 25.25 2.27304287e-13 23.75"></polygon>\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" transform="translate(21.500000, 12.500000) rotate(-90.000000) translate(-21.500000, -12.500000) " points="34 11.75 34 13.25 9 13.25 9 11.75"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2 8.75 6 8.75 6 20.75 2 20.75"></polygon>\n            <polygon id="矩形" fill="#73D897" points="8 0.75 12 0.75 12 20.75 8 20.75"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="14 3.75 18 3.75 18 20.75 14 20.75"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"STACK_BAR",caption:"堆积条形图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>条形柱状图</title>\n    <g id="条形柱状图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="柱状图" transform="translate(17.625000, 18.125000) rotate(-270.000000) translate(-17.625000, -18.125000) translate(6.500000, 5.500000)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="22 23.75 22 25.25 2.27304287e-13 25.25 2.27304287e-13 23.75"></polygon>\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" transform="translate(21.500000, 12.500000) rotate(-90.000000) translate(-21.500000, -12.500000) " points="34 11.75 34 13.25 9 13.25 9 11.75"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="2 12.75 6 12.75 6 20.75 2 20.75"></polygon>\n            <polygon id="矩形备份" fill="#73D897" points="2 8.75 6 8.75 6 12.75 2 12.75"></polygon>\n            <polygon id="矩形备份-3" fill="#73D897" points="14 3.75 18 3.75 18 10.75 14 10.75"></polygon>\n            <polygon id="矩形备份-2" fill="#73D897" points="8 0.75 12 0.75 12 8.75 8 8.75"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="8 8.75 12 8.75 12 20.75 8 20.75"></polygon>\n            <polygon id="矩形" fill="#6698FF" points="14 10.75 18 10.75 18 20.75 14 20.75"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"MULTI_SERIES_LINE",caption:"多系列折线图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>折线图</title>\n    <g id="折线图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(4.000000, 10.000000)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="0.00203182278 17.7107207 29.0020318 17.7892848 28.9979682 19.2892793 -0.00203182278 19.2107152"></polygon>\n            <polyline id="路径-4" stroke="#6698FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="2 10 9.34200028 4.26308294e-13 18.2813753 10 26 0"></polyline>\n        </g>\n    </g>\n</svg>'},{type:"ZONE_LINE",caption:"分区折线图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>分区折线图</title>\n    <g id="分区折线图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(5.000000, 7.000000)">\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="0.00226626184 8.71072137 26.0022663 8.78928548 25.9977337 10.2892786 -0.00226626184 10.2107145"></polygon>\n            <polyline id="路径-4" stroke="#6698FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="1 6.0115225 9.06435083 1.0115225 16.2813753 5 23.8500699 0"></polyline>\n            <polygon id="路径-6备份" fill="#73D897" fill-rule="nonzero" points="0.00226626184 21.7107214 26.0022663 21.7892855 25.9977337 23.2892786 -0.00226626184 23.2107145"></polygon>\n            <polyline id="路径-4" stroke="#6698FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="1 19.0115225 9.06435083 14.0115225 16.2813753 18 23.8500699 13"></polyline>\n        </g>\n    </g>\n</svg>'},{type:"AREA",caption:"面积图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>面积图</title>\n    <g id="面积图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="1" transform="translate(5.000000, 8.000000)">\n            <polygon id="路径-2" fill="#6698FF" opacity="0.3" points="0 5.54307808 0 20.7537988 25.4330802 20.7537988 25.4330802 -2.95217236e-14 17.4581603 4 7.99182318 1"></polygon>\n            <polyline id="路径-4" stroke="#6698FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="1.45816027 6 9.5754251 1.00958368 16.8398039 4.99041632 24.4581603 0"></polyline>\n        </g>\n    </g>\n</svg>'},{type:"GRID",caption:"表格",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>表格</title>\n    <g id="表格" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组-7" transform="translate(6.000000, 7.000000)">\n            <polygon id="矩形" fill="#6698FF" points="0 0 24 0 24 4.4 0 4.4"></polygon>\n            <rect id="矩形" fill="#A1CBFF" x="0" y="6.6" width="10.9090909" height="6.6"></rect>\n            <polygon id="矩形" fill="#CEE7FF" points="12.940979 6.6 23.8500699 6.6 23.8500699 8.8 12.940979 8.8"></polygon>\n            <polygon id="矩形" fill="#CEE7FF" points="12.940979 9.9 23.8500699 9.9 23.8500699 13.2 12.940979 13.2"></polygon>\n            <polygon id="矩形" fill="#CEE7FF" points="12.940979 15.4 23.8500699 15.4 23.8500699 17.6 12.940979 17.6"></polygon>\n            <polygon id="矩形" fill="#CEE7FF" points="12.940979 18.7 23.8500699 18.7 23.8500699 22 12.940979 22"></polygon>\n            <rect id="矩形" fill="#A1CBFF" x="0" y="15.4" width="10.9090909" height="6.6"></rect>\n        </g>\n    </g>\n</svg>'},{type:"CROSSTABLE",caption:"交叉表",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>交叉表</title>\n    <g id="交叉表" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组-7" transform="translate(6.000000, 7.000000)">\n            <polygon id="矩形" fill="#6698FF" points="10 0 24 0 24 4 10 4"></polygon>\n            <polygon id="矩形" fill="#73D897" points="0 0 8 0 8 4 0 4"></polygon>\n            <polygon id="矩形" fill="#A1CBFF" points="0 6 8 6 8 22 0 22"></polygon>\n            <polygon id="矩形" fill="#CEE7FF" points="10 6 24 6 24 22 10 22"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"PIE",caption:"饼图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>饼图</title>\n    <g id="饼图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" transform="translate(5.500000, 5.500000)">\n            <path d="M12.4991995,0 C5.62439962,0 0,5.62439962 0,12.5008005 C0,19.3756004 5.62439962,25 12.4991995,25 C19.3739994,25 25,19.3756004 25,12.5008005 L23.4357989,12.5008005 L12.4991995,12.5008005 L12.4991995,1.56260006 L12.4991995,0 Z" id="形状结合" fill="#6698FF"></path>\n            <path d="M14.3113139,1.73774039e-14 C14.2857143,0.446569002 14.2857143,10.7142857 14.2857143,10.7142857 C14.2857143,10.7142857 24.6330724,10.7142857 25,10.7092302 C24.6279525,4.96955467 20.1002367,0.446569002 14.3113139,1.73774039e-14" id="Fill-3" fill="#73D897"></path>\n        </g>\n    </g>\n</svg>'},{type:"RADAR",caption:"雷达图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>雷达图</title>\n    <g id="雷达图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组" transform="translate(2.000000, 2.000000)">\n            <polygon id="直线-6" fill="#E7E9EF" fill-rule="nonzero" points="17 1.82352941 17 30.1764706 15 30.1764706 15 1.82352941"></polygon>\n            <polygon id="直线-6" fill="#E7E9EF" fill-rule="nonzero" points="2.93652084 10.3420238 3.90940249 8.59459678 29.0634792 22.5991526 28.0905975 24.3465797"></polygon>\n            <polygon id="直线-6" fill="#E7E9EF" fill-rule="nonzero" points="28.0636231 8.58794213 29.0673438 10.3178395 4.87755337 24.3532343 3.87383271 22.623337"></polygon>\n            <path d="M16,0 L29.8564065,8 L29.8564065,24 L16,32 L2.14359354,24 L2.14359354,8 L16,0 Z M16,2.309 L4.143,9.155 L4.143,22.844 L16,29.69 L27.856,22.844 L27.856,9.155 L16,2.309 Z" id="多边形" fill="#D5DBE8" fill-rule="nonzero"></path>\n            <polygon id="路径-2" stroke="#6698FF" stroke-width="2" points="11.3546228 10.2353842 16.7477575 7.78749909 23.3257123 12.0160868 20.6419194 18.9280222 8.08095313 22.0474204"></polygon>\n            <polygon id="路径-6" stroke="#73D897" stroke-width="2" points="14.1432867 15.1736231 20.4984464 15.1736231 24.8525959 21.1110111 16.9848135 24.5853878"></polygon>\n        </g>\n    </g>\n</svg>'},{type:"GAUGE",caption:"仪表盘",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>仪表盘</title>\n    <g id="仪表盘" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组-3" transform="translate(2.545000, 4.545000)" fill-rule="nonzero">\n            <path d="M15.455,0 C23.9866074,0 30.91,6.83929667 30.91,15.2849471 C30.91,19.073914 29.5089944,22.6507734 27.0181092,25.4267311 C26.4814369,26.0248235 25.5615284,26.0746144 24.963436,25.5379421 C24.3653435,25.0012699 24.3155527,24.0813613 24.8522249,23.4832689 C26.8691825,21.235478 28,18.3484267 28,15.2849471 C28,8.45445974 22.3873656,2.91 15.455,2.91 C8.52263438,2.91 2.91,8.45445974 2.91,15.2849471 C2.91,18.0995868 3.86362095,20.7673275 5.59170383,22.932683 C6.09294927,23.5607631 5.99012943,24.4762624 5.36204927,24.9775078 C4.73396912,25.4787533 3.81846984,25.3759334 3.31722439,24.7478533 C1.18180528,22.0720896 0,18.7660065 0,15.2849471 C0,6.83929667 6.92339262,0 15.455,0 Z" id="路径" fill="#E7E9EF"></path>\n            <path d="M15.455,0 C19.6801543,0 23.6385369,1.68694318 26.5288532,4.62266937 C27.0926202,5.19529363 27.0854399,6.1165207 26.5128156,6.68028761 C25.9401913,7.24405452 25.0189643,7.23687422 24.4551974,6.66424996 C22.1073205,4.27948561 18.8938466,2.91 15.455,2.91 C8.52263438,2.91 2.91,8.45445974 2.91,15.2849471 C2.91,18.0995868 3.86362095,20.7673275 5.59170383,22.932683 C6.09294927,23.5607631 5.99012943,24.4762624 5.36204927,24.9775078 C4.73396912,25.4787533 3.81846984,25.3759334 3.31722439,24.7478533 C1.18180528,22.0720896 0,18.7660065 0,15.2849471 C0,6.83929667 6.92339262,0 15.455,0 Z" id="路径" fill="#6698FF"></path>\n            <g id="64%" transform="translate(5.835000, 11.539000)" fill="#6698FF">\n                <path d="M2.565,0 C1.7765,0 1.1495,0.342 0.6935,1.026 C0.228,1.71 0,2.603 0,3.7145 C0,4.75 0.209,5.5575 0.646,6.1465 C1.083,6.745 1.7195,7.049 2.5555,7.049 C3.23,7.049 3.8,6.821 4.256,6.384 C4.712,5.947 4.9495,5.3865 4.9495,4.7025 C4.9495,4.0375 4.75,3.4865 4.351,3.059 C3.952,2.6315 3.42,2.4225 2.755,2.4225 C2.413,2.4225 2.109,2.4795 1.843,2.6125 C1.558,2.7455 1.3205,2.945 1.1305,3.23 L1.083,3.23 L1.083,3.1445 C1.083,2.5175 1.2065,1.995 1.4725,1.577 C1.7385,1.1305 2.0995,0.912 2.5555,0.912 C3.2015,0.912 3.6005,1.2255 3.7335,1.8525 L4.8165,1.8525 C4.6455,0.6175 3.895,0 2.565,0 Z M2.5175,3.325 C2.926,3.325 3.249,3.4485 3.496,3.705 C3.724,3.952 3.8475,4.2845 3.8475,4.7025 C3.8475,5.1205 3.724,5.4625 3.477,5.7285 C3.23,5.9945 2.9165,6.1275 2.5175,6.1275 C2.128,6.1275 1.8145,6.004 1.5675,5.757 C1.3205,5.51 1.197,5.168 1.197,4.7405 C1.197,4.3035 1.311,3.952 1.5485,3.705 C1.7765,3.4485 2.0995,3.325 2.5175,3.325 Z" id="形状"></path>\n                <path d="M8.816,0.133 L5.5005,4.408 L5.5005,5.4625 L8.778,5.4625 L8.778,6.916 L9.8325,6.916 L9.8325,5.4625 L10.8395,5.4625 L10.8395,4.579 L9.8325,4.579 L9.8325,0.133 L8.816,0.133 Z M8.7495,1.539 L8.778,1.539 L8.778,4.579 L6.403,4.579 L8.7495,1.539 Z" id="形状"></path>\n                <path d="M18.2115,3.2015 C17.6795,3.2015 17.2615,3.382 16.9765,3.762 C16.7105,4.085 16.587,4.522 16.587,5.0635 C16.587,5.5955 16.7105,6.023 16.9765,6.365 C17.2615,6.726 17.6795,6.916 18.2115,6.916 C18.7435,6.916 19.152,6.726 19.437,6.365 C19.684,6.0325 19.817,5.5955 19.817,5.0635 C19.817,4.522 19.684,4.085 19.437,3.762 C19.152,3.382 18.7435,3.2015 18.2115,3.2015 Z M17.2425,0 L13.433,7.049 L14.2595,7.049 L18.069,0 L17.2425,0 Z M13.3095,0.133 C12.7775,0.133 12.3595,0.3135 12.0745,0.6935 C11.8085,1.0165 11.685,1.4535 11.685,1.995 C11.685,2.527 11.8085,2.9545 12.0745,3.2965 C12.3595,3.6575 12.7775,3.8475 13.3095,3.8475 C13.8415,3.8475 14.25,3.6575 14.535,3.2965 C14.782,2.964 14.915,2.527 14.915,1.995 C14.915,1.4535 14.782,1.0165 14.535,0.6935 C14.25,0.3135 13.8415,0.133 13.3095,0.133 Z M18.2115,3.895 C18.4395,3.895 18.601,4.0185 18.696,4.275 C18.772,4.465 18.81,4.7215 18.81,5.0635 C18.81,5.3865 18.772,5.643 18.7055,5.833 C18.601,6.0895 18.4395,6.2225 18.2115,6.2225 C17.974,6.2225 17.803,6.099 17.708,5.852 C17.632,5.662 17.594,5.396 17.594,5.0635 C17.594,4.7215 17.632,4.4555 17.708,4.2655 C17.803,4.0185 17.974,3.895 18.2115,3.895 Z M13.3095,0.8265 C13.5375,0.8265 13.699,0.95 13.794,1.2065 C13.87,1.3965 13.908,1.653 13.908,1.995 C13.908,2.318 13.87,2.5745 13.8035,2.7645 C13.699,3.021 13.5375,3.154 13.3095,3.154 C13.072,3.154 12.901,3.0305 12.806,2.7835 C12.73,2.5935 12.692,2.3275 12.692,1.995 C12.692,1.653 12.73,1.387 12.806,1.197 C12.901,0.95 13.072,0.8265 13.3095,0.8265 Z" id="形状"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},{type:"SCATTER",caption:"散点图",icon:'<svg width="36px" height="36px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>散点图</title>\n    <g id="散点图" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编组-4" transform="translate(6.000000, 7.000000)">\n            <circle id="椭圆形" fill="#6698FF" cx="21.5" cy="2.5" r="2.5"></circle>\n            <circle id="椭圆形备份" fill="#73D897" cx="15.5" cy="6.5" r="2.5"></circle>\n            <circle id="椭圆形备份-2" fill="#6698FF" cx="7.5" cy="7.5" r="2.5"></circle>\n            <circle id="椭圆形备份-3" fill="#73D897" cx="8.5" cy="15.5" r="2.5"></circle>\n            <circle id="椭圆形备份-4" fill="#6698FF" cx="17.5" cy="14.5" r="2.5"></circle>\n            <circle id="椭圆形备份-5" fill="#6698FF" cx="2.5" cy="19.5" r="2.5"></circle>\n        </g>\n    </g>\n</svg>'}],at=function(e){return e.FILTERMODE="extend.filterMode",e.PQLVALUE="extend.pqlValue",e.AGGMODE="extend.aggmode",e.PERIOD="extend.period",e.SORT="extend.sort",e.AXIS="extend.axis",e.CORDON="extend.cordon",e}(at||{});function nt(e){switch(e){case"NUMBER":return{chartConfig:pe,chartDefaultValue:ue};case"GAUGE":return{chartConfig:he,chartModel:fe,chartDefaultValue:me};case"MULTI_SERIES_COL":return{chartConfig:ve,chartModel:ye,chartDefaultValue:ge};case"STACK_COL":return{chartConfig:we,chartModel:be,chartDefaultValue:Ie};case"ZONE_COL":return{chartConfig:Ce,chartModel:xe,chartDefaultValue:Te};case"MULTI_SERIES_BAR":return{chartConfig:Se,chartModel:Ee,chartDefaultValue:De};case"STACK_BAR":return{chartConfig:Ae,chartModel:Oe,chartDefaultValue:Me};case"MULTI_SERIES_LINE":return{chartConfig:Re,chartModel:Le,chartDefaultValue:ke};case"ZONE_LINE":return{chartConfig:Ne,chartModel:Fe,chartDefaultValue:Pe};case"AREA":return{chartConfig:ze,chartModel:Be,chartDefaultValue:Ge};case"GRID":return{chartConfig:Ve,chartModel:je,chartDefaultValue:Ue};case"CROSSTABLE":return{chartConfig:_e,chartModel:He,chartDefaultValue:qe};case"PIE":return{chartConfig:Xe,chartModel:Je,chartDefaultValue:We};case"RADAR":return{chartConfig:Ke,chartModel:Ye,chartDefaultValue:$e};case"SCATTER":return{chartConfig:Ze,chartModel:et,chartDefaultValue:Qe};default:throw new z("传入类型".concat(e,"未识别"))}}var it=g({name:"BIChartTypes",props:{chartType:{type:String,default:"NUMBER"}},emits:["select"],setup:function(e,t){var a=t.emit,n=s("chart-types"),i=x([]),r=x("");E((function(){return e.chartType}),(function(e){r.value=e}),{immediate:!0}),S((function(){i.value=tt}));return{ns:n,items:i,select:r,onSelect:function(e){a("select",e)}}},render:function(){var e=this;return T("div",{class:this.ns.b()},[this.items.map((function(t){return T(O("el-tooltip"),{effect:"dark",content:t.caption,placement:"top","show-after":200,"hide-after":0,"popper-class":e.ns.e("tooltip"),"show-arrow":!0},{default:function(){return T("div",{class:[e.ns.e("item"),e.ns.is("selected",e.select===t.type)],onClick:function(){return e.onSelect(t)},innerHTML:t.icon},null)}})}))])}}),rt=g({name:"BICollapseItem",props:{label:{type:String,required:!0},enableShowEmptyData:{type:Boolean,required:!1,default:!0},enableRemove:{type:Boolean,required:!1,default:!0},enableEditMode:{type:Boolean,required:!1,default:!0},enableSwitch:{type:Boolean,required:!1,default:!0},switchValue:{type:Boolean,required:!1,default:!0},name:{type:[String,Number],required:!0},required:{type:Boolean,default:!1},editMode:{type:String}},emits:["switchChange","svgClick"],setup:function(e,t){var a=t.emit;return{ns:s("collapse-item"),visible:x(!1),showEmptyDataSvg:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"apm1.Base基础/1.icon图标/2.normal/more-vertical","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M8 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm0 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm0 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5z",id:"apm形状结合"},null)])])},editModeSvg:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"akn1.Base基础/1.icon图标/2.normal/filter备份","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M1.6 2h12.8a.6.6 0 0 1 0 1.2H1.6a.6.6 0 1 1 0-1.2zm2.5 5.393h7.8a.6.6 0 0 1 0 1.2H4.1a.6.6 0 1 1 0-1.2zm2.5 5.416h2.8a.6.6 0 0 1 0 1.2H6.6a.6.6 0 1 1 0-1.2z",id:"akn形状结合"},null)])])},removeSvg:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"aweaction/sweep","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M11.6 14.8h2.7v-4.7H1.7v4.7h2.7v-2.9h1.2v2.9h1.8v-3.9h1.2v3.9h1.8v-2.9h1.2v2.9zm2.7-5.9V6.2h-5v-5H6.7v5h-5v2.7h12.6zM5.5 5V1a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v4h4a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1h-13a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h4z",id:"awe形状结合"},null)])])},checkSvg:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M6.012 11.201L1.313 6.832l-.817.879 5.54 5.15 9.304-9.163-.842-.855z"},null)])])},ClickSvg:function(e,t,n){a("svgClick",{event:e,mode:t,value:n})},switchChange:function(){a("switchChange",!e.switchValue)}}},render:function(){var e=this;return T("div",{class:this.ns.b()},[T(O("el-collapse-item"),{name:this.name,class:this.ns.e("item-content")},{default:function(){var t,a;return null===(t=(a=e.$slots).default)||void 0===t?void 0:t.call(a)},title:function(){return T("div",{class:e.ns.e("item")},[T("div",{class:[e.ns.e("item-title"),e.ns.is("required",e.required)]},[e.label]),T("div",{class:e.ns.e("item-wrapper")},[e.enableShowEmptyData?T("div",{class:[e.ns.e("item-showEmptyData"),e.ns.e("item-div")],onClick:function(t){t.stopPropagation(),e.ClickSvg(t,"showEmptyData")}},[e.showEmptyDataSvg()]):null,e.enableEditMode?T(O("el-tooltip"),{effect:"dark",content:"切换编辑模式",placement:"top","popper-class":e.ns.e("tooltip")},{default:function(){return[T("div",{class:[e.ns.e("item-editMode"),e.ns.e("item-div")],onClick:function(t){t.stopPropagation(),e.visible=!0}},[T(O("el-popover"),{visible:e.visible,"onUpdate:visible":function(t){return e.visible=t},placement:"bottom-start","popper-class":e.ns.b("editMode-popover"),"show-arrow":!1,width:240,trigger:"click"},{reference:function(){return e.editModeSvg()},default:function(){return T("div",{class:e.ns.b("editMode-popover-content")},[T("div",{class:e.ns.b("editMode-popover-item"),onClick:function(t){t.stopPropagation(),e.visible=!1,e.ClickSvg(t,"editMode","default")}},[T("div",{class:e.ns.be("editMode-popover-item","text")},[A("基本")]),"pql"!==e.editMode&&e.checkSvg()]),T("div",{class:e.ns.b("editMode-popover-item"),onClick:function(t){t.stopPropagation(),e.visible=!1,e.ClickSvg(t,"editMode","pql")}},[T("div",{class:e.ns.be("editMode-popover-item","text")},[A("PQL")]),"pql"===e.editMode&&e.checkSvg()])])}})])]}}):null,e.enableRemove?T(O("el-tooltip"),{effect:"dark",content:"清空",placement:"top","popper-class":e.ns.e("tooltip")},{default:function(){return[T("div",{class:[e.ns.e("item-remove"),e.ns.e("item-div")],onClick:function(t){t.stopPropagation(),e.ClickSvg(t,"remove")}},[e.removeSvg()])]}}):null,e.enableSwitch?T("div",{class:[e.ns.e("item-switch")]},[T(O("el-switch"),{"model-value":e.switchValue,onChange:e.switchChange,onClick:function(e){e.stopPropagation()}},null)]):null])])}})])}});var ot=function(){function e(){f(this,e),this.map=new Map,this.maxListeners=100}var t;return v(e,[{key:"setMaxListeners",value:function(e){this.maxListeners=e}},{key:"getSize",value:function(e){return this.map.has(e)?this.map.get(e).length:0}},{key:"addListener",value:function(e,t){if(t instanceof Function){this.map.has(e)||this.map.set(e,[]);var a=this.map.get(e);if(!(a.length<this.maxListeners))throw new Error("事件监听已达最大上限[".concat(this.maxListeners,"]，无法新增监听!"));a.push(t)}}},{key:"removeListener",value:function(e,t){if(this.map.has(e)){var a=this.map.get(e);if(a.length>0)for(var n=0;n<a.length;n++){if(a[n]===t){a.splice(n,1);break}}}}},{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];this.map.has(e)&&this.map.get(e).forEach((function(e){e.apply(void 0,a)}))}},{key:"asyncEmit",value:(t=b(y().mark((function e(t){var a,n,i,r,o,s=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=s.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=s[i];if(!this.map.has(t)){e.next=5;break}return r=this.map.get(t),o=r.map((function(e){return e.apply(void 0,n)})),e.abrupt("return",Promise.all(o));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.map.forEach((function(e){!function(e){if(e instanceof Array)e&&e.length>0&&e.splice(0,e.length);else if(e instanceof Object&&e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]}(e)})),this.map.clear()}}]),e}(),st=function(){function e(t){f(this,e),this.e=new ot,this.e.setMaxListeners(t||300)}return v(e,[{key:"getSize",value:function(e){return this.e.getSize(e)}},{key:"on",value:function(e,t){this.e.addListener(e,t)}},{key:"off",value:function(e,t){this.e.removeListener(e,t)}},{key:"emit",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];(t=this.e).emit.apply(t,[e].concat(n))}},{key:"asyncEmit",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(t=this.e).asyncEmit.apply(t,[e].concat(n))}},{key:"reset",value:function(){this.e.reset()}}]),e}(),lt=Object.prototype.toString;var ct={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Set]":"set","[object Map]":"map","[object WeakMap]":"weakmap"};function dt(e){return ct[lt.call(e)]}function pt(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function ut(){return"".concat(pt()+pt(),"-").concat(pt(),"-").concat(pt(),"-").concat(pt(),"-").concat(pt()).concat(pt()).concat(pt())}function ht(e){if("array"===dt(e)||function(e){return"string"===dt(e)}(e))return 0===e.length;if(function(e){return"object"===dt(e)}(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return function(e){return"map"===dt(e)}(e)||function(e){return"set"===dt(e)}(e)?0===e.size:null==e}var ft=g({name:"BIColorScheme",props:{colorList:{type:Array},editorStyle:{type:String,default:"ITEM"},value:{type:Object,default:function(){}}},emits:{change:function(e){return!0}},setup:function(e,t){var a=t.emit,n=s("color-scheme"),i=[{text:"系统配色",value:"default"},{text:"模板配色",value:"template"}],r=x(i[0].value),o=[{text:"简约蓝",value:"ITEM"===e.editorStyle?"#6698FF":["#6698FF","#73DEB3","#7585A2","#F7BE21","#EE734A","#83D0EE"]},{text:"秋日橙",value:"ITEM"===e.editorStyle?"#EE734A":["#EE734A","#7585A2","#FEC103","#9EB411","#CD8050","#DAD5B5"]},{text:"马卡龙",value:"ITEM"===e.editorStyle?"#467CE6":["#467CE6","#CD74CA","#4997CC","#BCBFE3","#666CEB","#82BC9A"]},{text:"薄荷绿",value:"ITEM"===e.editorStyle?"#118299":["#118299","#13B3B3","#73DEB3","#FEC103","#9EB411","#83D0EE"]}];e.colorList&&e.colorList.length&&(o=e.colorList),o=o.map((function(e){return I(I({},e),{},{key:ut()})}));var l=x(o[0].key),c=x(o[0].value);return E((function(){return e.value}),(function(e){if(!e)return l.value=o[0].key,void(c.value=o[0].value);var t=e.colorScheme,a=e.color;if(r.value=t,"default"===t)return l.value=o[0].key,void(c.value=o[0].value);if("string"==typeof a){var n=o.find((function(e){return e.value===a}));n&&(l.value=n.key,c.value=n.value)}else{var i=o.find((function(e){return JSON.stringify(e.value)===JSON.stringify(a)}));i&&(l.value=i.key,c.value=i.value)}}),{immediate:!0}),{ns:n,schemes:i,currentScheme:r,templateColorList:o,currentColorKey:l,currentColor:c,handleSchemeChange:function(){var e=r.value;"default"===e&&a("change",{colorScheme:"default",color:o[0].value}),"template"===e&&(l.value=o[0].key,c.value=o[0].value,a("change",{colorScheme:"template",color:c.value}))},handleTemplateColorChange:function(){var e=o.find((function(e){return e.key===l.value}));e&&(c.value=e.value,a("change",{colorScheme:r.value,color:c.value}))}}},render:function(){var e,t,a=this;return T("div",{class:this.ns.b()},[T("div",{class:this.ns.b("content")},[T(O("el-select"),{class:this.ns.b("picker"),"popper-class":this.ns.b("popper"),modelValue:this.currentScheme,"onUpdate:modelValue":function(e){return a.currentScheme=e},onChange:this.handleSchemeChange},(t=e=this.schemes.map((function(e){return T(O("el-option"),{key:e.value,label:e.text,value:e.value},null)})),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!M(t)?e:{default:function(){return[e]}})),"template"===this.currentScheme&&T(O("el-select"),{class:this.ns.b("template-color-picker"),"popper-class":this.ns.b("popper"),modelValue:this.currentColorKey,"onUpdate:modelValue":function(e){return a.currentColorKey=e},onChange:this.handleTemplateColorChange},{default:function(){return a.templateColorList.map((function(e){return T(O("el-option"),{key:e.key,label:e.text,value:e.key},{default:function(){return[T("div",{class:a.ns.b("template-color-picker-option")},[Array.isArray(e.value)?e.value.map((function(e){return T("div",{class:a.ns.be("template-color-picker","icon"),style:{background:e}},null)})):T("div",{class:a.ns.be("template-color-picker","icon"),style:{background:e.value}},null),T("div",{class:a.ns.be("template-color-picker","text")},[e.text])])]}})}))},prefix:function(){return Array.isArray(a.currentColor)?a.currentColor.map((function(e){return T("div",{class:a.ns.be("template-color-picker","icon"),style:{background:e}},null)})):T("div",{class:a.ns.be("template-color-picker","icon"),style:{background:a.currentColor}},null)}})])])}});function mt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!M(e)}var vt=g({name:"BIFontBorderSelect",props:{disabled:{type:Boolean},mode:{type:String,default:"FONT"},value:{type:Object,default:function(){}},fontMax:{type:Number,default:48},fontMin:{type:Number,default:12},borderMax:{type:Number,default:10},borderMin:{type:Number,default:1},useDotted:{type:Boolean,default:!1}},emits:["change"],setup:function(e,t){var a=t.emit,n=s("font-border-select"),i=x(""),r=x(""),o=x(!1),l=x(12),c=x(!1);E((function(){return e.value}),(function(t){if(!c.value&&t){var a=t.fontWeight,n=t.fontStyle,o=t.fontSize,s=t.color,d=t.borderSize,p=t.borderStyle;"FONT"===e.mode?(r.value=("italic"===n?n:a)||"",l.value=o,i.value=s):(r.value=p,l.value=d,i.value=s)}}),{immediate:!0,deep:!0});var d=function(){var t=l.value,n=t;"FONT"===e.mode?((t>=e.fontMin||t<=e.fontMax)&&(n=t),t<e.fontMin&&(n=e.fontMin),t>e.fontMax&&(n=e.fontMax)):((t>=e.borderMin||t<=e.borderMax)&&(n=t),t<e.borderMin&&(n=e.borderMin),t>e.borderMax&&(n=e.borderMax)),a("change",{fontSize:n,fontWeight:"italic"!==r.value?r.value:"normal",fontStyle:"italic"===r.value?"italic":"normal",borderSize:n,borderStyle:"solid"===r.value?"solid":"dashed"===r.value?"dashed":"doubleDashed"===r.value?"doubleDashed":"dotted"===r.value?"dotted":"solid",color:i.value})},p=w({get:function(){return"".concat(l.value.toString()," px")},set:function(e){var t=parseInt(e,10);Number.isNaN(t)?l.value=0:l.value=t,d()}}),u=x(["#000000","#2C2C2C","#50555C","#ACB3BF","#D0D3D9","#C4C4C4","#DADADA","#E5E5E5","#F0F0F0","#F24E1E","#E99C58","#FFC700","#FF4D00","#FF00D6","#D82E57","#8E1DE8","#0ACF83","#18A0FB","#A259FF","#907CFF"]);return{ns:n,fontItem:[{value:"normal",label:"常规"},{value:"bold",label:"加粗"},{value:"italic",label:"斜体"}],borderItem:[{value:"solid",label:"normalBorder"},{value:"dashed",label:"dashed"},{value:"doubleDashed",label:"doubleDashed"},{value:"dotted",label:"dotted"}],normalBorder:function(){return T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3",style:"font-family: Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif; font-size: 12px;"},[T("desc",null,[A("Line Type")]),T("defs",null,null),T("path",{fill:"none",d:"M 0 0 L 150 0","stroke-width":"3",stroke:"#cacaca","stroke-dasharray":"none"},null)])},dashed:function(){return T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3",style:"font-family: Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif; font-size: 12px;"},[T("desc",null,[A("Line Type")]),T("defs",null,null),T("path",{fill:"none",d:"M 0 0 L 150 0","stroke-width":"3",stroke:"#cacaca","stroke-dasharray":"8,6"},null)])},doubleDashed:function(){return T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3",style:"font-family: Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif; font-size: 12px;"},[T("desc",null,[A("Line Type")]),T("defs",null,null),T("path",{fill:"none",d:"M 0 0 L 150 0","stroke-width":"3",stroke:"#cacaca","stroke-dasharray":"16,6"},null)])},dotted:function(){return T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3",style:"font-family: Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif; font-size: 12px;"},[T("desc",null,[A("Line Type")]),T("defs",null,null),T("path",{fill:"none",d:"M 0 0 L 150 0","stroke-width":"3",stroke:"#cacaca","stroke-dasharray":"2,6"},null)])},selectValue:r,number:l,numberPx:p,addNumber:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"abdnavigation/angle-up","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z",id:"abd形状结合",transform:"rotate(180 7.978 8.252)"},null)])])},minusNumber:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"aaynavigation/angle-down","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.997l-.005.006L2.3 6.33l.83-.831 4.848 4.848L12.826 5.5l.83.83-5.673 5.673-.005-.006z",id:"aay形状结合"},null)])])},handleColNumberChange:function(t){var a;c.value=!1;var n=null===(a=t.target)||void 0===a?void 0:a.value,i=parseInt(n,10);"FONT"===e.mode?((i>=e.fontMin||i<=e.fontMax)&&(l.value=i),i<e.fontMin&&(l.value=e.fontMin),i>e.fontMax&&(l.value=e.fontMax)):((i>=e.borderMin||i<=e.borderMax)&&(l.value=i),i<e.borderMin&&(l.value=e.borderMin),i>e.borderMax&&(l.value=e.borderMax)),d()},changeNumber:function(t){"add"===t?(l.value+=1,"FONT"===e.mode?l.value>e.fontMax&&(l.value=e.fontMax):l.value>e.borderMax&&(l.value=e.borderMax)):"minus"===t&&(l.value-=1,"FONT"===e.mode?l.value<e.fontMin&&(l.value=e.fontMin):l.value<e.borderMin&&(l.value=e.borderMin)),d()},currentColor:i,selectChange:function(){d()},colorChange:function(){d()},predefineColors:u,onDropDownClick:function(e){r.value=e.value,d()},arrowSvg:function(){return T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[T("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null)])},dropDownVisible:function(e){o.value=e},isVisible:o,isFocus:c}},render:function(){var e,t=this;return T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("bottom-content")},["FONT"===this.mode?T(O("el-select"),{modelValue:this.selectValue,"onUpdate:modelValue":function(e){return t.selectValue=e},size:"large",style:"width: 95px",onChange:this.selectChange,disabled:this.disabled,"popper-class":this.ns.e("select-popper")},mt(e=this.fontItem.map((function(e){return T(O("el-option"),{key:e.value,label:e.label,value:e.value},null)})))?e:{default:function(){return[e]}}):T(O("el-dropdown"),{class:[this.ns.e("dropdown")],disabled:this.disabled,"popper-class":this.ns.e("dropdown-popper"),onVisibleChange:function(e){t.dropDownVisible(e)}},{default:function(){return T("div",{class:[t.ns.e("dropdown-input"),t.isVisible?"visible":""]},[""===t.selectValue&&T("div",{class:[t.ns.e("dropdown-input-content")]},[A("请选择")]),"solid"===t.selectValue&&T("div",{class:[t.ns.e("dropdown-input-content")]},[t.normalBorder()]),"dashed"===t.selectValue&&T("div",{class:[t.ns.e("dropdown-input-content")]},[t.dashed()]),"doubleDashed"===t.selectValue&&T("div",{class:[t.ns.e("dropdown-input-content")]},[t.doubleDashed()]),"dotted"===t.selectValue&&t.useDotted&&T("div",{class:[t.ns.e("dropdown-input-content")]},[t.dotted()]),t.arrowSvg()])},dropdown:function(){var e;return T(O("el-dropdown-menu"),null,mt(e=t.borderItem.map((function(e){return T(O("el-dropdown-item"),{class:[t.ns.e("dropdown-item")],onClick:function(){return t.onDropDownClick(e)}},{default:function(){return"normalBorder"===e.label?t.normalBorder():"dashed"===e.label?t.dashed():"doubleDashed"===e.label?t.doubleDashed():"dotted"===e.label?t.dotted():void 0}})})))?e:{default:function(){return[e]}})}}),T(O("el-input"),{class:this.ns.e("input-number"),modelValue:this.numberPx,"onUpdate:modelValue":function(e){return t.numberPx=e},size:"large",onBlur:this.handleColNumberChange,onFocus:function(){t.isFocus=!0},disabled:this.disabled},{suffix:function(){return T("div",{class:[t.ns.e("input-number-suffix")]},[T("span",{class:[t.ns.e("input-number-suffix-add"),t.number===("FONT"===t.mode?t.fontMax:t.borderMax)?"readonly":""],onClick:function(){return t.changeNumber("add")}},[t.addNumber()]),T("span",{class:[t.ns.e("input-number-suffix-minus"),t.number===("FONT"===t.mode?t.fontMin:t.borderMin)?"readonly":""],onClick:function(){return t.changeNumber("minus")}},[t.minusNumber()])])}}),T(O("el-color-picker"),{modelValue:this.currentColor,"onUpdate:modelValue":function(e){return t.currentColor=e},disabled:this.disabled,size:"large",predefine:this.predefineColors,onChange:this.colorChange,"show-alpha":!0},null)])])}}),yt=[{value:"left-top",caption:"左上",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="p1.Base基础/1.icon图标/2.normal/top-left" stroke-width="1" fill-rule="evenodd"><path d="M13.977235,4.25342758 C14.5301173,4.25342758 14.978317,4.70114283 14.978317,5.25342758 L14.978317,14.0037895 C14.978317,14.5560742 14.5301173,15.0037895 13.977235,15.0037895 L2.07107951,15.0037895 C1.51819714,15.0037895 1.06999742,14.5560742 1.06999742,14.0037895 L1.06999742,5.25342758 C1.06999742,4.70114283 1.51819714,4.25342758 2.07107951,4.25342758 L13.977235,4.25342758 Z M13.7770185,5.45342758 L2.27129593,5.45342758 L2.27129593,13.8037895 L13.7770185,13.8037895 L13.7770185,5.45342758 Z M10.9897465,7.1 L11.9369524,7.83675029 L10.0780935,10.2265995 L7.045,10.2263751 L5.43000734,11.8868171 L4.56999266,11.0499332 L6.53890733,9.02659948 L9.491,9.02637515 L10.9897465,7.1 Z M6.39170146,1.03175939 L6.39170146,2.23175939 L1.4,2.23175939 L1.4,1.03175939 L6.39170146,1.03175939 Z" id="p形状结合"></path></g></svg>'},{value:"top",caption:"正上",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="m1.Base基础/1.icon图标/2.normal/top--middle" stroke-width="1" fill-rule="evenodd"><path d="M13.977235,4.25342758 C14.5301173,4.25342758 14.978317,4.70114283 14.978317,5.25342758 L14.978317,14.0037895 C14.978317,14.5560742 14.5301173,15.0037895 13.977235,15.0037895 L2.07107951,15.0037895 C1.51819714,15.0037895 1.06999742,14.5560742 1.06999742,14.0037895 L1.06999742,5.25342758 C1.06999742,4.70114283 1.51819714,4.25342758 2.07107951,4.25342758 L13.977235,4.25342758 Z M13.7770185,5.45342758 L2.27129593,5.45342758 L2.27129593,13.8037895 L13.7770185,13.8037895 L13.7770185,5.45342758 Z M10.9897465,7.1 L11.9369524,7.83675029 L10.0780935,10.2265995 L7.045,10.2263751 L5.43000734,11.8868171 L4.56999266,11.0499332 L6.53890733,9.02659948 L9.491,9.02637515 L10.9897465,7.1 Z M10.3917015,1.03175939 L10.3917015,2.23175939 L5.4,2.23175939 L5.4,1.03175939 L10.3917015,1.03175939 Z" id="m形状结合"></path></g></svg>'},{value:"right-top",caption:"右上",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="s1.Base基础/1.icon图标/2.normal/top-right" stroke-width="1" fill-rule="evenodd"><path d="M13.977235,4.25342758 C14.5301173,4.25342758 14.978317,4.70114283 14.978317,5.25342758 L14.978317,14.0037895 C14.978317,14.5560742 14.5301173,15.0037895 13.977235,15.0037895 L2.07107951,15.0037895 C1.51819714,15.0037895 1.06999742,14.5560742 1.06999742,14.0037895 L1.06999742,5.25342758 C1.06999742,4.70114283 1.51819714,4.25342758 2.07107951,4.25342758 L13.977235,4.25342758 Z M13.7770185,5.45342758 L2.27129593,5.45342758 L2.27129593,13.8037895 L13.7770185,13.8037895 L13.7770185,5.45342758 Z M10.9897465,7.1 L11.9369524,7.83675029 L10.0780935,10.2265995 L7.045,10.2263751 L5.43000734,11.8868171 L4.56999266,11.0499332 L6.53890733,9.02659948 L9.491,9.02637515 L10.9897465,7.1 Z M15.0030547,1.03175939 L15.0030547,2.23175939 L10.0113532,2.23175939 L10.0113532,1.03175939 L15.0030547,1.03175939 Z" id="s形状结合"></path></g></svg>'},{value:"left-bottom",caption:"左下",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="n1.Base基础/1.icon图标/2.normal/down-left" stroke-width="1" fill-rule="evenodd"><path d="M13.9621493,1.03175939 C14.5150317,1.03175939 14.9632314,1.47947464 14.9632314,2.03175939 L14.9632314,10.7821213 C14.9632314,11.334406 14.5150317,11.7821213 13.9621493,11.7821213 L2.05599385,11.7821213 C1.50311148,11.7821213 1.05491176,11.334406 1.05491176,10.7821213 L1.05491176,2.03175939 C1.05491176,1.47947464 1.50311148,1.03175939 2.05599385,1.03175939 L13.9621493,1.03175939 Z M13.7619329,2.23175939 L2.25621027,2.23175939 L2.25621027,10.5821213 L13.7619329,10.5821213 L13.7619329,2.23175939 Z M10.9746608,3.87833181 L11.9218667,4.6150821 L10.0630078,7.00493129 L7.02991434,7.00470696 L5.41492168,8.66514894 L4.55490701,7.82826498 L6.52382168,5.80493129 L9.47591434,5.80470696 L10.9746608,3.87833181 Z M6,13.8037895 L6,15.0037895 L1,15.0037895 L1,13.8037895 L6,13.8037895 Z" id="n形状结合"></path></g></svg>'},{value:"bottom",caption:"正下",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="l1.Base基础/1.icon图标/2.normal/down-middle" stroke-width="1" fill-rule="evenodd"><path d="M13.9621493,1.03175939 C14.5150317,1.03175939 14.9632314,1.47947464 14.9632314,2.03175939 L14.9632314,10.7821213 C14.9632314,11.334406 14.5150317,11.7821213 13.9621493,11.7821213 L2.05599385,11.7821213 C1.50311148,11.7821213 1.05491176,11.334406 1.05491176,10.7821213 L1.05491176,2.03175939 C1.05491176,1.47947464 1.50311148,1.03175939 2.05599385,1.03175939 L13.9621493,1.03175939 Z M13.7619329,2.23175939 L2.25621027,2.23175939 L2.25621027,10.5821213 L13.7619329,10.5821213 L13.7619329,2.23175939 Z M10.9746608,3.87833181 L11.9218667,4.6150821 L10.0630078,7.00493129 L7.02991434,7.00470696 L5.41492168,8.66514894 L4.55490701,7.82826498 L6.52382168,5.80493129 L9.47591434,5.80470696 L10.9746608,3.87833181 Z M10.3619415,13.8037895 L10.3619415,15.0037895 L5.37024,15.0037895 L5.37024,13.8037895 L10.3619415,13.8037895 Z" id="l形状结合"></path></g></svg>'},{value:"right-bottom",caption:"右下",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="q1.Base基础/1.icon图标/2.normal/down-right" stroke-width="1" fill-rule="evenodd"><path d="M13.9621493,1.03175939 C14.5150317,1.03175939 14.9632314,1.47947464 14.9632314,2.03175939 L14.9632314,10.7821213 C14.9632314,11.334406 14.5150317,11.7821213 13.9621493,11.7821213 L2.05599385,11.7821213 C1.50311148,11.7821213 1.05491176,11.334406 1.05491176,10.7821213 L1.05491176,2.03175939 C1.05491176,1.47947464 1.50311148,1.03175939 2.05599385,1.03175939 L13.9621493,1.03175939 Z M13.7619329,2.23175939 L2.25621027,2.23175939 L2.25621027,10.5821213 L13.7619329,10.5821213 L13.7619329,2.23175939 Z M10.9746608,3.87833181 L11.9218667,4.6150821 L10.0630078,7.00493129 L7.02991434,7.00470696 L5.41492168,8.66514894 L4.55490701,7.82826498 L6.52382168,5.80493129 L9.47591434,5.80470696 L10.9746608,3.87833181 Z M15,13.8037895 L15,15.0037895 L10,15.0037895 L10,13.8037895 L15,13.8037895 Z" id="q形状结合"></path></g></svg>'},{value:"left",caption:"正左",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="o1.Base基础/1.icon图标/2.normal/left-Legend" stroke-width="1" fill-rule="evenodd"><path d="M12.9805336,1.0501437 C13.533416,1.0501437 13.9816157,1.49785895 13.9816157,2.0501437 L13.9816157,10.8005056 C13.9816157,11.3527904 13.533416,11.8005056 12.9805336,11.8005056 L1.07437816,11.8005056 C0.521495788,11.8005056 0.0732960683,11.3527904 0.0732960683,10.8005056 L0.0732960683,2.0501437 C0.0732960683,1.49785895 0.521495788,1.0501437 1.07437816,1.0501437 L12.9805336,1.0501437 Z M12.7803172,2.2501437 L1.27459458,2.2501437 L1.27459458,10.6005056 L12.7803172,10.6005056 L12.7803172,2.2501437 Z M8.52746497,2.89772989 L9.36434893,3.75774457 L8.06378941,5.08165217 L8.06401374,8.11474565 L5.95999535,9.74124007 L5.22324506,8.79403417 L6.86378941,7.52765217 L6.86401374,4.57555951 L8.52746497,2.89772989 Z M10.0183843,13.8221738 L10.0183843,15.0221738 L5.01838431,15.0221738 L5.01838431,13.8221738 L10.0183843,13.8221738 Z" id="o形状结合" transform="translate(7.027456, 8.036159) scale(-1, 1) rotate(-90.000000) translate(-7.027456, -8.036159)"></path></g></svg>'},{value:"right",caption:"正右",icon:'<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em"  focusable="false"><g id="r1.Base基础/1.icon图标/2.normal/right-Legend" stroke-width="1" fill-rule="evenodd"><path d="M14.9805336,1.0501437 C15.533416,1.0501437 15.9816157,1.49785895 15.9816157,2.0501437 L15.9816157,10.8005056 C15.9816157,11.3527904 15.533416,11.8005056 14.9805336,11.8005056 L3.07437816,11.8005056 C2.52149579,11.8005056 2.07329607,11.3527904 2.07329607,10.8005056 L2.07329607,2.0501437 C2.07329607,1.49785895 2.52149579,1.0501437 3.07437816,1.0501437 L14.9805336,1.0501437 Z M14.7803172,2.2501437 L3.27459458,2.2501437 L3.27459458,10.6005056 L14.7803172,10.6005056 L14.7803172,2.2501437 Z M8.06012902,2.89772989 L9.72358024,4.57555951 L9.72380457,7.52765217 L11.3643489,8.79403417 L10.6275986,9.74124007 L8.52358024,8.11474565 L8.52380457,5.08165217 L7.22324506,3.75774457 L8.06012902,2.89772989 Z M12.0183843,13.8221738 L12.0183843,15.0221738 L7.01838431,15.0221738 L7.01838431,13.8221738 L12.0183843,13.8221738 Z" id="r形状结合" transform="translate(9.027456, 8.036159) rotate(-90.000000) translate(-9.027456, -8.036159)"></path></g></svg>'}],gt=[{value:"left",caption:"靠左",icon:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="aameditor/align-left" stroke-width="1" fill-rule="evenodd"><path d="M0 1h8v1.2H0V1zm0 6.4h16v1.2H0V7.4zm0 6.4h13V15H0v-1.2z" id="aam合并形状"></path></g></svg>'},{value:"center",caption:"居中",icon:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="aakeditor/align-center" stroke-width="1" fill-rule="evenodd"><path d="M3 1h10v1.2H3V1zM0 7.4h16v1.2H0V7.4zm1 6.4h14V15H1v-1.2z" id="aak合并形状"></path></g></svg>'},{value:"right",caption:"靠右",icon:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" focusable="false"><g id="aaoeditor/align-right" stroke-width="1" fill-rule="evenodd"><path d="M16 2.2H8V1h8v1.2zm0 6.4H0V7.4h16v1.2zm0 6.4H3v-1.2h13V15z" id="aao合并形状"></path></g></svg>'}],bt=g({name:"BIPositionSelect",props:{value:{type:String},editorStyle:{type:String,default:"CENTER"},disabled:{type:Boolean,default:!1},showCenter:{type:Boolean,default:!1}},emits:["change"],setup:function(e,t){var a=t.emit,n=s("position-select"),i=x("");E((function(){return e.value}),(function(){e.value?i.value=e.value:"CENTER"===e.editorStyle?i.value=gt[0].value:i.value=yt[0].value}),{immediate:!0});return{ns:n,selected:i,onSelect:function(t){e.disabled||a("change",t.value)}}},render:function(){var e=this,t=[];return t="CENTER"===this.editorStyle?gt:yt,T("div",{class:this.ns.b()},[t.map((function(t){return"left"!==t.value&&"right"!==t.value||e.showCenter?T(O("el-tooltip"),{effect:"dark",content:t.caption,placement:"top","show-after":200,"hide-after":0,"popper-class":e.ns.e("tooltip"),"show-arrow":!0},{default:function(){return T("div",{class:[e.ns.e("item"),e.ns.is("selected",e.selected===t.value),e.ns.is("disabled",e.disabled)],onClick:function(){return e.onSelect(t)},innerHTML:t.icon},null)}}):null}))])}});function wt(e,t){"[object Array]"===Object.prototype.toString.call(e)?e.forEach((function(e){wt(e,t)})):"[object Object]"===Object.prototype.toString.call(e)&&Object.keys(e).forEach((function(a){var n=e[a];"object"===h(n)?(Array.isArray(n),wt(e[a],t)):"string"==typeof n&&(e[a]=t(n))}))}function It(e,t){var a=t.appId,n=t.appDataEntityId,i=t.caption,r=t.catalog,o=t.value,s=t.seriesField,l=t.catalogCodeListId,c=void 0===l?"":l,d=t.seriesCodeListId,p=void 0===d?"":d,u=t.serieText,h=t.catname,f=t.jsonFormat;return e.replaceAll("srfAppId",a).replaceAll("srfAppDataEntityId",n).replaceAll("srfCaption",i).replaceAll("srfCatalogField",r).replaceAll("srfValue",o).replaceAll("srfSeriesField",s).replaceAll("srfCatalogCodeListId",c).replaceAll("srfSeriesCodeListId",p).replaceAll("srfCatalogName",h).replaceAll("srfSerieText",u).replaceAll("srfJsonFormat",f)}function Ct(e,t){try{if(t.reportUIModel)return JSON.parse(t.reportUIModel)[e]}catch(a){ibiz.message.error("解析报表UI模型错误")}}function Tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],n=Ct("extend",e);return t.length>0&&t.forEach((function(e){var t={name:e.measureTag};e.measureParams&&(t.param=e.measureParams),n&&n["aggmode@".concat(e.measureTag)]&&(t.aggmode=n["aggmode@".concat(e.measureTag)]),a.push(t)})),a}function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],n=Ct("extend",e);return t.length>0&&t.forEach((function(e){var t={name:e.dimensionTag};e.dimensionParams&&(t.param=e.dimensionParams),n&&n["period@".concat(e.dimensionTag)]&&(t.period=n["period@".concat(e.dimensionTag)]),a.push(t)})),a}function Et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[],i=Ct("extend",e);return t.length>0&&t.forEach((function(e){i&&i["sort@".concat(e.measureTag)]&&n.push("".concat(e.measureTag,",").concat(i["sort@".concat(e.measureTag)]))})),a.length>0&&a.forEach((function(e){i&&i["sort@".concat(e.dimensionTag)]&&(e.textAppDEFieldId?n.push("".concat(e.dimensionTag,"_text,").concat(i["sort@".concat(e.dimensionTag)])):n.push("".concat(e.dimensionTag,",").concat(i["sort@".concat(e.dimensionTag)])))})),n.join(";")||void 0}function St(e,t,a,n){var i=a.appDataEntityId,r=a.caption,o=a.dimension,s=[];return e.forEach((function(e,a){var l=H(t),c={appId:ibiz.env.appId,appDataEntityId:i,caption:r,catalog:o.dimensionTag,catname:o.dimensionName,value:e.measureTag,serieText:e.measureName,seriesCodeListId:e.appCodeListId,catalogCodeListId:o.appCodeListId,jsonFormat:e.jsonFormat};Object.assign(l,{id:"".concat(l.seriesType,"_").concat(a)}),c.catalogCodeListId&&Object.assign(l,{catalogCodeListId:"srfCatalogCodeListId"}),c.seriesCodeListId&&Object.assign(l,{seriesCodeListId:"srfSeriesCodeListId"}),c.jsonFormat&&Object.assign(l,{jsonFormat:"srfJsonFormat"}),wt(l,(function(e){return It(e,c)})),n&&n(l,a),s.push(l)})),s}function Dt(e,t){var a=[];if(e.length){var n=e[0].split(".").pop(),i=t.findIndex((function(e){return e.dimensionTag===n}));if(i>=0){var r=t[i];a.push({measureTag:r.dimensionTag,measureName:r.dimensionName,appCodeListId:r.appCodeListId,appId:ibiz.env.appId})}}return a}function Ot(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!e.length)return{"EC.name":t.serieText,"EC.tooltip":JSON.stringify({formatter:"function(param){\n          const tempdata = param.data[2];\n          const chartData = JSON.parse(localStorage.getItem(tempdata._chartid));\n          const names = param.name.split('_');\n          const catalogData =  tempdata._catalogLevelData;\n\n          let value = ".concat(n," ? param.value[0] : param.value[1];\n          if('").concat(t.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(value), '").concat(t.jsonFormat,"') || value;\n          }\n          // 计算维度项分层\n          let dimcatalogs = '';\n          catalogData.forEach((item) => {\n            let text = item.valueText || '未定义'\n            if(chartData && Object.keys(chartData).length > 0 && chartData[item.codename] && chartData[item.codename][item.value]){\n              text = chartData[item.codename][item.value];\n            }\n            const dimitem = '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\"><div>' + item.name + ':</div><div style=\"flex:0;margin-left:4px;\">' +text + '</div></div>'\n            dimcatalogs += dimitem;\n          })\n\n          return  '<div style=\"min-width: 150px\">'+ dimcatalogs +'<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\"><div style=\"flex:0\">'+ param.marker + param.seriesName +':</div><div style=\"flex:1;margin-left:4px;\">'+ value +'</div></div></div>'            \n        }")})};var i=e[0],r={"EC.tooltip":JSON.stringify({formatter:"function(param){\n        const {data} = param;        \n        const chartData = JSON.parse(localStorage.getItem(data[2]._chartid));\n        const catalogData = data[2]._catalogLevelData;\n\n        let tempName = param.seriesName;\n        const field = Object.keys(data[2]).find(key => {\n          return key !== '_groupName' && data[2][key] === param.seriesName;\n        })\n        if(field && chartData && chartData[field]){\n          tempName = chartData[field][param.seriesName];\n        }\n        // 计算维度项分层\n        let dimcatalogs = '';\n        catalogData.forEach((item) => {\n          let text = item.valueText || '未定义'\n          if(chartData && Object.keys(chartData).length > 0 && chartData[item.codename] && chartData[item.codename][item.value]){\n            text = chartData[item.codename][item.value];\n          }\n          const dimitem = '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\"><div>' + item.name + ':</div><div style=\"flex:0;margin-left:4px;\">' +text + '</div></div>'\n          dimcatalogs += dimitem;\n        })\n\n        let value = ".concat(n," ? param.value[0] : param.value[1];\n        if('").concat(t.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(value), '").concat(t.jsonFormat,"') || value;\n        }\n        return  '<div style=\"min-width: 200px\">' + dimcatalogs +          \n        '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\">'+\n          '<div>").concat(i.measureName,":</div>'+\n          '<div style=\"flex:0\">'+ tempName +'</div>'+\n        '</div>' + \n        '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\">'+ \n            '<div>' + param.marker + '").concat(t.serieText,":</div>'+\n            '<div style=\"flex:0\">' + value + '</div>'+\n          '</div>'+\n        '</div>'\n       }")})};return a&&Object.assign(r,{"EC.stack":t.serieText}),r}function At(e,t,a){return{"EC.tooltip":JSON.stringify({formatter:"function(param){\n        let tempName = param.name;\n        const { data } = param;\n        const getOrigin = (origin) => {\n          if (origin && origin.$origin) {\n            return getOrigin(origin.$origin);\n          }\n          return origin;\n        };\n        const origin = getOrigin(data.value[1].$origin);\n        const chartData = JSON.parse(localStorage.getItem(data.value[1]._chartid));\n        if(origin){\n          const field = Object.keys(origin).find(key => {\n            return origin[key] === param.name;\n          })\n          if(field && chartData && chartData[field]){\n            tempName = chartData[field][param.name];\n          }\n        }else if(chartData){\n          const _tempname = Object.keys(chartData).find(_chart => {\n            return  chartData[_chart][param.name]\n          })\n          if(_tempname){\n            tempName = chartData[_tempname][param.name]\n          }\n        }\n        \n        let value = param.value[0];\n        if('".concat(e.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(value), '").concat(e.jsonFormat,"') || value;\n        }\n        return '<div style=\"min-width: 150px\">' + \n        '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\">'+\n          '<div style=\"flex:0\">").concat(a.dimensionName,":</div>' + \n          '<div style=\"flex:1;margin-left:4px;\">'+tempName+'</div>' +\n         '</div>' + \n        '<div style=\"width:100%;display:flex;justifyContent: left;alignItems:center;\">'+\n          '<div style=\"flex:0;\">'+ param.marker + '").concat(t[0].measureName,":</div>'+\n          '<div style=\"flex:1;margin-left:4px;\">' + value + '</div>' + \n        '</div>'+\n        '</div>'\n      }")})}}var Mt=[q.IS_NULL,q.IS_NOT_NULL,q.EXISTS,q.NOT_EXISTS],Lt=[{valueOP:q.EQ,label:"等于"},{valueOP:q.NOT_EQ,label:"不等于"},{valueOP:q.GT,label:"大于"},{valueOP:q.GT_AND_EQ,label:"大于等于"},{valueOP:q.LT,label:"小于"},{valueOP:q.LT_AND_EQ,label:"小于等于"},{valueOP:q.IS_NULL,label:"为空"},{valueOP:q.IS_NOT_NULL,label:"非空"},{valueOP:q.IN,label:"属于"},{valueOP:q.NOT_IN,label:"不属于"},{valueOP:q.LIKE,label:"文本包含"},{valueOP:q.LIFT_LIKE,label:"文本左包含"},{valueOP:q.RIGHT_LIKE,label:"文本右包含"},{valueOP:q.EXISTS,label:"存在"},{valueOP:q.NOT_EXISTS,label:"不存在"}],Rt={string:[q.EQ,q.NOT_EQ,q.IS_NULL,q.IS_NOT_NULL,q.USER_LIKE,q.LIKE,q.LIFT_LIKE,q.RIGHT_LIKE],number:[q.EQ,q.GT,q.GT_AND_EQ,q.LT,q.LT_AND_EQ,q.NOT_EQ,q.IS_NULL,q.IS_NOT_NULL,q.IN,q.NOT_IN],date:[q.EQ,q.GT,q.GT_AND_EQ,q.LT,q.LT_AND_EQ,q.NOT_EQ,q.IS_NULL,q.IS_NOT_NULL,q.IN,q.NOT_IN],dropdown:[q.EQ,q.NOT_EQ,q.IS_NULL,q.IS_NOT_NULL,q.IN,q.NOT_IN],dataPicker:[q.EQ,q.NOT_EQ,q.IS_NULL,q.IS_NOT_NULL,q.IN,q.NOT_IN]},kt={string:{appId:"",editorType:"TEXTBOX"},number:{appId:"",editorType:"NUMBER"},date:{appId:"",editorType:"DATEPICKEREX",dateTimeFormat:"YYYY-MM-DD"},daterange:{appId:"",editorType:"DATERANGE_SWITCHUNIT",dateTimeFormat:"YYYY-MM-DD",editorParams:{defaultUnit:"DAY",switchUnit:"false"}},dropdown:{appId:"",valueType:"SIMPLE",editorType:"MDROPDOWNLIST",appCodeListId:"",editorParams:{overflowMode:"ellipsis"}},dataPicker:{appId:"",editorType:"ADDRESSPICKUP",appDEDataSetId:"fetchdefault",objectIdField:"srfkey",objectNameField:"srfmajortext",valueType:"OBJECTS",editorParams:{overflowMode:"ellipsis"}}};function Ft(e){var t=I({},kt[e.type]);return"dropdown"===e.type&&Object.assign(t,{appCodeListId:e.appCodeListId}),"dataPicker"===e.type&&Object.assign(t,{appDataEntityId:e.appDataEntityId}),t}function Nt(e){var t,a=Ct("filter",e),n=Ct("extend",e),i=[];if(n&&n.pqlValue&&i.push({nodeType:"CUSTOM",customType:"PQL",customCond:n.pqlValue}),a&&a.length>0){var r=a.map((function(e){return e.condition})).filter((function(e){return!(null==(t=e)||ht(t));var t}));r&&r.length>0&&(r.forEach((function(e){Array.isArray(e.value)&&(e.value=e.value.map((function(e){return e.srfkey})).join(","))})),i.push.apply(i,d(r)))}i.length>0&&(t=X([{nodeType:"GROUP",logicType:"AND",children:i}]));return t}function Pt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=b(y().mark((function e(t){var a,n,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ibiz.hub.getAppDataEntity(t,ibiz.env.appId);case 2:return a=e.sent,n="/jsonschema/".concat(a.name),0===a.dynaSysMode&&ibiz.appData&&(n+="?dynamodeltag=".concat(ibiz.appData.dynamodeltag)),e.next=7,ibiz.net.get(n);case 7:return i=e.sent,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=b(y().mark((function e(t){var a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.properties){e.next=2;break}return e.abrupt("return",[]);case 2:if(a=t.properties,Object.keys(a).length>0){e.next=5;break}return e.abrupt("return",[]);case 5:return n=[],Object.keys(a).forEach((function(e){var t,i="string",r=a[e].type;switch(a[e].type){case"string":"date-time"===a[e].format&&(i="date"),a[e].$ref&&(i="dataPicker"),a[e].enumSource&&(i="dropdown");break;case"integer":case"number":i="number",a[e].enumSource&&(i="dropdown");break;default:a[e].$ref&&(i="dataPicker")}n.push({type:i,originalType:r,appDEFieldId:e,valueOPs:Rt[i],caption:a[e].description,appDataEntityId:null===(t=a[e].$ref)||void 0===t?void 0:t.split(".")[0],appCodeListId:a[e].enumSource})})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e){return jt.apply(this,arguments)}function jt(){return(jt=b(y().mark((function t(a){var n,i,r,o,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.parampsdeuiactiontag){t.next=6;break}return n=a.parampsdeuiactiontag.split("@"),i=e(n,2),r=i[0],o=i[1],t.next=4,ibiz.hub.getAppDataEntity(o,ibiz.env.appId);case 4:return s=t.sent,t.abrupt("return","".concat(r,"@").concat(s.codeName));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ut(e,t){return _t.apply(this,arguments)}function _t(){return(_t=b(y().mark((function t(a,n){var i,r,o,s,l,c,d,p,u,h,f;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.psdefid){t.next=11;break}if(r=null===(i=a.psdefid.split(".").pop())||void 0===i?void 0:i.toLowerCase(),o=a.pssysbicubeid.split(".").pop(),s=n.find((function(e){return e.appDEFieldId===r}))){t.next=10;break}return t.next=7,ibiz.hub.getAppDataEntity(o,ibiz.env.appId);case 7:c=t.sent,(d=null==c||null===(l=c.minorAppDERSs)||void 0===l?void 0:l.find((function(e){return e.parentAppDEFieldId===r})))&&d.majorAppDataEntityId&&(p=d.majorAppDataEntityId.split("."),u=e(p,2),h=u[1],f=n.find((function(e){return e.appDEFieldId===h})),s=I(I({},f),{},{appDEFieldId:r}));case 10:return t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qt={exports:{}};!function(e,t){!function(t,a){e.exports=a()}(0,(function(){var e=[],t=[],a={},n={},i={};function r(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function o(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t){return e.replace(t[0],(function(a,n){var i,r,s=(i=t[1],r=arguments,i.replace(/\$(\d{1,2})/g,(function(e,t){return r[t]||""})));return o(""===a?e[n-1]:a,s)}))}function l(e,t,n){if(!e.length||a.hasOwnProperty(e))return t;for(var i=n.length;i--;){var r=n[i];if(r[0].test(t))return s(t,r)}return t}function c(e,t,a){return function(n){var i=n.toLowerCase();return t.hasOwnProperty(i)?o(n,i):e.hasOwnProperty(i)?o(n,e[i]):l(i,n,a)}}function d(e,t,a,n){return function(n){var i=n.toLowerCase();return!!t.hasOwnProperty(i)||!e.hasOwnProperty(i)&&l(i,i,a)===i}}function p(e,t,a){return(a?t+" ":"")+(1===t?p.singular(e):p.plural(e))}return p.plural=c(i,n,e),p.isPlural=d(i,n,e),p.singular=c(n,i,t),p.isSingular=d(n,i,t),p.addPluralRule=function(t,a){e.push([r(t),a])},p.addSingularRule=function(e,a){t.push([r(e),a])},p.addUncountableRule=function(e){"string"!=typeof e?(p.addPluralRule(e,"$0"),p.addSingularRule(e,"$0")):a[e.toLowerCase()]=!0},p.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),i[e]=t,n[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return p.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return p.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return p.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(p.addUncountableRule),p}))}(qt);var Xt=Ht(qt.exports);Xt.addPluralRule(/(matr|vert|ind)ix|ex$/,"$1ices");var Jt=[{valueOP:q.EQ,label:"等于",sqlOP:"="},{valueOP:q.NOT_EQ,label:"不等于",sqlOP:"<>"},{valueOP:q.GT,label:"大于",sqlOP:">"},{valueOP:q.GT_AND_EQ,label:"大于等于",sqlOP:">="},{valueOP:q.LT,label:"小于",sqlOP:"<"},{valueOP:q.LT_AND_EQ,label:"小于等于",sqlOP:"<="},{valueOP:q.IS_NULL,label:"为空",sqlOP:"IS NULL"},{valueOP:q.IS_NOT_NULL,label:"非空",sqlOP:"IS NOT NULL"},{valueOP:q.IN,label:"属于",sqlOP:"IN"},{valueOP:q.NOT_IN,label:"不属于",sqlOP:"NOT IN"},{valueOP:q.LIKE,label:"文本包含",sqlOP:"LIKE"}],Wt=new Map;Jt.forEach((function(e){Wt.set(e.valueOP,e)}));var Yt=new Map;Jt.forEach((function(e){Yt.set(e.sqlOP,e.valueOP)}));var $t=function(e){try{for(var t=e.split("  "),a=[],n=0;n<t.length;n++){if(0!==n){var i=t[n];if("and"!==i&&"or"!==i)throw new z("pql自定义条件解析错误");if(n===t.length-1)throw new z("pql自定义条件解析错误");a.push({type:"connection",value:{label:i,value:i}})}var r=t[0!==n?++n:n],o=t[++n];if(r&&/^\$/.test(r)&&o){var s=JSON.parse(r.slice(1));if(Mt.includes(Yt.get(o))){var l;a.push({type:"condition",key:{label:s.caption,value:s.name},operator:{label:(null===(l=Wt.get(Yt.get(o)))||void 0===l?void 0:l.label)||"",value:Yt.get(o)}});continue}var c=t[++n];if(c){var d,p=/^\$/.test(c)?JSON.parse(c.slice(1)):{caption:c,value:c};a.push({type:"condition",key:{label:s.caption,value:s.name},operator:{label:(null===(d=Wt.get(Yt.get(o)))||void 0===d?void 0:d.label)||"",value:Yt.get(o)},value:{type:/^\$/.test(c)?"pql-field-value":void 0,label:p.caption,value:p.value}});continue}}throw new z("pql自定义条件解析错误")}return a}catch(u){ibiz.log.error(null==u?void 0:u.message)}};function Kt(e){return 5===e||27===e}var Zt=[{unit:"DAY",tag:"TIMESTAMP"},{unit:"WEEK",tag:"STARTOFWEEK"},{unit:"MONTH",tag:"STARTOFMONTH"},{unit:"QUARTER",tag:"STARTOFQUARTER"},{unit:"YEAR",tag:"STARTOFYEAR"}],Qt=function(){function e(){f(this,e)}return v(e,[{key:"handleDateToString",value:function(e,t){var a=e.unit,n=e.type,i=e.start,r=e.end,o=this.computedDynamicTimeToDate(a,n,i,r),s=this.completeTimeFormat(String(o[0]),"START"),l=this.completeTimeFormat(String(o[1]),"END");return"WEEK"===a?"(".concat(t," >= STARTOFWEEK('").concat(s,"')) AND (").concat(t,"  <= STARTOFWEEK('").concat(l,"'))"):"MONTH"===a?"(".concat(t," >=  STARTOFMONTH('").concat(s,"')) AND (").concat(t,"  <= STARTOFMONTH('").concat(l,"'))"):"QUARTER"===a?"(".concat(t," >= STARTOFQUARTER('").concat(s,"')) AND (").concat(t,"  <= STARTOFQUARTER('").concat(l,"'))"):"YEAR"===a?"(".concat(t," >= STARTOFYEAR('").concat(s,"')) AND (").concat(t,"  <= STARTOFYEAR('").concat(l,"'))"):"(".concat(t," >= TIMESTAMP('").concat(s,"')) AND (").concat(t,"  <= TIMESTAMP('").concat(l,"'))")}},{key:"handleStringToDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DYNAMIC",a=d(e.matchAll(/\w+\('(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})'\)/g)).map((function(e){return e[1]}));if(a&&a.length){var n=this.computedDateUnit(e),i=this.computedDateTypesTime(n,t,a[0],a[1]);return{unit:n,type:t,start:i.start,end:i.end}}}},{key:"computedDateUnit",value:function(e){var t=Zt.find((function(t){return e.indexOf(t.tag)>=0}));return null!=t&&t.unit?t.unit:"DAY"}},{key:"computedDynamicTimeToDate",value:function(e,t,a,n){if("STATIC"===t){var i=new Date(1e3*a),r=new Date(1e3*n);return"YEAR"===e?[i.getFullYear(),r.getFullYear()]:[i.toLocaleDateString(),r.toLocaleDateString()]}var o=new Date;if(o.setHours(0,0,0,0),"WEEK"===e)return[this.timeSpanConvertToWeek(o,a),this.timeSpanConvertToWeek(o,n)];if("MONTH"===e)return[this.timeSpanConvertToMonth(o,a),this.timeSpanConvertToMonth(o,n)];if("QUARTER"===e)return[this.timeSpanConvertToQuarter(o,a),this.timeSpanConvertToQuarter(o,n)];if("YEAR"===e)return[o.getFullYear()-a,o.getFullYear()-n];var s=24*a*60*60*1e3,l=24*n*60*60*1e3,c=new Date(o.getTime()+s),d=new Date(o.getTime()+l);return[c.toLocaleDateString().replaceAll("/","-"),d.toLocaleDateString().replaceAll("/","-")]}},{key:"timeSpanConvertToQuarter",value:function(e,t){var a=Math.floor(t/4),n=t%4,i=e.getFullYear()-a,r=e.getMonth()+1,o=Math.ceil(r/3)-n;return o<0&&(i-=1,o+=4),o>4&&(i+=1,o-=4),"".concat(i,"-").concat(3*o)}},{key:"timeSpanConvertToWeek",value:function(e,t){var a=e.getTime();return new Date(a-7*t*24*60*60*1e3).toLocaleDateString()}},{key:"timeSpanConvertToMonth",value:function(e,t){var a=Math.floor(t/12),n=t%12,i=e.getFullYear()-a,r=e.getMonth()+1-n;return r<0&&(i-=1,r+=12),r>12&&(i+=1,r-=12),"".concat(i,"-").concat(r)}},{key:"completeTimeFormat",value:function(e,t){var a=new Date(e);return"START"===t?a.setHours(0,0,0,0):a.setHours(23,59,59,0),re(a).format("YYYY-MM-DD HH:mm:ss")}},{key:"computedDateTypesTime",value:function(e,t,a,n){return"STATIC"===t?this.computedStaticTime(e,a,n):this.computedDynamicTime(e,a,n)}},{key:"computedDynamicTime",value:function(e,t,a){switch(e){case"DAY":default:return this.computedDaysSpace(t,a);case"WEEK":return this.computedWeeksSpace(t,a);case"MONTH":return this.computedMonthsSpace(t,a);case"QUARTER":return this.computedQuartersSpace(t,a);case"YEAR":return this.computedYearsSpace(t,a)}}},{key:"computedYearsSpace",value:function(e,t){var a=(new Date).getFullYear();return{start:new Date(e).getFullYear()-a,end:new Date(t).getFullYear()-a}}},{key:"computedQuartersSpace",value:function(e,t){var a=new Date,n=new Date(e),i=new Date(t),r=function(e,t){var a=e.getFullYear(),n=e.getMonth()+1,i=Math.ceil(n/3),r=t.getFullYear(),o=t.getMonth()+1;return 4*(r-a)-i+Math.ceil(o/3)};return{start:r(a,n),end:r(a,i)}}},{key:"computedDaysSpace",value:function(e,t){var a=new Date,n=new Date(e),i=new Date(t);return a.setHours(0,0,0,0),n.setHours(0,0,0,0),i.setHours(0,0,0,0),{start:(n.getTime()-a.getTime())/864e5,end:(i.getTime()-a.getTime())/864e5}}},{key:"computedWeeksSpace",value:function(e,t){var a=this,n=new Date,i=new Date(e),r=new Date(t);n.setHours(0,0,0,0),i.setHours(0,0,0,0),r.setHours(0,0,0,0);var o=function(e,t){var n=a.getDateWeekMonday(e);return(a.getDateWeekMonday(t).getTime()-n.getTime())/6048e5};return{start:o(n,i),end:o(n,r)}}},{key:"computedMonthsSpace",value:function(e,t){var a=new Date,n=new Date(e),i=new Date(t),r=function(e,t){var a=e.getFullYear(),n=e.getMonth()+1;return 12*(t.getFullYear()-a)-n+(t.getMonth()+1)};return{start:r(a,n),end:r(a,i)}}},{key:"getDateWeekMonday",value:function(e){var t=e.getDay(),a=t;0===t&&(a=7);var n=e.getTime()-24*(a-1)*60*60*1e3;return new Date(n)}},{key:"computedStaticTime",value:function(e,t,a){switch(e){case"DAY":default:return this.computedDaysTime(t,a);case"WEEK":return this.computedWeeksTime(t,a);case"MONTH":return this.computedMonthsTime(t,a);case"QUARTER":return this.computedQuartersTime(t,a);case"YEAR":return this.computedYearsTime(t,a)}}},{key:"computedDaysTime",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(0,0,0,0),n.setHours(23,59,59,0),{start:a.getTime()/1e3,end:n.getTime()/1e3}}},{key:"computedWeeksTime",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(0,0,0,0),n.setHours(23,59,59,0),{start:a.getTime()/1e3,end:n.getTime()/1e3}}},{key:"computedMonthsTime",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(0,0,0,0),[1,3,5,7,8,10,12].includes(n.getMonth()+1)?n.setDate(31):1===n.getMonth()?n.setDate(29):n.setDate(30),n.setHours(23,59,59,0),{start:a.getTime()/1e3,end:n.getTime()/1e3}}},{key:"computedQuartersTime",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(0,0,0,0),n.setHours(23,59,59,0),{start:a.getTime()/1e3,end:n.getTime()/1e3}}},{key:"computedYearsTime",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(0,0,0,0),n.setMonth(11),n.setDate(31),n.setHours(23,59,59,0),{start:a.getTime()/1e3,end:n.getTime()/1e3}}}]),e}();var ea=g({name:"BIFilterItem",props:{field:{type:Object,required:!0},condition:{type:Object},context:{type:Object,required:!0},type:{type:String},params:{type:Object,required:!0},modal:{type:Object,required:!0}},emits:{change:function(e){return!0},mateChange:function(e){return!0}},setup:function(e,t){var a=t.emit,n=s("bi-filter-item"),i=x(void 0),r=x(void 0),o=x(void 0),l=x({value:null,valueOP:null,nodeType:"FIELD",field:e.field.appDEFieldId}),c=x(!1),d=new Qt,p=w((function(){return Lt.filter((function(t){return e.field.valueOPs.includes(t.valueOP)}))})),u=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.condition&&(l.value=I({},e.condition)),"date"===e.field.type&&"PQL"===l.value.customType?(c.value=!0,i.value=I({},kt.daterange),l.value.value=d.handleStringToDate(l.value.customCond,e.type),l.value.valueOP="IN"):i.value=Ft(e.field),t.next=4,J(i.value);case 4:if(r.value=t.sent,!r.value){t.next=9;break}return t.next=8,r.value.createController(i.value,{context:e.context,params:e.params});case 8:o.value=t.sent;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();u();var h=function(){e.modal.dismiss()},f=function(e){l.value.value=e},m=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.value=void 0,i.value=I({},kt.daterange),t.next=4,J(i.value);case 4:if(r.value=t.sent,!r.value){t.next=9;break}return t.next=8,r.value.createController(i.value,{context:e.context,params:e.params});case 8:o.value=t.sent;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.value=void 0,i.value=Ft(e.field),t.next=4,J(i.value);case 4:if(r.value=t.sent,!r.value){t.next=9;break}return t.next=8,r.value.createController(i.value,{context:e.context,params:e.params});case 8:o.value=t.sent;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=b(y().mark((function t(a){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.value.valueOP=a,f(null),c.value?"date"===e.field.type&&"IN"===a||(c.value=!1,v()):"date"===e.field.type&&"IN"===a&&(c.value=!0,m());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){if(l.value.valueOP&&Mt.includes(l.value.valueOP))return null;if(o.value){var e=O(r.value.formEditor);return L(e,{value:l.value.value,controller:o.value,onChange:function(e,t){f(e)}})}};return{ns:n,onClose:h,onConfirm:function(){if(c.value){var t={nodeType:"CUSTOM",customType:"PQL",customCond:d.handleDateToString(l.value.value,e.field.appDEFieldId),field:e.field.appDEFieldId};a("mateChange",l.value.value.type),a("change",t)}else a("change",l.value);h()},renderContent:function(){var t,a;return T("div",{class:n.e("content")},[T("div",{class:n.em("content","field")},[T(O("el-select"),{"model-value":l.value.field},{default:function(){return[T(O("el-option"),{key:e.field.appDEFieldId,value:e.field.appDEFieldId,label:e.field.caption},null)]}})]),T("div",{class:n.em("content","option")},[T(O("el-select"),{"model-value":l.value.valueOP,onChange:function(e){g(e)}},(a=t=p.value.map((function(e){return T(O("el-option"),{key:e.valueOP,value:e.valueOP,label:e.label},null)})),"function"==typeof a||"[object Object]"===Object.prototype.toString.call(a)&&!M(a)?t:{default:function(){return[t]}}))]),T("div",{class:n.em("content","editor")},[C()])])}}},render:function(){return T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("header")},[T("span",{class:this.ns.em("header","caption")},[A("筛选")]),T("span",{class:this.ns.em("header","icon")},[T(O("ion-icon"),{name:"close-outline",onClick:this.onClose},null)])]),this.renderContent(),T("div",{class:this.ns.e("footer")},[T(O("el-button"),{text:!0,onClick:this.onClose},{default:function(){return[A("取消")]}}),T(O("el-button"),{onClick:this.onConfirm},{default:function(){return[A("确定")]}})])])}}),ta=g({name:"BITimeSelect",props:{value:{type:Object,default:function(){}},modal:{type:Object,required:!0},context:{type:Object,required:!0},params:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var a=t.emit,n=s("bi-time-select"),i=x(),r=x(),o=x(),l=x({unit:"DAY",type:"DYNAMIC",start:-7,end:0}),c=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.value={appId:"",editorType:"DATERANGE_SWITCHUNIT",dateTimeFormat:"YYYY-MM-DD"},t.next=3,J(i.value);case 3:if(r.value=t.sent,!r.value){t.next=8;break}return t.next=7,r.value.createController(i.value,{context:e.context,params:e.params});case 7:o.value=t.sent;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();E((function(){return e.value}),(function(e){e&&(l.value=e)}),{immediate:!0}),c();return{ns:n,renderEditor:function(){if(o.value){var t=O("IBizDateRangeSelect");return L(t,{value:e.value,controller:o.value,onChange:function(e){var t;t=e,l.value=t}})}},onOK:function(){a("change",l.value),e.modal.dismiss()},onCancel:function(){e.modal.dismiss()}}},render:function(){return T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("header")},[T("span",{class:this.ns.em("header","caption")},[A("配置")]),T("svg",{onClick:this.onCancel,class:this.ns.em("header","close"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"agwaction/close","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.456 7.456V-.115h1.2v7.571h7.572v1.2H8.656v7.572h-1.2V8.656H-.115v-1.2h7.571z",id:"agw形状结合",transform:"rotate(45 8.056 8.056)"},null)])])]),T("div",{class:this.ns.e("content")},[this.renderEditor()]),T("div",{class:this.ns.e("footer")},[T(O("el-button"),{link:!0,onClick:this.onCancel},{default:function(){return[A("取消")]}}),T(O("el-button"),{type:"primary",onClick:this.onOK},{default:function(){return[A("确认")]}})])])}}),aa=[{name:"合计",value:"SUM"},{name:"平均",value:"AVG"},{name:"最大值",value:"MAX"},{name:"最小值",value:"MIN"},{name:"计数",value:"COUNT"}],na=g({name:"BIAggmodeSelect",props:{item:{type:Object,required:!0},value:{type:String}},emit:["change"],setup:function(e,t){var a=t.emit,n=s("bi-aggmode-select"),i=x(!1);return{ns:n,aggModeList:aa,aggmodeVisible:i,handleClick:function(e){e.stopPropagation(),e.preventDefault()},aggModeClick:function(e,t){t.stopPropagation(),t.preventDefault(),i.value=!1,a("change",e)}}},render:function(){var e=this;return T(O("el-popover"),{visible:this.aggmodeVisible,"onUpdate:visible":function(t){return e.aggmodeVisible=t},"popper-class":this.ns.e("aggmode-container"),placement:"right-start",width:200},{reference:function(){return T("div",{class:[e.ns.e("aggmode"),e.ns.em("aggmode","group-item")],onPointerup:e.handleClick},[T("span",null,[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"ade1.Base基础/1.icon图标/1.-action/arithmetic","stroke-width":"1","fill-rule":"evenodd"},[T("g",{id:"ade计算_arithmetic",transform:"translate(1.4 1.4)","fill-rule":"nonzero"},[T("path",{d:"M12.6 12.824a.6.6 0 0 1 .097 1.192l-.097.008H7.933a.6.6 0 0 1-.097-1.192l.097-.008H12.6zm.413-12.66a.6.6 0 0 1 .09.764l-.068.085-12 12.649a.6.6 0 0 1-.937-.741l.067-.085 12-12.649a.6.6 0 0 1 .848-.022zM12.6 9.663a.6.6 0 0 1 .097 1.192l-.097.008H7.933a.6.6 0 0 1-.097-1.192l.097-.008H12.6zM3.267 0a.6.6 0 0 1 .592.503L3.867.6l-.001 2.21h2.067a.6.6 0 0 1 .098 1.193l-.098.008-2.067-.001v2.212a.6.6 0 0 1-1.191.097l-.008-.097-.001-2.212H.6A.6.6 0 0 1 .503 2.82L.6 2.81l2.066-.001V.6a.6.6 0 0 1 .6-.6z",id:"ade形状结合"},null)])])]),T("span",null,[A("计算")])]),T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"abbnavigation/angle-right","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z",id:"abb形状结合",transform:"rotate(-90 7.978 8.252)"},null)])])])},default:function(){return T("div",{class:[e.ns.e("aggmode-list")]},[e.aggModeList.map((function(t){return T("div",{class:[e.ns.em("aggmode-list","item"),e.ns.is("selected",e.value===t.value)],onPointerup:function(a){return e.aggModeClick(t.value,a)}},[t.name])}))])}})}}),ia=g({name:"BISort",props:{value:{type:Object,default:function(){}},measures:{type:Array,default:[]},dimension:{type:Object,default:function(){},required:!0},modal:{type:Object,required:!0}},emit:["change"],setup:function(e,t){var a=t.emit,n=s("bi-sort"),i=function(t){return"asc"===e.value["sort@".concat(t.id)]},r=function(t){return"desc"===e.value["sort@".concat(t.id)]},o=function(t){return!e.value["sort@".concat(t.id)]},l=function(t){return T("div",{class:n.e("item"),onClick:function(){return function(t){var n=null;"asc"===e.value["sort@".concat(t.id)]&&(n="desc"),"desc"===e.value["sort@".concat(t.id)]&&(n=null),e.value["sort@".concat(t.id)]||(n="asc"),a("change",t.id,n)}(t)}},[T("div",{class:n.em("item","label")},[t.name]),T("div",{class:[n.em("item","icon"),n.is("no-sort",o(t)),n.is("asc",i(t)),n.is("desc",r(t))]},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"avt1.Base基础/1.icon图标/5.navigation/sort-positive-sequence","stroke-width":"1","fill-rule":"nonzero"},[T("path",{d:"M7.173 2.605l-2.625 3A.6.6 0 0 0 5 6.6h5.25a.6.6 0 0 0 .452-.995l-2.625-3a.6.6 0 0 0-.904 0z",id:"avt路径"},null),T("path",{d:"M10.25 9.108H5a.6.6 0 0 0-.452.995l2.625 3a.6.6 0 0 0 .904 0l2.625-3a.6.6 0 0 0-.452-.995z",id:"avtsecondary-color"},null)])])])])};return{ns:n,renderDimension:function(){var t={name:e.dimension.pssysbicubedimensionname,id:e.dimension.codename};return l(t)},renderMeasure:function(){return e.measures.map((function(e){var t={name:e.pssysbicubemeasurename,id:e.codename};return l(t)}))},onMouseLevel:function(){e.modal.dismiss()}}},render:function(){return T("div",{class:this.ns.b(),onMouseleave:this.onMouseLevel},[this.renderDimension(),this.renderMeasure()])}}),ra=g({name:"BIAxis",props:{value:{type:String,default:"LEFT"},modal:{type:Object,required:!0}},emits:["change"],setup:function(e,t){var a=t.emit;return{ns:s("bi-axis"),renderSelectIcon:function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"agctips/check","stroke-width":"1","fill-rule":"evenodd"},[T("path",{id:"agc路径-12",d:"M6.012 11.201L1.313 6.832l-.817.879 5.54 5.15 9.304-9.163-.842-.855z"},null)])])},onClick:function(e){a("change",e)},onMouseLevel:function(){e.modal.dismiss()}}},render:function(){var e=this;return T("div",{class:this.ns.b(),onMouseleave:this.onMouseLevel},[T("div",{class:this.ns.e("item"),onClick:function(){return e.onClick("LEFT")}},[T("span",null,[A("左轴")]),"LEFT"===this.value&&this.renderSelectIcon()]),T("div",{class:this.ns.e("item"),onClick:function(){return e.onClick("RIGHT")}},[T("span",null,[A("右轴")]),"RIGHT"===this.value&&this.renderSelectIcon()])])}}),oa=g({props:{value:{type:Array,default:[]},modal:{type:Object,required:!0}},components:{"bi-font-border-select":vt},emit:["cordonChange"],setup:function(e,t){var a=t.emit,n=s("bi-chart-cordon"),i=x([]),r=[{name:"固定值",value:"FIXED"},{name:"最大值",value:"MAX"},{name:"最小值",value:"MIN"},{name:"平均值",value:"AVERAGE"}],o=function(){i.value.push({id:ut(),name:"警戒线".concat(i.value.length+1),lineStyle:"dashed",lineSize:1,lineColor:"red",cordonType:"FIXED",cordonSize:0})},l=function(e,t){"ADD"===e?t.cordonSize+=1:t.cordonSize-=1};E((function(){return e.value}),(function(e){e&&Array.isArray(e)&&e.length>0?i.value=e:i.value=[]}),{immediate:!0});return{ns:n,onCancel:function(){e.modal.dismiss()},onOK:function(){a("cordonChange",i.value),e.modal.dismiss()},renderContent:function(){return i.value.map((function(e,t){return T("div",{class:n.em("content","item")},[T("div",{class:n.em("content","item-header")},[T("div",{class:n.em("content","item-index")},[A("警戒线("),t+1,A(")")]),T("div",{class:n.em("content","item-delete"),onClick:function(){return function(e){var t=i.value.findIndex((function(t){return t.id===e.id}));t>=0&&i.value.splice(t,1)}(e)}},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"azkaction/trash","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.002 3.403V1a1 1 0 0 1 1-1h6.003a1 1 0 0 1 1 1v2.403h3.396a.6.6 0 1 1 0 1.2h-1.395V15a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4.603H.6a.6.6 0 1 1 0-1.2h3.4zm8.804 1.205H3.2V14.8h9.605V4.608zM5.202 1.2v2.155h5.603V1.2H5.202zm.6 6.417a.6.6 0 0 1 1.201 0v4.758a.6.6 0 0 1-1.2 0V7.617zm3.202 0a.6.6 0 0 1 1.2 0v4.758a.6.6 0 0 1-1.2 0V7.617z",id:"azk删除"},null)])])])]),T("div",{class:n.em("content","item-editor")},[T("div",{class:n.em("content","line-set")},[T(O("el-input"),{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t}},null),T(O("bi-font-border-select"),{mode:"BORDER",borderMax:10,borderMin:1,useDotted:!0,value:{borderStyle:e.lineStyle,borderSize:e.lineSize,color:e.lineColor},onChange:function(t){return function(e,t){var a=t.borderStyle,n=t.borderSize,i=t.color;e.lineStyle=a,e.lineSize=n,e.lineColor=i}(e,t)}},null)]),T("div",{class:n.em("content","line-type")},[T(O("el-select"),{modelValue:e.cordonType,"onUpdate:modelValue":function(t){return e.cordonType=t},class:n.em("content","cordon-type"),size:"large"},{default:function(){return r.map((function(e){return T(O("el-option"),{key:e.value,label:e.name,value:e.value},{default:function(){return[e.name]}})}))}}),"FIXED"===e.cordonType&&T(O("el-input"),{class:n.e("input-number"),modelValue:e.cordonSize,"onUpdate:modelValue":function(t){return e.cordonSize=t},size:"large"},{suffix:function(){return T("div",{class:[n.e("input-number-suffix")]},[T("span",{class:[n.e("input-number-suffix-add"),n.is("readonly",e.cordonSize>=10)],onClick:function(){return l("ADD",e)}},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"abdnavigation/angle-up","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z",id:"abd形状结合",transform:"rotate(180 7.978 8.252)"},null)])])]),T("span",{class:[n.e("input-number-suffix-minus"),n.is("readonly",e.cordonSize<=1)],onClick:function(){return l("REDUCE",e)}},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{id:"aaynavigation/angle-down","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.997l-.005.006L2.3 6.33l.83-.831 4.848 4.848L12.826 5.5l.83.83-5.673 5.673-.005-.006z",id:"aay形状结合"},null)])])])])}})])])])}))},renderAddItem:function(){return T("div",{class:n.em("content","add"),onClick:o},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"asg1.Base基础/1.icon图标/1.-action/plus","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M8.578 7.383V1.602a.601.601 0 1 0-1.2 0v5.781H1.6a.601.601 0 0 0 0 1.203h5.777v5.812a.601.601 0 1 0 1.2 0V8.586H14.4a.601.601 0 0 0 0-1.203H8.578z",id:"asgFill-1"},null)])]),T("span",null,[A("新增警戒线")])])}}},render:function(){return T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("header")},[T("span",{class:this.ns.em("header","caption")},[A("警戒线")]),T("svg",{onClick:this.onCancel,class:this.ns.em("header","close"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"agwaction/close","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.456 7.456V-.115h1.2v7.571h7.572v1.2H8.656v7.572h-1.2V8.656H-.115v-1.2h7.571z",id:"agw形状结合",transform:"rotate(45 8.056 8.056)"},null)])])]),T("div",{class:this.ns.e("content")},[this.renderContent(),this.renderAddItem()]),T("div",{class:this.ns.e("footer")},[T(O("el-button"),{link:!0,onClick:this.onCancel},{default:function(){return[A("取消")]}}),T(O("el-button"),{type:"primary",onClick:this.onOK},{default:function(){return[A("确认")]}})])])}}),sa=g({name:"BIDragElement",components:{draggable:ie,"bi-aggmode-select":na},props:{controller:{type:Object,required:!0},multiple:{type:Boolean,default:!0},caption:{type:String,default:""},subCaption:{type:String,default:""},type:{type:String,default:"measure"},value:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]}},expandActions:{type:Array,default:function(){return[]}},error:{type:Object}},emits:["change","extendChange"],setup:function(e,t){var a=t.emit,n=s("drag-element"),i=x([]),r=x(null),o=x(),l=x(),c=x(),p=x({visible:!1,currentId:""}),u=ut(),h=x(),f=x(!1),m=null,v=V,g=x(new Map),C=x(!1),M=["SORT","AXIS"],k=x(),F=w((function(){return e.controller.state.propertyData})),N=function(){var e=b(y().mark((function e(){var t,a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<i.value.length)){e.next=15;break}if(a=i.value[t],g.value.has(a.codename)){e.next=12;break}return e.next=6,Vt(a);case 6:if(a.parampsdeuiactiontag=e.sent,!a.parampsdeuiactiontag){e.next=12;break}return e.next=10,W(a.parampsdeuiactiontag,ibiz.env.appId);case 10:(n=e.sent)&&g.value.set(a.codename,n);case 12:t++,e.next=1;break;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(t){return!t||t.dragTypes.indexOf(e.type)<0?{ok:!1,msg:""}:{ok:!0,msg:""}},B=function(e,t){p.value.visible=!1,e.condition=t,a("change",i.value)},j=function(e){var t=I({},e);return t.target=e.currentTarget,t},U=function(t,n,r){if(p.value.visible=!1,"period"===e.type&&r){var o=I(I({},n),{},{field:r.appDEFieldId,yoy:1,pop:1});t.value=o,a("change",i.value)}else a("extendChange","".concat(at.PERIOD,"@").concat(t.codename),n)},_=function(e,t){e.dateType=t},H=function(){var t=b(y().mark((function t(a,n){var i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut(n,e.controller.state.schemaFields);case 2:if(!(i=t.sent)){t.next=12;break}return m=ibiz.overlay.createPopover((function(t){return L(ea,{field:i,modal:t,condition:n.condition,type:n.dateType,context:e.controller.context,params:e.controller.viewParams,onChange:function(e){return B(n,e)},onMateChange:function(e){return _(n,e)}})}),void 0,{placement:"right",autoClose:!0,noArrow:!0,width:400}),t.next=7,m.present(a.target);case 7:return t.next=9,m.onWillDismiss();case 9:m=null,t.next=13;break;case 12:ibiz.message.error("未找到 ".concat(n.codename," 属性的Schema配置"));case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),q=function(){var t=b(y().mark((function t(a,n){var i,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.value,"dimension"===e.type&&(i=F.value.extend["period@".concat(n.codename)]),t.next=4,Ut(n,e.controller.state.schemaFields);case 4:return r=t.sent,m=ibiz.overlay.createPopover((function(t){return L(ta,{value:i,context:e.controller.context,params:e.controller.viewParams,modal:t,onChange:function(e){return U(n,e,r)}})}),void 0,{placement:"right",autoClose:!0,noArrow:!0,width:400}),t.next=8,m.present(a.target);case 8:return t.next=10,m.onWillDismiss();case 10:m=null;case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),X=function(e,t){a("extendChange","".concat(at.SORT,"@").concat(e),t)},J=function(e,t){a("extendChange","".concat(at.CORDON,"@").concat(e.codename),t)},$=function(e,t){a("extendChange","".concat(at.AXIS,"@").concat(e.codename),t)},K=function(){var e=b(y().mark((function e(t,a){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=ibiz.overlay.createPopover((function(e){return L(ia,{value:F.value.extend,dimension:a,measures:F.value.data.measure,modal:e,onChange:function(e,t){return X(e,t)}})}),void 0,{placement:"right",autoClose:!0,noArrow:!1,width:250}),e.next=3,m.present(t.target);case 3:return e.next=5,m.onWillDismiss();case 5:m=null;case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=function(){var e=b(y().mark((function e(t,a){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=ibiz.overlay.createModal((function(e){return L(oa,{value:F.value.extend["cordon@".concat(a.codename)],modal:e,onCordonChange:function(e){return J(a,e)}})}),void 0,{width:660,modalClass:n.e("cordon"),footerHide:!0}),p.value.visible=!1,e.next=4,m.present(t.target);case 4:return e.next=6,m.onWillDismiss();case 6:m=null;case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=b(y().mark((function e(t,a){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=ibiz.overlay.createPopover((function(e){return L(ra,{value:F.value.extend["axis@".concat(a.codename)],modal:e,onChange:function(e){return $(a,e)}})}),void 0,{placement:"right",autoClose:!0,noArrow:!1,width:250}),e.next=3,m.present(t.target);case 3:return e.next=5,m.onWillDismiss();case 5:m=null;case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(t){if("dimension"===e.type&&Kt(t.stddatatype))return{srfperiod:F.value.extend["period@".concat(t.codename)],customeditormodel:{dataType:25,enableCond:3,labelPos:"NONE",noPrivDisplayMode:1,editor:{editorType:"DATERANGE_SWITCHUNIT",valueType:"SIMPLE",editable:!0,id:"srfperiod",appId:ibiz.env.appId},allowEmpty:!1,codeName:"srfperiod",fieldName:"srfperiod",detailStyle:"DEFAULT",detailType:"FORMITEM",layoutPos:{colMD:24,layout:"TABLE_24COL",appId:ibiz.env.appId},id:"srfperiod",appId:ibiz.env.appId}}},te=function(){var t=b(y().mark((function t(n,r){var o,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={event:n,data:[r],context:e.controller.context,params:I(I(I({},e.controller.viewParams),JSON.parse(r.birepitemparams||"{}")),ee(r))},t.next=3,Y.exec(r.parampsdeuiactiontag,o,ibiz.env.appId);case 3:!(s=t.sent).cancel&&s.data&&(p.value.visible=!1,"dimension"===e.type&&Kt(r.stddatatype)&&s.data[0].srfperiod&&(a("extendChange","".concat(at.PERIOD,"@").concat(r.codename),s.data[0].srfperiod),delete s.data[0].srfperiod),r.birepitemparams=JSON.stringify(s.data[0]),a("change",i.value));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ae=function(t){if("dimension"===e.type&&Kt(t.stddatatype)){a("extendChange","".concat(at.PERIOD,"@").concat(t.codename),{unit:"DAY",type:"DYNAMIC",start:-7,end:0})}},ne=function(){var t=b(y().mark((function t(n){var o,s,l,c;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.value,n=o,e.controller.verifyErrorState(e.type,i.value,["MAXLIMIT","TYPELIMIT"],{targetItem:n}).ok&&P(n).ok){t.next=4;break}return t.abrupt("return");case 4:if(s=i.value.findIndex((function(e){var t=e.pssysbicubedimensionid||e.pssysbicubemeasureid,a=o.pssysbicubedimensionid||o.pssysbicubemeasureid;return t&&t===a})),l=d(i.value),!(o&&s<0)){t.next=16;break}if("period"!==e.type){t.next=12;break}return t.next=10,Ut(o,e.controller.state.schemaFields);case 10:(c=t.sent)&&(o.value={field:c.appDEFieldId,unit:"DAY",type:"DYNAMIC",start:-7,end:0,pop:1,yoy:1});case 12:e.multiple?l.push(o):(l=[o],i.value.length&&(a("extendChange","".concat(at.AGGMODE,"@").concat(i.value[0].codename),null),a("extendChange","".concat(at.PERIOD,"@").concat(i.value[0].codename),null))),ae(o),a("change",l),"filter"===e.type&&setTimeout((function(){h.value&&H({target:h.value},o)}),0);case 16:r.value=null;case 17:case"end":return t.stop()}var n}),t)})));return function(e){return t.apply(this,arguments)}}(),ie=function(e){p.value.currentId="";var t=i.value.findIndex((function(t){var a=t.pssysbicubedimensionid||t.pssysbicubemeasureid,n=e.pssysbicubedimensionid||e.pssysbicubemeasureid;return a&&a===n}));t>-1&&i.value.splice(t,1),a("extendChange","".concat(at.AGGMODE,"@").concat(e.codename),null),a("extendChange","".concat(at.PERIOD,"@").concat(e.codename),null),a("extendChange","".concat(at.SORT,"@").concat(e.codename),null),a("extendChange","".concat(at.CORDON,"@").concat(e.codename),null),a("extendChange","".concat(at.AXIS,"@").concat(e.codename),null),a("change",i.value)},re=function(t){return"measure"===e.type?"COMMON"===t.bimeasuretype?T("svg",{class:n.em("content","item-icon-com"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"alzeditor/hashtag","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.236 9.9l.422-3.8H2.6a.6.6 0 1 1 0-1.2h2.19l.372-3.347a.6.6 0 1 1 1.192.133L5.998 4.9h4.793l.37-3.347a.6.6 0 0 1 1.193.133L11.998 4.9h2.459a.6.6 0 0 1 0 1.2h-2.592l-.421 3.8h2.013a.6.6 0 0 1 0 1.2H11.31l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H5.311l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H1.6a.6.6 0 0 1 0-1.2h2.636zm1.208 0h4.792l.422-3.8H5.865l-.421 3.8z",id:"alz形状结合"},null)])]):T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"aljeditor/formula","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M12.663 11.027c-.117.142-.25.318-.4.527.09.88.404 1.722.913 2.446a.807.807 0 0 0 .951.051c.212-.071.317.313 0 .494a2.582 2.582 0 0 1-2.376.185 2.786 2.786 0 0 1-.918-1.726c-.101.152-.177.27-.223.346-.05.08-.121.194-.215.34a5.11 5.11 0 0 1-.776.993 1.134 1.134 0 0 1-.787.3.82.82 0 0 1-.832-.852 1.058 1.058 0 0 1 1.085-1.113c.176 0 .352.021.522.066.167.045.324.094.471.147a2.69 2.69 0 0 0 .264-.271c.129-.15.25-.305.362-.467-.15-.602-.31-1.287-.527-2.038a.869.869 0 0 0-1.281-.585c-.259.118-.388-.329.094-.529.447-.184 2.482-1.047 2.941.8.075.303.144.597.212.885l.246-.38c.085-.13.157-.246.218-.346.213-.368.476-.704.781-1 .214-.194.492-.301.781-.3a.8.8 0 0 1 .594.239.84.84 0 0 1 .238.619c.015.3-.1.59-.314.8a1.075 1.075 0 0 1-.767.3 2.1 2.1 0 0 1-.535-.069 5.572 5.572 0 0 1-.456-.138 1.662 1.662 0 0 0-.266.276zM7.223 5.4H8.5a.6.6 0 1 1 0 1.2H6.928c-.236 1.116-.614 3-.573 2.8-.105.506-.198.919-.297 1.318-.17.677-.36 1.312-.604 1.999-.587 1.652-1.397 2.363-2.395 2.363-.146 0-.283-.009-.412-.027-.627-.087-1.061-.549-1.305-1.273a.6.6 0 0 1 1.137-.383c.112.334.224.452.334.468.072.01.154.015.246.015.432 0 .833-.352 1.264-1.565.23-.65.41-1.248.57-1.889.096-.38.185-.778.287-1.27-.04.193.285-1.423.522-2.556H4.5a.6.6 0 1 1 0-1.2h1.472c.456-1.698 1.376-3.494 2.285-4.009.84-.476 1.634-.401 2.159.29a.6.6 0 0 1-.955.726c-.124-.163-.254-.175-.612.028-.51.289-1.218 1.642-1.627 2.965z",id:"alj形状结合"},null)])]):"COMMON"===t.bidimensiontype?T("svg",{class:n.em("content","item-icon-fx"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"bbd1.Base基础/1.icon图标/2.normal/View-report-fill","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M9 1.2v4.974h1V3.2h2v2.974h1.5a1.5 1.5 0 0 1 1.5 1.5v5.784a1.5 1.5 0 0 1-1.5 1.5h-11a1.5 1.5 0 0 1-1.5-1.5V7.674a1.5 1.5 0 0 1 1.5-1.5H4V3.2h2v2.974h1V1.2h2zM6 6.636H4v4.038h2V6.636zm1 4.038h2V6.636H7v4.038zm5-4.053h-2v4.053h2V6.621z",id:"bbd形状结合"},null)])]):T("svg",{class:n.em("content","item-icon-fx"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"alheditor/formula","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M12.663 11.027c-.117.142-.25.318-.4.527.09.88.404 1.722.913 2.446a.807.807 0 0 0 .951.051c.212-.071.317.313 0 .494a2.582 2.582 0 0 1-2.376.185 2.786 2.786 0 0 1-.918-1.726c-.101.152-.177.27-.223.346-.05.08-.121.194-.215.34a5.11 5.11 0 0 1-.776.993 1.134 1.134 0 0 1-.787.3.82.82 0 0 1-.832-.852 1.058 1.058 0 0 1 1.085-1.113c.176 0 .352.021.522.066.167.045.324.094.471.147a2.69 2.69 0 0 0 .264-.271c.129-.15.25-.305.362-.467-.15-.602-.31-1.287-.527-2.038a.869.869 0 0 0-1.281-.585c-.259.118-.388-.329.094-.529.447-.184 2.482-1.047 2.941.8.075.303.144.597.212.885l.246-.38c.085-.13.157-.246.218-.346.213-.368.476-.704.781-1 .214-.194.492-.301.781-.3a.8.8 0 0 1 .594.239.84.84 0 0 1 .238.619c.015.3-.1.59-.314.8a1.075 1.075 0 0 1-.767.3 2.1 2.1 0 0 1-.535-.069 5.572 5.572 0 0 1-.456-.138 1.662 1.662 0 0 0-.266.276zM7.223 5.4H8.5a.6.6 0 1 1 0 1.2H6.928c-.236 1.116-.614 3-.573 2.8-.105.506-.198.919-.297 1.318-.17.677-.36 1.312-.604 1.999-.587 1.652-1.397 2.363-2.395 2.363-.146 0-.283-.009-.412-.027-.627-.087-1.061-.549-1.305-1.273a.6.6 0 0 1 1.137-.383c.112.334.224.452.334.468.072.01.154.015.246.015.432 0 .833-.352 1.264-1.565.23-.65.41-1.248.57-1.889.096-.38.185-.778.287-1.27-.04.193.285-1.423.522-2.556H4.5a.6.6 0 1 1 0-1.2h1.472c.456-1.698 1.376-3.494 2.285-4.009.84-.476 1.634-.401 2.159.29a.6.6 0 0 1-.955.726c-.124-.163-.254-.175-.612.028-.51.289-1.218 1.642-1.627 2.965z",id:"alh形状结合"},null)])])},oe=function(){var e=b(y().mark((function e(t,a,n){var i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!f.value||k.value&&M.includes(k.value))){e.next=41;break}return e.next=3,null===(i=m)||void 0===i?void 0:i.dismiss();case 3:r=j(t),f.value=!0,e.prev=5,k.value=a,e.t0=a,e.next="UPDATE"===e.t0?10:"REMOVE"===e.t0?14:"FILTER"===e.t0?16:"CONFIG"===e.t0?19:"SORT"===e.t0?22:"CORDON"===e.t0?25:"AXIS"===e.t0?28:31;break;case 10:return l.value=n,o.value=n.pssysbicubemeasurename||n.pssysbicubedimensionname,D((function(){c.value.focus()})),e.abrupt("break",33);case 14:return ie(n),e.abrupt("break",33);case 16:return e.next=18,H(r,n);case 18:case 21:case 24:case 27:case 30:return e.abrupt("break",33);case 19:return e.next=21,q(r,n);case 22:return e.next=24,K(r,n);case 25:return e.next=27,Z(r,n);case 28:return e.next=30,Q(r,n);case 31:return e.next=33,te(r,n);case 33:e.next=38;break;case 35:throw e.prev=35,e.t1=e.catch(5),new z(e.t1);case 38:return e.prev=38,f.value=!1,e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[5,35,38,41]])})));return function(t,a,n){return e.apply(this,arguments)}}(),se=function(e){if(g.value.has(e.codename)){var t=g.value.get(e.codename);return T("div",{class:n.em("actions","group-item"),onPointerup:function(a){return oe(a,t.uiactionTag,e)}},[t.sysImage&&T(O("iBizIcon"),{icon:t.sysImage},null),T("span",null,[t.caption])])}},le=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"group",i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false"},[T("g",{id:"baxnormal/vertical-view-lines","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.092 8.854v-2c0-.163-.138-.3-.3-.3-.163 0-.3.137-.3.3v2c0 .163.137.3.3.3.162 0 .3-.137.3-.3zM14.869 7.3a.6.6 0 1 1 0 1.2H5.292v.354c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5V8.5H1.1a.6.6 0 0 1 0-1.2h1.192v-.446c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5V7.3h9.577zm-4.07-3.8v-2c0-.163-.139-.3-.3-.3-.164 0-.3.137-.3.3v2c0 .163.136.3.3.3.161 0 .3-.137.3-.3zm4.07-1.6a.6.6 0 1 1 0 1.2H12v.4c0 .825-.676 1.5-1.5 1.5-.826 0-1.5-.675-1.5-1.5v-.4H1.1a.6.6 0 1 1 0-1.2h7.898v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h2.871zM12.55 14.208v-2c0-.162-.138-.3-.3-.3-.162 0-.3.138-.3.3v2c0 .163.138.3.3.3.162 0 .3-.137.3-.3zm2.319-1.6a.6.6 0 0 1 0 1.201H13.75v.399c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5v-.399H1.1a.6.6 0 0 1 0-1.201h9.65v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h1.119z",id:"bax形状结合"},null)])]),r=null;return"UPDATE"===e.id?i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false"},[T("g",{id:"aiwaction/edit","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M2 8.34L10.71 0 15 4.17 6.538 13H2V8.34zm1.2.512V11.8h2.826l7.283-7.6-2.606-2.533L3.2 8.852zM0 16v-1.2h16V16H0z",id:"aiw编辑"},null)])]):"REMOVE"===e.id?i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"azaaction/trash","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.002 3.403V1a1 1 0 0 1 1-1h6.003a1 1 0 0 1 1 1v2.403h3.396a.6.6 0 1 1 0 1.2h-1.395V15a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4.603H.6a.6.6 0 1 1 0-1.2h3.4zm8.804 1.205H3.2V14.8h9.605V4.608zM5.202 1.2v2.155h5.603V1.2H5.202zm.6 6.417a.6.6 0 0 1 1.201 0v4.758a.6.6 0 0 1-1.2 0V7.617zm3.202 0a.6.6 0 0 1 1.2 0v4.758a.6.6 0 0 1-1.2 0V7.617z",id:"aza删除"},null)])]):"FILTER"===e.id?i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false",fill:"currentColor"},[T("g",{id:"akp1.Base基础/1.icon图标/2.normal/filter备份","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M1.6 2h12.8a.6.6 0 0 1 0 1.2H1.6a.6.6 0 1 1 0-1.2zm2.5 5.393h7.8a.6.6 0 0 1 0 1.2H4.1a.6.6 0 1 1 0-1.2zm2.5 5.416h2.8a.6.6 0 0 1 0 1.2H6.6a.6.6 0 1 1 0-1.2z",id:"akp形状结合"},null)])]):"CONFIG"===e.id?i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false",fill:"currentColor"},[T("g",{id:"bbhnormal/vertical-view-lines","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.092 8.854v-2c0-.163-.138-.3-.3-.3-.163 0-.3.137-.3.3v2c0 .163.137.3.3.3.162 0 .3-.137.3-.3zM14.869 7.3a.6.6 0 1 1 0 1.2H5.292v.354c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5V8.5H1.1a.6.6 0 0 1 0-1.2h1.192v-.446c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5V7.3h9.577zm-4.07-3.8v-2c0-.163-.139-.3-.3-.3-.164 0-.3.137-.3.3v2c0 .163.136.3.3.3.161 0 .3-.137.3-.3zm4.07-1.6a.6.6 0 1 1 0 1.2H12v.4c0 .825-.676 1.5-1.5 1.5-.826 0-1.5-.675-1.5-1.5v-.4H1.1a.6.6 0 1 1 0-1.2h7.898v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h2.871zM12.55 14.208v-2c0-.162-.138-.3-.3-.3-.162 0-.3.138-.3.3v2c0 .163.138.3.3.3.162 0 .3-.137.3-.3zm2.319-1.6a.6.6 0 0 1 0 1.201H13.75v.399c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5v-.399H1.1a.6.6 0 0 1 0-1.201h9.65v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h1.119z",id:"bbh形状结合"},null)])]):"SORT"===e.id?(i=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"avq1.Base基础/1.icon图标/2.normal/sort-positive-sequence","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.7 1.068v11.93l2.182-2.18.848.849-3.515 3.515-.582-.583H3.5v-.133l-2.8-2.8.849-.848L3.5 12.77V1.068h1.2zm9.771 8.082v.972l-2.779 3.527h1.711v-1.33H14.6v2.53h-4.558v-1.026l2.725-3.474h-1.57v.921H10V9.15h4.471zM11.791 1l1.11.014 1.474 5.785.938.001V8h-2.62V6.8l.382-.001-.198-.918h-1.354l-.24.918.504.001V8H9.19V6.8l.756-.001L11.792 1zm.478 2.038l-.498 1.898h.904l-.406-1.898z",id:"avq形状结合"},null)])]),r=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"abbnavigation/angle-right","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z",id:"abb形状结合",transform:"rotate(-90 7.978 8.252)"},null)])])):"CORDON"===e.id?i=T("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"a1.Base基础/1.icon图标/6.chart/Analytical-line","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M3.1,0.9 L3.1,12.9 L16.1,12.9 L16.1,14.1 L3.1,14.1 L3.1,16.1 L1.9,16.1 L1.9,14.1 L-0.1,14.1 L-0.1,12.9 L1.9,12.9 L1.9,0.9 L3.1,0.9 Z M14.4906668,8.9 L14.4906668,10.1 L11.2906668,10.1 L11.2906668,8.9 L14.4906668,8.9 Z M10.4906668,8.9 L10.4906668,10.1 L7.29066679,10.1 L7.29066679,8.9 L10.4906668,8.9 Z M6.49066679,8.9 L6.49066679,10.1 L4.78461538,10.1 L4.78461538,8.9 L6.49066679,8.9 Z M14.4906668,3.9 L14.4906668,5.1 L11.2906668,5.1 L11.2906668,3.9 L14.4906668,3.9 Z M10.4906668,3.9 L10.4906668,5.1 L7.29066679,5.1 L7.29066679,3.9 L10.4906668,3.9 Z M6.49066679,3.9 L6.49066679,5.1 L4.78461538,5.1 L4.78461538,3.9 L6.49066679,3.9 Z",id:"a形状结合"},null)])]):"AXIS"===e.id&&(i=T("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"b1.Base基础/1.icon图标/6.chart/Axis-settings","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.1,0.5 L4.099,11.5 L16,11.5 L16,12.7 L13.6,12.7 L13.6,14.9 L12.4,14.9 L12.4,12.7 L10.6,12.7 L10.6,14.9 L9.4,14.9 L9.4,12.7 L7.6,12.7 L7.6,14.9 L6.4,14.9 L6.4,12.7 L4.099,12.7 L4.1,15.7 L2.9,15.7 L2.899,12.7 L0,12.7 L0,11.5 L2.899,11.5 L2.899,9.7 L0.9,9.7 L0.9,8.5 L2.899,8.5 L2.899,6.7 L0.9,6.7 L0.9,5.5 L2.899,5.5 L2.899,3.7 L0.9,3.7 L0.9,2.5 L2.899,2.5 L2.9,0.5 L4.1,0.5 Z",id:"b形状结合"},null)])]),r=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"abbnavigation/angle-right","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z",id:"abb形状结合",transform:"rotate(-90 7.978 8.252)"},null)])])),T("div",{class:[n.em("actions","".concat(a,"-item")),n.is("delete","REMOVE"===e.id)],onPointerup:function(a){return oe(a,e.id,t)}},[i,T("span",{class:n.em("actions","item-text")},["group"===a&&e.caption,"expand"===a&&"FILTER"===e.id&&t.condition?1:""]),r])},ce=function(){if(o.value){var e=i.value.find((function(e){var t=e.pssysbicubedimensionid||e.pssysbicubemeasureid;return t===l.value.pssysbicubedimensionid||t===l.value.pssysbicubemeasureid}));e&&(Object.prototype.hasOwnProperty.call(e,"pssysbicubedimensionname")?e.pssysbicubedimensionname=o.value:e.pssysbicubemeasurename=o.value),l.value=null,o.value="",a("change",i.value)}else l.value=null},de=function(e){e&&"Enter"===e.code?ce():e&&"Escape"===e.code&&(e.stopPropagation(),l.value=null,o.value="")},pe=function(e){var t=function(e){if("COMMON"===e.bimeasuretype||e.aggtype){var t=aa.find((function(t){return t.value===e.aggtype}));if(t)return T("span",{class:n.em("aggmode","text")},[t.name])}return null}(e);return[t]},ue=function(t){return t.pssysbicubemeasureid?pe(t):function(t){return[T("div",{class:n.e("actions"),ref:h},[e.expandActions.map((function(e){return le(e,t,"expand")}))])]}(t)},he=function(e){var t=[];if("COMMON"===e.bimeasuretype||e.aggtype){var n=T(O("bi-aggmode-select"),{item:e,value:e.aggtype,onChange:function(t){return function(e,t){D((function(){f.value=!1,p.value.visible=!1,e.aggtype=t,a("extendChange","".concat(at.AGGMODE,"@").concat(e.codename),t)}))}(e,t)}},null);t.push(n)}return t},fe=function(t){if("dimension"===e.type){var a=T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false",fill:"currentColor"},[T("g",{id:"bbhnormal/vertical-view-lines","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.092 8.854v-2c0-.163-.138-.3-.3-.3-.163 0-.3.137-.3.3v2c0 .163.137.3.3.3.162 0 .3-.137.3-.3zM14.869 7.3a.6.6 0 1 1 0 1.2H5.292v.354c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5V8.5H1.1a.6.6 0 0 1 0-1.2h1.192v-.446c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5V7.3h9.577zm-4.07-3.8v-2c0-.163-.139-.3-.3-.3-.164 0-.3.137-.3.3v2c0 .163.136.3.3.3.161 0 .3-.137.3-.3zm4.07-1.6a.6.6 0 1 1 0 1.2H12v.4c0 .825-.676 1.5-1.5 1.5-.826 0-1.5-.675-1.5-1.5v-.4H1.1a.6.6 0 1 1 0-1.2h7.898v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h2.871zM12.55 14.208v-2c0-.162-.138-.3-.3-.3-.162 0-.3.138-.3.3v2c0 .163.138.3.3.3.162 0 .3-.137.3-.3zm2.319-1.6a.6.6 0 0 1 0 1.201H13.75v.399c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5v-.399H1.1a.6.6 0 0 1 0-1.201h9.65v-.4c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5v.4h1.119z",id:"bbh形状结合"},null)])]);return T("div",{class:[n.em("actions","group-item")],onPointerup:function(a){return function(t,a){"dimension"===e.type&&oe(t,"CONFIG",a)}(a,t)}},[a,T("span",null,[A("配置")])])}},me=function(t){var a=[],n=se(t);t.pssysbicubemeasureid?a.push.apply(a,d(he(t))):a.push.apply(a,d(function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if("period"!==e.type&&Kt(t.stddatatype)&&!a){var i=fe(t);n.push(i)}return n}(t,!!n)));var i=function(t){return e.actions.map((function(e){return le(e,t)}))}(t);return[n].concat(a,d(i))};E((function(){return e.value}),(function(t){i.value=t?e.value:[],N()}),{immediate:!0,deep:!0});var ve=function(){f.value||(p.value.visible=!1)};return S((function(){e.controller.evt.on("onDragTarget",(function(e){r.value=e,C.value=P(e).ok})),v=G(window,"keydown",(function(e){var t;27===e.keyCode&&(null===(t=m)||void 0===t||t.dismiss())})),window.addEventListener("pointerup",ve)})),R((function(){var e;v!==V&&v(),null===(e=m)||void 0===e||e.dismiss(),window.removeEventListener("pointerup",ve)})),{ns:n,onDrop:ne,onDragenter:function(e){e.preventDefault()},onDragleave:function(e){e.preventDefault()},onDragover:function(e){e.preventDefault()},renderItemText:function(e){var t=e.pssysbicubedimensionid||e.pssysbicubemeasureid,a=T("div",{class:n.em("content","item")},[T("div",{class:n.em("content","item-icon")},[re(e)]),T("div",{class:n.em("content","text")},[e.pssysbicubemeasurename||e.pssysbicubedimensionname]),ue(e),T("div",{class:n.em("content","icon")},[T(O("el-popover"),{visible:p.value.visible&&t===p.value.currentId,width:200,placement:"right","popper-class":n.e("actions-pop")},{default:function(){return T("div",{class:n.e("actions")},[me(e)])},reference:function(){return T("span",{onPointerup:function(e){return n=t,(a=e).stopPropagation(),a.preventDefault(),p.value.currentId=n,void(p.value.visible=!0);var a,n}},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"apr1.Base基础/1.icon图标/2.normal/more-vertical","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M8 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm0 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm0 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5z",id:"apr形状结合"},null)])])])}})])]),i=T("div",{class:n.e("ediotr")},[T(O("el-input"),{ref:function(e){c.value=e},modelValue:o.value,"onUpdate:modelValue":function(e){return o.value=e},autofocus:!0,onKeydown:de,onBlur:ce},{prefix:function(){return T("span",{class:n.em("editor","icon")},[re(e)])}})]);return!l.value||l.value.pssysbicubemeasureid!==t&&l.value.pssysbicubedimensionid!==t?a:i},checkType:P,checkState:function(){return e.controller.verifyErrorState(e.type,i.value,["MAXLIMIT","TYPELIMIT"],{targetItem:r.value})},onMoveEnd:function(){a("change",i.value)},showDrag:C,items:i,uuid:u}},render:function(){var e,t=this,a=[T("div",{class:[this.ns.e("no-select"),this.ns.is("empty_error",this.error&&!this.error.ok)]},[A("拖入"),this.caption]),T("div",{class:[this.ns.e("empty"),this.ns.is("error",this.error&&!this.error.ok)]},[null===(e=this.error)||void 0===e?void 0:e.msg])],n=T(ie,{modelValue:this.items,"onUpdate:modelValue":function(e){return t.items=e},draggable:".".concat(this.ns.e("item")),filter:".".concat(this.ns.e("empty")),onEnd:this.onMoveEnd,"force-fallback":!0,"chosen-class":"chosenClass",animation:"300",group:this.uuid,"fallback-class":!0,"fallback-on-body":!0,sort:!0},{item:function(e){var a=e.element;return T("div",{class:t.ns.e("item")},[t.renderItemText(a)])}});return T("div",{class:[this.ns.b()],onDrop:this.onDrop,onDragenter:this.onDragenter,onDragleave:this.onDragleave,onDragover:this.onDragover},[T("div",{class:[this.ns.e("content"),this.ns.is("draging",this.showDrag),this.ns.is("success",this.checkState().ok)]},[this.items.length>0?n:a]),T("div",{class:[this.ns.e("error-tip"),this.ns.is("visible",this.showDrag&&!this.checkState().ok)]},[this.checkState().msg])])}}),la=g({name:"BIChartPqlEditorModal",props:{fields:{type:Array,default:function(){return[]}},fieldIconMap:{type:Object,default:function(){return new Map}},value:{type:String,default:""},context:{type:Object,required:!0},params:{type:Object}},emits:{cancel:function(){return!0},confirm:function(e){return!0}},setup:function(e,t){var a=t.emit,n=s("chart-pql-editor-modal"),i=x(e.value),r=x();return{ns:n,currentValue:i,pqlEditor:r,handleChange:function(e){i.value=e},handleCancel:function(e){e.stopPropagation(),a("cancel")},handleConfirm:function(e){e.stopPropagation();try{var t,n;if(r.value)if(!(null===(t=(n=r.value).verify)||void 0===t?void 0:t.call(n)))return;a("confirm",i.value)}catch(o){ibiz.log.error(null==o?void 0:o.message)}},renderItem:function(t){return[T("div",{class:n.be("item","icon")},["measure"===e.fieldIconMap.get(t.value)?T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.236 9.9l.422-3.8H2.6a.6.6 0 1 1 0-1.2h2.19l.372-3.347a.6.6 0 1 1 1.192.133L5.998 4.9h4.793l.37-3.347a.6.6 0 0 1 1.193.133L11.998 4.9h2.459a.6.6 0 0 1 0 1.2h-2.592l-.421 3.8h2.013a.6.6 0 0 1 0 1.2H11.31l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H5.311l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H1.6a.6.6 0 0 1 0-1.2h2.636zm1.208 0h4.792l.422-3.8H5.865l-.421 3.8z"},null)])]):T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M9 1.2v4.974h1V3.2h2v2.974h1.5a1.5 1.5 0 0 1 1.5 1.5v5.784a1.5 1.5 0 0 1-1.5 1.5h-11a1.5 1.5 0 0 1-1.5-1.5V7.674a1.5 1.5 0 0 1 1.5-1.5H4V3.2h2v2.974h1V1.2h2zM6 6.636H4v4.038h2V6.636zm1 4.038h2V6.636H7v4.038zm5-4.053h-2v4.053h2V6.621z"},null)])])]),T("div",{class:n.be("item","text")},[t.label||""])]}}},render:function(){return T("div",{class:this.ns.b()},[T("div",{class:this.ns.b("header")},[A("PQL 筛选编辑器")]),T("div",{class:this.ns.b("content")},[T(O("iBizPqlEditor"),{ref:"pqlEditor",class:this.ns.e("pql-editor"),placeholder:"输入筛选条件",value:this.currentValue,fields:this.fields,context:this.context,params:this.params,renderItem:this.renderItem,onChange:this.handleChange},null)]),T("div",{class:this.ns.b("footer")},[T(O("el-button"),{text:!0,onClick:this.handleCancel},{default:function(){return[A("取消")]}}),T(O("el-button"),{onClick:this.handleConfirm},{default:function(){return[A("确认")]}})])])}}),ca=g({name:"BIChartPqlEditor",props:{controller:{type:Object,required:!0},value:{type:String,default:""}},emits:{change:function(e){return!0}},setup:function(e,t){var a,n=t.emit,i=s("chart-pql-editor"),r=x(""),o=["COMMON"],l=w((function(){var t,a;return[].concat(d(null===(t=e.controller.state.measure)||void 0===t?void 0:t.filter((function(e){return o.includes(e.bimeasuretype)}))),d(null===(a=e.controller.state.dimension)||void 0===a?void 0:a.filter((function(e){return o.includes(e.bidimensiontype)}))))})),c=x([]),p=x(new Map);E((function(){return l.value}),b(y().mark((function t(){var a,n,i,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(l.value.map(function(){var t=b(y().mark((function t(a){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut(a,e.controller.state.schemaFields||[]);case 2:return(n=t.sent)&&p.value.set(n.appDEFieldId,a.bimeasuretype?"measure":"dimension"),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:if(n=t.sent,c.value=n.filter((function(e){return!!e})),!(i=null===(a=e.controller.state.selectCube)||void 0===a?void 0:a.psdename)){t.next=10;break}return t.next=8,ibiz.hub.getAppDataEntity(i,e.controller.context.srfappid);case 8:(r=t.sent)&&c.value.forEach((function(e){e.appDataEntityFullTag=r.defullTag}));case 10:case"end":return t.stop()}}),t)}))),{immediate:!0}),E((function(){return e.value}),(function(){r.value=e.value||""}),{immediate:!0});var u=function(){var e;null===(e=a)||void 0===e||e.dismiss()},h=function(e){var t;r.value=e,null===(t=a)||void 0===t||t.dismiss(),n("change",r.value)},f=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return a=ibiz.overlay.createModal((function(){return L(la,{value:r.value,fields:c.value,fieldIconMap:p.value,context:e.controller.context,params:e.controller.viewParams,onCancel:u,onConfirm:h})}),void 0,{width:"40%",height:"70%"}),t.next=5,a.present();case 5:return t.next=7,a.onWillDismiss();case 7:a=void 0;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{ns:i,fields:c,currentValue:r,openModal:f}},render:function(){var e=this;return T("div",{class:this.ns.b()},[T(O("iBizPqlEditor"),{fields:this.fields,value:this.currentValue,readonly:!0,placeholder:"点击此处输入筛选条件",context:this.controller.context,params:this.controller.viewParams,onClick:function(t){t.stopPropagation(),e.openModal()}},null)])}});function da(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!M(e)}var pa=g({name:"BIReportProperty",components:{"bi-chart-types":it,"bi-drag-element":sa,"bi-collapse-item":rt,"bi-color-scheme":ft,"bi-font-border-select":vt,"bi-position-select":bt,"bi-chart-pql-editor":ca},props:{controller:{type:Object,required:!0}},emits:["reportChartTypeChange"],setup:function(e,t){var a=t.emit,n=s("property"),i=e.controller,r=x({data:[],style:"",paginationVisible:!1}),o=w((function(){return i.state.selectChartType})),l=w((function(){return i.state.reportChart})),c=x("data"),d=w((function(){return i.state.propertyData})),p=w((function(){return i.state.error})),u=w((function(){var e;return(null===(e=l.value)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.propertyConfig)||{}}));E((function(){return u.value}),(function(e){e&&e.data&&(r.value.data=[],e.data.details.forEach((function(e){"GROUP"===e.type&&r.value.data.push(e.id)}))),e&&e.style&&(r.value.style="",e.style.details.length>0&&(r.value.style=e.style.details[0].id))}),{immediate:!0,deep:!0});var h=function(e,t){i.setData(e,t)},f=function(e){e&&"Escape"===e.code&&e.stopPropagation()};return{ns:n,onReportChartTypeChange:function(e){a("reportChartTypeChange",e.type)},chartType:o,propertyConfig:u,selectTabValue:c,groupConfig:r,renderDetails:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){var a,r,o;return"GROUP"===t.type?T(O("bi-collapse-item"),{label:t.caption,required:t.required,name:t.id,enableSwitch:t.enableSwitch||!1,switchValue:null===(a=d.value)||void 0===a||null===(a=a[e][t.id])||void 0===a?void 0:a.show,enableShowEmptyData:t.showEmptyData||!1,enableRemove:t.enableRemove||!1,enableEditMode:t.switchEditMode||!1,onSwitchChange:function(a){return h("".concat(e,".").concat(t.id,".show"),a)},editMode:null===(r=d.value)||void 0===r||null===(r=r.extend)||void 0===r?void 0:r.filterMode,onSvgClick:function(a){!function(e,t,a,n){var i;switch(a){case"editMode":h(at.FILTERMODE,n);break;case"remove":if("filter"===t&&"pql"===(null===(i=d.value)||void 0===i||null===(i=i.extend)||void 0===i?void 0:i.filterMode))return void h(at.PQLVALUE,"");h("".concat(e,".").concat(t),null)}}(e,t.id,a.mode,a.value)}},da(o=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(a){var r,o,s,l,c,u,m,v,y,g,b,w,I,C,x,E,S,D,A;switch(a.editorType){case"DRAG":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","drag")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,"filter"===t&&"pql"===(null===(r=d.value)||void 0===r||null===(r=r.extend)||void 0===r?void 0:r.filterMode)?T(O("bi-chart-pql-editor"),{value:null===(o=d.value)||void 0===o||null===(o=o.extend)||void 0===o?void 0:o.pqlValue,controller:i,onChange:function(e){h(at.PQLVALUE,e)}},null):T(O("bi-drag-element"),{value:null===(s=d.value)||void 0===s?void 0:s[e][t],controller:i,caption:a.caption,subCaption:a.subCaption,multiple:a.multiple,type:a.id,actions:a.actions,expandActions:a.expandActions,error:null===(l=p.value)||void 0===l?void 0:l[t],onChange:function(a){h("".concat(e,".").concat(t),a)},onExtendChange:function(e,t){h(e,t)}},null)]);case"COLOR":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","color")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("bi-color-scheme"),{editorStyle:a.editorStyle,value:null===(c=d.value)||void 0===c?void 0:c[e][t],onChange:function(a){return h("".concat(e,".").concat(t),a)}},null)]);case"FONT":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","font")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("bi-font-border-select"),{value:null===(u=d.value)||void 0===u||null===(u=u[e][t])||void 0===u?void 0:u[a.id],mode:a.mode,disabled:!(null!==(m=d.value)&&void 0!==m&&null!==(m=m[e][t])&&void 0!==m&&m.show),fontMax:a.fontMax,onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},null)]);case"CHECKBOX":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","checkbox")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("el-checkbox"),{"model-value":null===(v=d.value)||void 0===v||null===(v=v[e][t])||void 0===v?void 0:v[a.id],disabled:!(null!==(y=d.value)&&void 0!==y&&null!==(y=y[e][t])&&void 0!==y&&y.show),label:a.caption,size:"large",onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},null)]);case"CHECKBOXS":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","checkboxs")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("el-checkbox-group"),{"model-value":null===(g=d.value)||void 0===g||null===(g=g[e][t])||void 0===g?void 0:g[a.id],disabled:!(null!==(b=d.value)&&void 0!==b&&null!==(b=b[e][t])&&void 0!==b&&b.show),onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},da(D=a.items.map((function(e){return T(O("el-checkbox"),{value:e.id,label:e.id,size:"default"},{default:function(){return[e.label]}})})))?D:{default:function(){return[D]}})]);case"RADIO":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","radio")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("el-radio-group"),{"model-value":null===(w=d.value)||void 0===w||null===(w=w[e][t])||void 0===w?void 0:w[a.id],disabled:!(null!==(I=d.value)&&void 0!==I&&null!==(I=I[e][t])&&void 0!==I&&I.show),onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},da(A=a.items.map((function(e){return T(O("el-radio"),{value:e.id,label:e.id,size:"default"},{default:function(){return[e.label]}})})))?A:{default:function(){return[A]}})]);case"POSITION":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","pos")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("bi-position-select"),{value:null===(C=d.value)||void 0===C||null===(C=C[e][t])||void 0===C?void 0:C[a.id],disabled:!(null!==(x=d.value)&&void 0!==x&&null!==(x=x[e][t])&&void 0!==x&&x.show),editorStyle:a.editorStyle,showCenter:a.showCenter,onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},null)]);case"ENDPOINT":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","endpoint")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("el-input-number"),{modelValue:null===(E=d.value)||void 0===E||null===(E=E[e][t])||void 0===E?void 0:E[a.id],min:1,"controls-position":"right",onkeydown:f,onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},null)]);case"NUMBER":return T("div",{class:[n.em("chart-setting","item"),n.em("chart-setting","label-interval")]},[a.showCaption?T("div",{class:n.em("chart-setting","label")},[a.caption]):null,T(O("el-input-number"),{modelValue:null===(S=d.value)||void 0===S||null===(S=S[e][t])||void 0===S?void 0:S[a.id],min:0,step:1,precision:0,"controls-position":"right",onkeydown:f,onChange:function(n){return h("".concat(e,".").concat(t,".").concat(a.id),n)}},null)]);default:return T("div",{class:n.e("no-support")},["".concat((a.caption,t),"暂未实现")])}}))}(e,t.details,t.id))?o:{default:function(){return[o]}}):null}))},renderPagination:function(){return T("div",{class:n.e("chart-pagination")},[T("span",{class:n.em("chart-pagination","caption")},[A("显示条数:")]),T(O("el-popover"),{visible:r.value.paginationVisible,"onUpdate:visible":function(e){return r.value.paginationVisible=e},trigger:"click",placement:"top-start",width:240,"popper-class":n.em("chart-pagination","list")},{reference:function(){var e;return T("span",{class:n.em("chart-pagination","size")},[T("span",{class:n.em("chart-pagination","pagination-number")},[(null===(e=d.value)||void 0===e?void 0:e.data.size)||100]),T("span",{class:n.em("chart-pagination","icon")},[T("span",null,[A("条")]),T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor"},[T("g",{id:"aaynavigation/angle-down","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.978 11.997l-.005.006L2.3 6.33l.83-.831 4.848 4.848L12.826 5.5l.83.83-5.673 5.673-.005-.006z",id:"aay形状结合"},null)])])])])},default:function(){return[10,50,100,1e3,5e3].map((function(e){var t;return T("div",{class:[n.em("chart-pagination","pagination-item"),n.is("selected",e===(null===(t=d.value)||void 0===t?void 0:t.data.size))],onClick:function(){var t;t=e,r.value.paginationVisible=!1,h("data.size",t)}},[e])}))}})])}}},render:function(){var e=this;return T("div",{class:this.ns.b("container")},[T("div",{class:this.ns.e("caption")},[A("图表类型")]),T("div",{class:this.ns.e("chart-types")},[T(O("bi-chart-types"),{onSelect:this.onReportChartTypeChange,chartType:this.chartType},null)]),T("div",{class:[this.ns.e("style-select"),this.ns.is("style","style"===this.selectTabValue)]},[T(O("el-tabs"),{modelValue:this.selectTabValue,"onUpdate:modelValue":function(t){return e.selectTabValue=t},type:"card"},{default:function(){return[T(O("el-tab-pane"),{name:"data"},{default:function(){var t,a;return T("div",{class:e.ns.e("chart-setting")},[T(O("el-collapse"),{class:e.ns.b("editor-collapse"),accordion:!1,modelValue:e.groupConfig.data,"onUpdate:modelValue":function(t){return e.groupConfig.data=t}},da(a=e.renderDetails("data",null===(t=e.propertyConfig)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.details))?a:{default:function(){return[a]}})])},label:function(){return T("div",{class:e.ns.e("data")},[A("数据")])}}),T(O("el-tab-pane"),{name:"style"},{default:function(){var t,a;return T("div",{class:e.ns.e("chart-setting")},[T(O("el-collapse"),{class:e.ns.b("editor-collapse"),accordion:!0,modelValue:e.groupConfig.style,"onUpdate:modelValue":function(t){return e.groupConfig.style=t}},da(a=e.renderDetails("style",null===(t=e.propertyConfig)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.details))?a:{default:function(){return[a]}})])},label:function(){return T("div",{class:e.ns.e("style")},[A("样式")])}})]}})])])}}),ua=function(){function e(){f(this,e),C(this,"providers",new Map)}return v(e,[{key:"register",value:function(e,t){this.providers.set(e,t)}},{key:"unRegister",value:function(e){this.providers.delete(e)}},{key:"get",value:function(e){var t=this.providers.get(e);if(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}}}]),e}(),ha="REPORT_CHART",fa=new ua;function ma(e,t){fa.register("".concat(ha,"_").concat(e),t)}function va(e){return fa.get("".concat(ha,"_").concat(e))}var ya=function(){function e(){f(this,e),C(this,"verifyMap",new Map),C(this,"config",{}),C(this,"schemaFields",[]),this.initVerifyMap()}return v(e,[{key:"initVerifyMap",value:function(){this.verifyMap.set("ENABLECALC",this.checkEnableDragCalcField),this.verifyMap.set("MAXLIMIT",this.checkLimit),this.verifyMap.set("TYPELIMIT",this.checkTypeLimit),this.verifyMap.set("REQUIRE",this.checkRequire)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.schemaFields=e,this.config=t}},{key:"verifyState",value:function(e,t,a,n){var i=this,r=["ENABLECALC","MAXLIMIT","TYPELIMIT","REQUIRE"],o={ok:!0,msg:""};return a&&0!==a.length&&(r=a),r.some((function(a){var r=i.verifyMap.get(a);if(r){var s=r(e,t,i.schemaFields,i.config,I(I({},n),{},{that:i}));if(s&&!s.ok)return o=s,!0}return!1})),o}},{key:"checkRequire",value:function(e,t,a,n,i){var r=n.details.find((function(t){return t.id===e}));return r&&r.required&&(!t||t&&Array.isArray(t)&&0===t.length)?{ok:!1,msg:"".concat(r.caption.split("/")[0],"不能为空")}:{ok:!0,msg:""}}},{key:"checkLimit",value:function(e,t,a,n,i){var r=n.details.find((function(t){return t.id===e})),o={ok:!0,msg:""};if(!r)return o;var s=r.details[0];return s&&s.multiple&&t&&Array.isArray(t)&&t.length>=s.max?{ok:!1,msg:"".concat(s.caption.split("/")[0],"最多支持").concat(s.max,"个")}:o}},{key:"checkTypeLimit",value:function(e,t,a,n,i){var r,o=i.targetItem,s=i.that,l=n.details.find((function(t){return t.id===e})),c={ok:!0,msg:""};if(!l||!o)return c;var d=l.details[0];if(!d.typeLimit)return c;var p={ok:!1,msg:"该维度不支持".concat(d.subCaption||d.caption)},u=null==o||null===(r=o.psdefid)||void 0===r?void 0:r.split(".").at(-1),h=d.typeLimit,f=h.tag,m=h.types;if(m.includes("DATE")){var v=s.checkIsDate(o);if("IN"===f&&v)return c;if("NOTIN"===f&&v)return p}var y=a.find((function(e){return e.appDEFieldId===u}));if(!y)return p;var g=m.includes(y.type.toUpperCase());return"NOTIN"===f&&(g=!g),g?c:p}},{key:"checkIsDate",value:function(e){return!(!e||27!==e.stddatatype&&5!==e.stddatatype)}},{key:"checkEnableDragCalcField",value:function(e,t,a,n,i){var r=n.details.find((function(t){return t.id===e})),o={ok:!0,msg:""};if(!r)return o;var s=r.details[0];if(!s.disableCalcField)return o;var l={ok:!1,msg:"该维度不支持".concat(s.subCaption||s.caption)},c=i.targetItem;return c&&c.bidimensiontype&&"COMMON"!==c.bidimensiontype&&s.disableCalcField?l:o}}]),e}(),ga=function(){function e(t,a,n,i,r,o){f(this,e),C(this,"evt",new st),C(this,"allAppBICubes",[]),C(this,"state",void 0),C(this,"backupData",{}),C(this,"verifyController",void 0),this.context=t,this.viewParams=a,this.config=n,this.dismiss=i,this.measureToolbar=r,this.dimensionToolbar=o,this.verifyController=new ya,this.initState()}var t,a,n,i,r,o,s,l,d,p,u,h,m,g,w,T,x,E,S;return v(e,[{key:"getDefaultValue",value:function(e,t){var a=nt(e),n=a.chartDefaultValue,i=a.chartConfig,r=H(n);return t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(e){"data"===e?Object.keys(t.data).forEach((function(e){if(Object.prototype.hasOwnProperty.call(r.data,e)){var a,n=null==i?void 0:i.data.details.find((function(t){return t.id===e}));if(!n)return;if(n&&n.details[0].multiple)r.data[e]=t.data[e];else r.data[e]=null===(a=t.data[e])||void 0===a?void 0:a.slice(0,1)}})):r[e]=t[e]})),r}},{key:"initState",value:function(){var e=this.config.selectChartType;this.state={},this.state.isCreated=!1,this.state.scheme=[],this.state.selectedScheme=void 0,this.state.cube=[],this.state.selectCube=void 0,this.state.measure=[],this.state.dimension=[],this.state.selectChartType=e,this.state.propertyData=this.getDefaultValue(this.config.selectChartType,this.config.propertyData),this.state.reportChart=void 0,this.state.schemaFields=[],this.state.dataChangeState=!1,this.state.reportModel=void 0,this.state.error={}}},{key:"verifyErrorState",value:function(e,t,a,n){return this.verifyController.verifyState(e,t,a,n)}},{key:"initErrorState",value:function(){var e=this;this.state.error={};var t=nt(this.state.selectChartType).chartConfig;if(t){var a=t.data;if(a&&a.details){var n=a.details.filter((function(e){return!0===e.required}));n&&0!==n.length&&n.forEach((function(t){e.state.error[t.id]={ok:!0,msg:""}}))}}}},{key:"setBackUpData",value:function(e){this.backupData=H({propertyData:e,selectChartType:this.state.selectChartType,selectCube:this.state.selectCube})}},{key:"created",value:(S=b(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchSchemeDetails();case 2:return e.next=4,this.mergeSourceParams();case 4:return this.setBackUpData(this.state.propertyData),e.next=7,this.compileAppBIReport(this.state.propertyData);case 7:return(t=e.sent)&&(this.state.reportModel=t),e.next=11,this.initFilters();case 11:this.initVerifyState(),this.state.isCreated=!0;case 13:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"mergeSourceParams",value:(E=b(y().mark((function e(){var t,a=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.propertyData.data)&&t.measure&&t.measure.length>0&&t.measure.forEach((function(e,t){var n=a.state.measure.find((function(t){return t.pssysbicubemeasureid===e.pssysbicubemeasureid}));n&&(a.state.propertyData.data.measure[t]=Object.assign(H(n),e))})),t&&t.dimension&&t.dimension.length>0&&t.dimension.forEach((function(e,t){var n=a.state.dimension.find((function(t){return t.pssysbicubedimensionid===e.pssysbicubedimensionid}));n&&(a.state.propertyData.data.dimension[t]=Object.assign(H(n),e))}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"destroyed",value:(x=b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)})},{key:"fetchSchemeDetails",value:(T=b(y().mark((function e(){var t,a,n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.selectCubeId,e.next=3,this.fetchCube();case 3:if(this.allAppBICubes=e.sent,a={},!(this.allAppBICubes&&this.allAppBICubes.length>0)){e.next=21;break}if(this.allAppBICubes.forEach((function(e){var i={id:e.pssysbischemeid,name:e.pssysbischemename};t===e.pssysbicubeid&&(n.state.selectedScheme=i,n.state.selectCube=e,n.context.pssysbicube=e.pssysbicubeid),a[e.pssysbischemeid]=i})),this.state.scheme=Object.values(a),!this.state.selectedScheme&&this.state.scheme.length>0&&(this.state.selectedScheme=this.state.scheme[0]),this.state.selectedScheme){e.next=11;break}return e.abrupt("return");case 11:if(this.state.cube=this.allAppBICubes.filter((function(e){return e.pssysbischemeid===n.state.selectedScheme.id})),!this.state.selectCube&&this.state.cube.length>0&&(this.state.selectCube=this.state.cube[0],this.context.pssysbicube=this.state.selectCube.pssysbicubeid),this.context.pssysbicube){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,this.fetchCubeMeasure(this.context.pssysbicube);case 17:return this.state.measure=e.sent,e.next=20,this.fetchCubeDimension(this.context.pssysbicube);case 20:this.state.dimension=e.sent;case 21:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"initFilters",value:(w=b(y().mark((function e(){var t,a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.selectCube,a=[],!t){e.next=10;break}return e.next=5,Pt(t.psdename);case 5:if(!(n=e.sent)){e.next=10;break}return e.next=9,zt(n);case 9:a=e.sent;case 10:this.state.schemaFields=a;case 11:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"fetchCube",value:(g=b(y().mark((function e(){var t,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ibiz.hub.getApp(ibiz.env.appId),e.next=3,t.deService.exec("pssysbicube","fetchdefault",this.context,this.viewParams);case 3:return a=e.sent,e.abrupt("return",a.data||[]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"fetchCubeMeasure",value:(m=b(y().mark((function e(t){var a,n,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I(I({},this.viewParams),{n_pssysbicubeid_eq:t,size:1e3}),n=ibiz.hub.getApp(ibiz.env.appId),e.next=4,n.deService.exec("pssysbicubemeasure","fetchdefault",this.context,a);case 4:return i=e.sent,e.abrupt("return",i.data||[]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"fetchCubeDimension",value:(h=b(y().mark((function e(t){var a,n,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I(I({},this.viewParams),{n_pssysbicubeid_eq:t,size:1e3}),n=ibiz.hub.getApp(ibiz.env.appId),e.next=4,n.deService.exec("pssysbicubedimension","fetchdefault",this.context,a);case 4:return i=e.sent,e.abrupt("return",i.data||[]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"refreshCubeDetails",value:(u=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("measure"!==t){e.next=6;break}return e.next=5,this.fetchCubeMeasure(this.context.pssysbicube);case 5:this.state.measure=e.sent;case 6:if("dimension"!==t){e.next=10;break}return e.next=9,this.fetchCubeDimension(this.context.pssysbicube);case 9:this.state.dimension=e.sent;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"compileAppBIReport",value:(p=b(y().mark((function e(t){var a,n,i,r,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(this.context),Object.assign(a,{pssysbireport:"__UNKNOWN__"}),e.next=4,ibiz.util.biReport.translateDataToAppBIReport({reportTag:this.config.reportTag,selectChartType:this.state.selectChartType,selectCubeId:this.state.selectCube.pssysbicubeid,caption:t.caption,data:t.data,style:t.style,extend:t.extend});case 4:return n=e.sent,i=ibiz.hub.getApp(ibiz.env.appId),e.next=8,i.deService.exec("pssysbireport","compileappbireport",a,n);case 8:if(!(r=e.sent)||!r.data){e.next=15;break}return e.next=12,ibiz.hub.translationModelToDsl(r.data,"APPBIREPORT");case 12:return(o=e.sent).appBISchemeId=this.config.selectedSchemeId,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"computeAppBIReportModel",value:(d=b(y().mark((function e(t,a){var n,i,r,o,s,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"caption"===t&&(n.name=a),t.startsWith("style")&&(s={selectChartType:this.state.selectChartType,style:this.state.propertyData.style},null!==(i=this.state.propertyData.data)&&void 0!==i&&i.filter&&Object.assign(s,{filter:this.state.propertyData.data.filter}),null!==(r=this.state.propertyData.data)&&void 0!==r&&r.period&&Object.assign(s,{period:this.state.propertyData.data.period}),(null===(o=this.state.propertyData.data)||void 0===o||null===(o=o.group)||void 0===o?void 0:o.length)>0&&(l=this.state.propertyData.data.group.map((function(e){return e.pssysbicubedimensionid})),Object.assign(s,{group:l})),this.state.propertyData.extend&&Object.assign(s,{extend:this.state.propertyData.extend}),n.reportUIModel=JSON.stringify(s)),!t.startsWith("data")){e.next=10;break}return e.next=6,this.compileAppBIReport(this.state.propertyData);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:n=e.t0;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"checkData",value:function(e,t){this.state.error[e]=this.verifyErrorState(e,t,["REQUIRE"])}},{key:"setData",value:(l=b(y().mark((function e(t,a){var n,i,r,o,s,l,d,p;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.indexOf(".")){n=t.split("."),i=this.state.propertyData,r=c(n.slice(0,-1));try{for(r.s();!(o=r.n()).done;)s=o.value,i=i[s]}catch(u){r.e(u)}finally{r.f()}l=n[n.length-1],null===a?delete i[l]:i[l]=a,this.checkData(l,a)}else this.state.propertyData[t]=a;if(this.state.dataChangeState=!0,!(d=this.state.reportChart)){e.next=9;break}return e.next=6,this.computeAppBIReportModel(t,a);case 6:return p=e.sent,e.next=9,d.handleValueChange(t,a,p);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"switchScheme",value:(s=b(y().mark((function e(t){var a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.state.scheme.length){e.next=2;break}return e.abrupt("return");case 2:if(a=this.state.scheme.find((function(e){return e.id===t}))){e.next=5;break}return e.abrupt("return");case 5:if(this.state.selectedScheme=a,n=this.allAppBICubes.filter((function(e){return e.pssysbischemeid===a.id})),this.state.cube=n||[],0!==this.state.cube.length){e.next=12;break}return this.state.selectCube=void 0,delete this.context.pssysbicube,e.abrupt("return");case 12:if(this.state.selectCube=this.state.cube[0],this.context.pssysbicube=this.state.selectCube.pssysbicubeid,this.context.pssysbicube){e.next=18;break}return this.state.measure=[],this.state.dimension=[],e.abrupt("return");case 18:return e.next=20,this.fetchCubeMeasure(this.context.pssysbicube);case 20:return this.state.measure=e.sent,e.next=23,this.fetchCubeDimension(this.context.pssysbicube);case 23:this.state.dimension=e.sent;case 24:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"switchCube",value:(o=b(y().mark((function e(t){var a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=this.allAppBICubes.find((function(e){return e.pssysbicubeid===t}))){e.next=7;break}return this.state.selectCube=void 0,delete this.context.pssysbicube,e.abrupt("return");case 7:if(this.state.selectCube=a,this.context.pssysbicube=this.state.selectCube.pssysbicubeid,this.context.pssysbicube){e.next=13;break}return this.state.measure=[],this.state.dimension=[],e.abrupt("return");case 13:return e.next=15,this.fetchCubeMeasure(this.context.pssysbicube);case 15:return this.state.measure=e.sent,e.next=18,this.fetchCubeDimension(this.context.pssysbicube);case 18:return this.state.dimension=e.sent,this.evt.emit("onSelectedCube",{tag:t}),e.next=22,this.initFilters();case 22:return this.initVerifyState(),e.next=25,this.switchReportType(this.state.selectChartType,!1);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"initVerifyState",value:function(){var e;this.initErrorState();var t=nt(this.state.selectChartType).chartConfig;null===(e=this.verifyController)||void 0===e||e.init(this.state.schemaFields,t.data)}},{key:"switchReportType",value:(r=b(y().mark((function e(t){var a,n,i,r,o,s=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(s.length>1&&void 0!==s[1])||s[1],this.state.reportModel=void 0,this.state.dataChangeState=!0,this.state.selectChartType=t,n=H(this.state.propertyData),i={caption:n.caption},a&&Object.assign(i,{data:n.data}),r=this.getDefaultValue(t,i),e.next=10,this.compileAppBIReport(r);case 10:(o=e.sent)&&(this.state.reportModel=o,this.state.propertyData=r),this.initVerifyState(),this.evt.emit("onSelectedReportType",{tag:t});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setReportChart",value:(i=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.reportChart=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"close",value:(n=b(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.dataChangeState){e.next=7;break}return e.next=3,ibiz.confirm.warning({title:"确认返回",desc:"返回则无法保存编辑的信息。"});case 3:t=e.sent,this.dismiss&&t&&this.dismiss({ok:!0,data:[]}),e.next=8;break;case 7:this.dismiss&&this.dismiss({ok:!0,data:[]});case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"save",value:(a=b(y().mark((function e(){var t,a,n,i,r,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={ok:!1},!(a=this.state.reportChart)){e.next=8;break}return e.next=5,a.checkData();case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return n={reportTag:this.config.reportTag,selectChartType:this.state.selectChartType,selectCubeId:this.state.selectCube.pssysbicubeid,caption:this.state.propertyData.caption,data:this.state.propertyData.data,style:this.state.propertyData.style,extend:this.state.propertyData.extend},e.next=11,ibiz.util.biReport.translateDataToAppBIReport(n);case 11:return i=e.sent,r=H(this.context),o=ibiz.hub.getApp(ibiz.env.appId),e.prev=14,e.next=17,o.deService.exec("pssysbireport","update",r,i);case 17:(s=e.sent)&&s.data&&(t.data=s.data,this.setBackUpData(this.state.propertyData),ibiz.message.success("保存成功")),this.state.dataChangeState=!1,e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(14),new z(e.t0.message);case 25:this.dismiss&&this.dismiss(t);case 26:case"end":return e.stop()}}),e,this,[[14,22]])}))),function(){return a.apply(this,arguments)})},{key:"cancel",value:(t=b(y().mark((function e(){var t,a,n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.dataChangeState){e.next=12;break}return this.state.reportModel=void 0,t=H(this.backupData),a=t.propertyData,n=t.selectChartType,i=t.selectCube,this.state.propertyData=a,this.state.selectChartType=n,this.state.selectCube=i,e.next=8,this.compileAppBIReport(a);case 8:(r=e.sent)&&(this.state.reportModel=r),this.state.dataChangeState=!1,H(this.backupData);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOptItemAction",value:function(e,t){var a=this,n=new $;return null!=t&&t.length?(t.forEach((function(e){var t=e.uiactionId;if(t){var i=new K(e.id,a.context.srfappid,t);n.addState(e.id,i)}})),n.update(this.context,e),n):(ibiz.log.debug(ibiz.i18n.t("runtime.controller.control.dataView.noBehaviourGroupAction")),n)}}]),e}(),ba=function(){function e(t){f(this,e),C(this,"legendGap",20),this.controller=t}var t;return v(e,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e,a,n){return t.apply(this,arguments)})},{key:"getLegendOPtions",value:function(e){var t={type:"scroll"};return"left"!==e&&"right"!==e||(t.orient="vertical",t[e]=this.legendGap,t.top="middle"),"top"!==e&&"bottom"!==e||(t.left="center",t.top=e),"left-top"===e&&(t.left=this.legendGap,t.top="top"),"right-top"===e&&(t.right=this.legendGap,t.top="top"),"left-bottom"===e&&(t.left=this.legendGap,t.top="bottom"),"right-bottom"===e&&(t.right=this.legendGap,t.top="bottom"),t}},{key:"getDefaultGridOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={show:!1,left:"5%",right:"5%"};return["left-top","right-top","top"].includes(e)&&(t.bottom=70),["left-bottom","right-bottom","bottom"].includes(e)&&(t.top=30),"left"===e&&(t.top=30,t.bottom=70,t.right=0),"right"===e&&(t.top=30,t.bottom=70,t.let=0),JSON.stringify(t)}},{key:"axisLabel",value:function(){var e={formatter:"function(param) {\n      if (param && param.includes(' ')) {\n        const time = new Date(param);\n        if (time.toString() !== 'Invalid Date') {\n          return time.toLocaleDateString().replaceAll('/','-');\n        }\n      }\n      return param.split('_').pop();\n    }"};return e}},{key:"computeLabelEllipsis",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?{width:60*(e>0?e:1),overflow:"truncate",ellipsis:"..."}:{}}},{key:"computeAxisLayout",value:function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"RIGHT"===(null===(a=t.extend)||void 0===a?void 0:a["axis@".concat(e.valueField)])?n?{"EC.xAxisIndex":1}:{"EC.yAxisIndex":1}:{}}}]),e}(),wa=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,d,p,u,h,f=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=f.length>2&&void 0!==f[2]?f[2]:{}).appDataEntityId,o=i.items,s=i.mode,r&&a&&t){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return l={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name,catalog:"$catalog",value:null===(n=t.appBIReportMeasures)||void 0===n?void 0:n[0].measureTag},wt(a,(function(e){return It(e,l)})),t&&(d=this.transform(t,o),p=d.params,u=d.seriesParams,Object.assign(a,{userParam:p}),null===(c=a.dechartSerieses)||void 0===c||c.forEach((function(e){Object.assign(e,{userParam:u})}))),"CONTENT"===s&&(h=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(a,{controlParam:{ctrlParams:{ENABLEDRILLDETAIL:h}}})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"transform",value:function(e,t){var a={"EC.color":JSON.stringify([])},n=e.reportUIModel,i=e.appBIReportMeasures,r=!1;i[0].jsonFormat&&(r=!0);var o,s={"EC.type":"gauge","EC.radius":"90%","EC.startAngle":"220","EC.endAngle":"-40","EC.splitNumber":"4","EC.tooltip":"{\n        formatter:function(param){\n          let value = param.value[0];\n          if(".concat(r,"){\n            value = ibiz.util.text.format(String(value), '").concat(i[0].jsonFormat,'\') || value;\n          }\n          return "<div style=\'min-width:150px\'><div>"+ param.seriesId +"</div><div><span style=\'margin-right:16px\'>"+ param.marker + param.name+"</span>"+ value+"</div></div>"\n        }\n      }'),"EC.axisTick":'{"splitNumber":5,"distance":5,"lineStyle":{"width":2,"color":"#ddd"}}',"EC.splitLine":'{"length":10,"distance":5,"lineStyle":{"width":2,"color":"#ddd"}}',"EC.title":'{"show":false}',"EC.pointer":'{"length":"50%"}',"EC.detail":'{"offsetCenter":[0,"60%"]}',"EC.progress":'{"show":true,"width":60}',"EC.axisLine":'{"lineStyle":{"width":60,"color":[[1,"rgb(245, 245, 245)"]]}}',"EC.axisLabel":'{"distance":76,"color":"#333","fontSize":12,"formatter": "function (num){return (num * 100) / 100 + `%` }"}'};if(n){var l=JSON.parse(n);l.style&&(o=l.style)}if(o){var c=o,d=c.graphics,p=c.fontSetting,u=c.featureSetting;if(d&&(d.color&&"string"==typeof d.color&&(a["EC.color"]=JSON.stringify([d.color])),Array.isArray(d.color)&&(a["EC.color"]=JSON.stringify(d.color))),p){var h=p.font||{},f=h.fontWeight,m=h.fontStyle,v=h.fontSize,y=h.color;s["EC.detail"]=JSON.stringify({offsetCenter:[0,"60%"],fontWeight:f,fontStyle:m,fontSize:v,color:y,formatter:"function (value) {\n            let tempValue = value;\n            if('".concat(i[0].jsonFormat,"' !== 'undefined'){\n              tempValue = ibiz.util.text.format(String(value), '").concat(i[0].jsonFormat,"')\n            }\n            return tempValue;\n          }")})}if(u){var g=u.endpoint;s["EC.max"]=JSON.stringify(g),s["EC.axisLabel"]=JSON.stringify({distance:76,color:"#333",fontSize:12,formatter:"function (num){return (num * 100) / '".concat(g,"' + '%' }")})}}return{params:a,seriesParams:s,axisParams:{}}}}]),i}(ba),Ia=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({},E.computeAxisLayout(e,u,!0)),E.computeMaxMin(b,o,e)),Ot(h,e,!0,!0))})}))),w={MODE:"ROW"},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}}),e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[0] === ".concat(o," || param.value[0] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[0];\n        }\n        return '';\n          }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[0];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n                return param.value[0];\n              }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f)}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D={show:!!y,type:"value",showTitle:g,nameLocation:"center",nameTextStyle:I({lineHeight:60},b),axisLabel:I({show:!!w},C),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(D)}if(h){var O=h.show,A=h.showTitle,M=h.titleFont,L=h.showLabel,R=h.labelFont,k=h.showAxisline,F=h.axisline,N=h.showGridline,P=h.gridline,B=h.enableLabelInterval,z=h.labelInterval,G={show:!!O,type:"category",name:A?void 0:"",nameTextStyle:I({},M),axisLabel:I(I(I({show:!!L,interval:B?z:"auto"},this.axisLabel()),R),this.computeLabelEllipsis(B,z)),axisLine:{show:!!k,lineStyle:{type:"doubleDashed"===F.borderStyle?[15]:F.borderStyle,width:F.borderSize,color:F.color}},splitLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}},{key:"axisLabel",value:function(){var e={formatter:"function(param) {\n      if (param && param.includes(' ')) {\n        const time = new Date(param);\n        if (time.toString() !== 'Invalid Date') {\n          return time.toLocaleDateString().replaceAll('/','-');\n        }\n      }\n      if(param.indexOf('_') < 0){\n        return param;\n      }\n      const str = param.split('_').pop();\n      if(str.length > 4){\n        return str.slice(0,4) + '...'\n      }\n      return str;\n    }"};return e}}]),i}(ba),Ca=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({},E.computeAxisLayout(e,u)),E.computeMaxMin(b,o,e)),Ot(h,e))})})),w={},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n          }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n            return param.value[1];\n          }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f)}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameTextStyle:I({},R),axisLabel:I({show:!!k},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}}]),i}(ba),Ta=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({"EC.barWidth":"50%","EC.barMaxWidth":"36"},E.computeAxisLayout(e,u)),E.computeMaxMin(b,o,e)),Ot(h,e,!0))})})),w={},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {        \n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&(c.color&&"string"==typeof c.color&&(i["EC.color"]=JSON.stringify([c.color])),Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color))),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n                return param.value[1];\n              }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f)}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},minorSplitLine:{show:!1},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameTextStyle:I({},R),axisLabel:I({show:!!k},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},minorSplitLine:{show:!1},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}},{key:"axisLabel",value:function(){var e={formatter:"function(param) {\n      if (param && param.includes(' ')) {\n        const time = new Date(param);\n        if (time.toString() !== 'Invalid Date') {\n          return time.toLocaleDateString().replaceAll('/','-');\n        }\n      }\n      if(param.indexOf('_') < 0){\n          return param;\n      }\n      const str = param.split('_').pop();\n      if(str.length > 4){\n        return str.slice(0,4) + '...'\n      }\n      return str;\n    }"};return e}}]),i}(ba),xa=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w=this,C=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=C.length>2&&void 0!==C[2]?C[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name,catalog:t.appBIReportDimensions[0].dimensionTag,value:t.appBIReportMeasures[0].measureTag},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"pie",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{category:"srfCatalogField",value:"srfValue",type:"NONE",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"pie",valueField:"srfValue",enableChartDataSet:!0,id:"pie_0",appId:"srfAppId"},u=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]}),(n=a.dechartSerieses).push.apply(n,d(u)),t&&(f=this.transformStyle(t,t.appBIReportDimensions[0],l)||{},m=f.params,v=f.seriesParams,Object.assign(a,{userParam:m}),null===(h=a.dechartSerieses)||void 0===h||h.forEach((function(e){Object.assign(e,{userParam:I(I({},w.computeMaxMin(v,o,e)),At(e,t.appBIReportMeasures,t.appBIReportDimensions[0]))})})),g={},"CONTENT"===s&&(b=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(g,{ENABLEDRILLDETAIL:b})),Object.assign(a,{controlParam:{ctrlParams:I(I({},g),{},{chartid:l})}})),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])})),o=Math.max.apply(Math,d(r)),s=Math.min.apply(Math,d(r));n.formatter="function(param) {\n        let tempName = param.name;\n        const { data } = param;\n        const getOrigin = (origin) => {\n          if (origin && origin.$origin) {\n            return getOrigin(origin.$origin);\n          }\n          return origin;\n        };\n        const origin = getOrigin(data.value[1].$origin);\n        const chartData = JSON.parse(localStorage.getItem(data.value[1]._chartid));\n        if(origin){\n          const field = Object.keys(origin).find(key => {\n            return origin[key] === param.name;\n          })\n          if(field && chartData && chartData[field]){\n            tempName = chartData[field][param.name];\n          }\n        }else if(chartData){\n          const _tempname = Object.keys(chartData).find(_chart => {\n            return  chartData[_chart][param.name]\n          })\n          if(_tempname){\n            tempName = chartData[_tempname][param.name]\n          }\n        }\n\n        if(param.value[0] === ".concat(o," || param.value[0] === ").concat(s,"){\n          if(").concat(n.percentage,"){\n            return tempName + '：（' + param.percent + '%' + '）';\n          }\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n            return tempName + '：' + value;\n          } \n          return tempName + '：' + param.value[0];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        let tempName = param.name;\n        const { data } = param;\n        const getOrigin = (origin) => {\n          if (origin && origin.$origin) {\n            return getOrigin(origin.$origin);\n          }\n          return origin;\n        };\n        const origin = getOrigin(data.value[1].$origin);\n        const chartData = JSON.parse(localStorage.getItem(data.value[1]._chartid));\n        if(origin){\n          const field = Object.keys(origin).find(key => {\n            return origin[key] === param.name;\n          })\n          if(field && chartData && chartData[field]){\n            tempName = chartData[field][param.name];\n          }\n        }else if(chartData){\n          const _tempname = Object.keys(chartData).find(_chart => {\n            return  chartData[_chart][param.name]\n          })\n          if(_tempname){\n            tempName = chartData[_tempname][param.name]\n          }\n        }\n\n        if(".concat(n.percentage,"){\n          return tempName + '：（' + param.percent + '%' + '）';\n        }\n        if('").concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n          return tempName + '：' + value;\n        } \n        return tempName + '：' + param.value[0];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var u=I({show:!!d.show,scope:d.scope,percentage:d.percentage},d.font);if(d.percentage?u.formatter="function(param) {\n            let tempName = param.name;\n            const { data } = param;\n            const getOrigin = (origin) => {\n              if (origin && origin.$origin) {\n                return getOrigin(origin.$origin);\n              }\n              return origin;\n            };\n            const origin = getOrigin(data.value[1].$origin);\n            const chartData = JSON.parse(localStorage.getItem(data.value[1]._chartid));\n            const field = Object.keys(origin).find(key => {\n              return origin[key] === param.name;\n            })\n            if(field && chartData[field]){\n              tempName = chartData[field][param.name];\n            }\n\n            return tempName + '：（' + param.percent + '%' + '）';\n            }":u.formatter="function(param) {\n            let tempName = param.name;\n            const { data } = param;\n            const getOrigin = (origin) => {\n              if (origin && origin.$origin) {\n                return getOrigin(origin.$origin);\n              }\n              return origin;\n            };\n            const origin = getOrigin(data.value[1].$origin);\n            const chartData = JSON.parse(localStorage.getItem(data.value[1]._chartid));\n            const field = Object.keys(origin).find(key => {\n              return origin[key] === param.name;\n            })\n            if(field && chartData[field]){\n              tempName = chartData[field][param.name];\n            }\n\n            return tempName + '：' + param.value[0];\n          }",r["EC.label"]=JSON.stringify(u),"all"!==d.scope){r["EC.labelLayout"]=function(e){if(""===e.text)return{fontSize:0,height:0,labelLinePoints:[0,0]}}}d.show||(r["EC.emphasis"]=JSON.stringify({label:!1}))}if(p){var h={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(t.dimensionTag,"' && chartData && chartData['").concat(t.dimensionTag,"']){\n              legendtext = chartData['").concat(t.dimensionTag,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(h,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(h),["left-top","right-top","top"].includes(p.position)&&(r["EC.center"]=JSON.stringify(["50%","60%"])),["left-bottom","right-bottom","bottom"].includes(p.position)&&(r["EC.center"]=JSON.stringify(["50%","40%"])),"left"===p.position&&(r["EC.center"]=JSON.stringify(["60%","50%"])),"right"===p.position&&(r["EC.center"]=JSON.stringify(["40%","50%"]))}}return{params:i,seriesParams:r,axisParams:{}}}}]),i}(ba),Ea=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T=this,x=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=x.length>2&&void 0!==x[2]?x[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"scatter",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"scatter",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]}),(n=a.dechartSerieses).push.apply(n,d(h)),t&&(m=this.transformStyle(t)||{},v=m.params,g=m.seriesParams,Object.assign(a,{userParam:v}),null===(f=a.dechartSerieses)||void 0===f||f.forEach((function(e){Object.assign(e,{userParam:I(I(I({},T.computeAxisLayout(e,u)),T.computeMaxMin(g,o,e)),Ot([],e,!0))})})),b={},"CONTENT"===s&&(w=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(b,{ENABLEDRILLDETAIL:w})),C=t.appBIReportDimensions.map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(b,{CATALOGFIELDS:JSON.stringify(C),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:b}})),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value || param.value[1];\n          } \n          return param.value[1];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value || param.value[1];\n        }  \n        return param.value[1];\n      }")),{"EC.label":JSON.stringify(n)}}},{key:"transformStyle",value:function(e){var t,a={},n={},i=e.reportUIModel;if(i){var r=JSON.parse(i);r.style&&(t=r.style)}if(a["EC.title"]=JSON.stringify({show:!1}),t){var o=t,s=o.graphics,l=o.label,c=o.legend,d=o.xAxis,p=o.yAxis;if(s&&Array.isArray(s.color)&&s.color.length&&(a["EC.color"]=JSON.stringify(s.color)),l){var u=I({show:!!l.show,scope:l.scope,formatter:"function(param) {\n            return param.value[1];\n          }",position:"top"},l.font);n["EC.label"]=JSON.stringify(u)}if(c){var h={show:!!c.show,textStyle:c.font,icon:"circle"};c.position&&Object.assign(h,this.getLegendOPtions(c.position)),a["EC.legend"]=JSON.stringify(h)}if(d){var f=d.show,m=d.showTitle,v=d.titleFont,y=d.showLabel,g=d.labelFont,b=d.showAxisline,w=d.axisline,C=d.showGridline,T=d.gridline,x=d.enableLabelInterval,E=d.labelInterval,S={show:!!f,type:"category",name:m?void 0:"",nameTextStyle:I({},v),axisLabel:I(I(I({show:!!y,interval:x?E:"auto"},this.axisLabel()),g),this.computeLabelEllipsis(x,E)),axisLine:{show:!!b,lineStyle:{type:"doubleDashed"===w.borderStyle?[15]:w.borderStyle,width:w.borderSize,color:w.color}},splitLine:{show:!!C,lineStyle:{type:"doubleDashed"===T.borderStyle?[15]:T.borderStyle,width:T.borderSize,color:T.color}}};a["EC.xAxis"]=JSON.stringify(S)}if(p){var D=p.show,O=p.showTitle,A=p.titleFont,M=p.showLabel,L=p.labelFont,R=p.showAxisline,k=p.axisline,F=p.showGridline,N=p.gridline,P={show:!!D,type:"value",showTitle:O,nameTextStyle:I({},A),axisLabel:I({show:!!M},L),axisLine:{show:!!R,lineStyle:{type:"doubleDashed"===k.borderStyle?[15]:k.borderStyle,width:k.borderSize,color:k.color}},splitLine:{show:!!F,lineStyle:{type:"doubleDashed"===N.borderStyle?[15]:N.borderStyle,width:N.borderSize,color:N.color}}};a["EC.yAxis"]=JSON.stringify(P)}a["EC.grid"]=this.getDefaultGridOptions(null==c?void 0:c.position)}return{params:a,seriesParams:n,axisParams:{}}}}]),i}(ba),Sa=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({"EC.barWidth":"50%","EC.barMaxWidth":"36"},E.computeAxisLayout(e,u)),E.computeMaxMin(b,o,e)),Ot(h,e,!0))})})),w={},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n            return param.value[1];\n          }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f),r["EC.stack"]="stackcol"}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameTextStyle:I({},R),axisLabel:I({show:!!k},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}},{key:"axisLabel",value:function(){var e={formatter:"function(param) {\n      if (param && param.includes(' ')) {\n        const time = new Date(param);\n        if (time.toString() !== 'Invalid Date') {\n          return time.toLocaleDateString().replaceAll('/','-');\n        }\n      }\n      if(param.indexOf('_') < 0){\n        return param;\n      }\n      const str = param.split('_').pop();\n      if(str.length > 4){\n        return str.slice(0,4) + '...'\n      }\n      return str;\n    }"};return e}}]),i}(ba),Da=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e,t){if(Object.assign(e.chartSeriesEncode,{chartXAxisId:t,chartYAxisId:t}),h&&h.length){var a=h[0];Object.assign(e,{seriesCodeListId:a.appCodeListId,seriesField:a.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I({},E.computeMaxMin(b,o,e)),Ot(h,e,!0))})})),w={ZONE:!0},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n            return param.value[1];\n          }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f)}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}},axisTick:{show:!0}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameLocation:"center",nameGap:50,nameTextStyle:I({},R),axisLabel:I({show:!!k,rich:{top:I({padding:[0,0,15,0]},F),bottom:I({padding:[10,0,0,0]},F)}},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}},{key:"getDefaultGridOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={show:!1,left:"5%",right:"5%"};return["left-top","right-top","top"].includes(e)&&(t.bottom=30),["left-bottom","right-bottom","bottom"].includes(e)&&(t.top=30),"left"===e&&(t.top=30,t.bottom=30,t.right=0),"right"===e&&(t.top=30,t.bottom=30,t.let=0),JSON.stringify(t)}}]),i}(ba),Oa=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"bar",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"bar",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({},E.computeAxisLayout(e,u,!0)),E.computeMaxMin(b,o,e)),Ot(h,e,!0,!0))})}))),w={MODE:"ROW"},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}}),e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[0] === ".concat(o," || param.value[0] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[0];\n        }\n        return '';\n              }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[0]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[0];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n                    return param.value[0];\n                  }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f),r["EC.stack"]="stackbar"}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D={show:!!y,type:"value",showTitle:g,nameLocation:"center",nameTextStyle:I({lineHeight:60},b),axisLabel:I({show:!!w},C),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(D)}if(h){var O=h.show,A=h.showTitle,M=h.titleFont,L=h.showLabel,R=h.labelFont,k=h.showAxisline,F=h.axisline,N=h.showGridline,P=h.gridline,B=h.enableLabelInterval,z=h.labelInterval,G={show:!!O,type:"category",name:A?void 0:"",nameTextStyle:I({},M),axisLabel:I(I(I({show:!!L,interval:B?z:"auto"},this.axisLabel()),R),this.computeLabelEllipsis(B,z)),axisLine:{show:!!k,lineStyle:{type:"doubleDashed"===F.borderStyle?[15]:F.borderStyle,width:F.borderSize,color:F.color}},splitLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}},{key:"axisLabel",value:function(){var e={formatter:"function(param) {\n      if (param && param.includes(' ')) {\n        const time = new Date(param);\n        if (time.toString() !== 'Invalid Date') {\n          return time.toLocaleDateString().replaceAll('/','-');\n        }\n      }\n      if(param.indexOf('_') < 0){\n        return param;\n    }\n      const str = param.split('_').pop();\n      if(str.length > 4){\n        return str.slice(0,4) + '...'\n      }\n      return str;\n    }"};return e}}]),i}(ba),Aa=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e){if(h&&h.length){var t=h[0];Object.assign(e,{seriesCodeListId:t.appCodeListId,seriesField:t.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I(I({},E.computeAxisLayout(e,u)),E.computeMaxMin(b,o,e)),Ot(h,e))})})),w={},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n      }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n                return param.value[1];\n              }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f),r["EC.areaStyle"]=JSON.stringify({})}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameTextStyle:I({},R),axisLabel:I({show:!!k},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}}]),i}(ba),Ma=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w,C,T,x,E=this,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=S.length>2&&void 0!==S[2]?S[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfCaption",catalogField:"srfCatalogField",echartsType:"line",chartCoordinateSystemId:"0",chartDataSetId:"0",chartSeriesEncode:{chartXAxisId:"0",chartYAxisId:"0",x:["srfCatalogField"],y:["srfValue"],type:"XY",name:"坐标系编码",id:"0",appId:"srfAppId"},seriesLayoutBy:"column",seriesType:"line",valueField:"srfValue",serieText:"srfSerieText",catalogName:"srfCatalogName",enableChartDataSet:!0,appId:"srfAppId"},u={},t.reportUIModel&&(u=JSON.parse(t.reportUIModel)),h=[],u&&u.group&&Array.isArray(u.group)&&(h=Dt(u.group,t.appBIReportDimensions)),f=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]},(function(e,t){if(Object.assign(e.chartSeriesEncode,{chartXAxisId:t,chartYAxisId:t}),h&&h.length){var a=h[0];Object.assign(e,{seriesCodeListId:a.appCodeListId,seriesField:a.measureTag})}})),(n=a.dechartSerieses).push.apply(n,d(f)),t&&(v=this.transformStyle(t,h,l)||{},g=v.params,b=v.seriesParams,Object.assign(a,{userParam:g}),null===(m=a.dechartSerieses)||void 0===m||m.forEach((function(e){Object.assign(e,{userParam:I(I({},E.computeMaxMin(b,o,e)),Ot(h,e))})})),w={ZONE:!0},"CONTENT"===s&&(C=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(w,{ENABLEDRILLDETAIL:C})),T=!1,x=t.appBIReportDimensions.filter((function(e){if(h.length&&!T){var t=h[0].measureTag;return e.dimensionTag!==t||(T=!0,!1)}return!0})).map((function(e){var t;return{sort:null===(t=u.extend)||void 0===t?void 0:t["sort@".concat(e.dimensionTag)],codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",codelistId:e.appCodeListId}})),Object.assign(w,{CATALOGFIELDS:JSON.stringify(x),NOSORT:!0,chartid:l}),Object.assign(a,{controlParam:{ctrlParams:w}})),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])||0})),o=Math.max.apply(Math,d(r))||0,s=Math.min.apply(Math,d(r))||0;n.formatter="function(param) {\n        if(param.value[1] === ".concat(o," || param.value[1] === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value[1];\n        }\n        return '';\n          }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value[1]), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value[1];\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e,t,a){var n,i={},r={},o=e.reportUIModel;if(o){var s=JSON.parse(o);s.style&&(n=s.style)}if(i["EC.title"]=JSON.stringify({show:!1}),n){var l=n,c=l.graphics,d=l.label,p=l.legend,u=l.xAxis,h=l.yAxis;if(c&&Array.isArray(c.color)&&c.color.length&&(i["EC.color"]=JSON.stringify(c.color)),d){var f=I({show:!!d.show,scope:d.scope,formatter:"function(param) {\n                return param.value[1];\n              }",position:d.position},d.font);r["EC.label"]=JSON.stringify(f)}if(p){var m="";t&&t.length>0&&(m=t[0].measureTag);var v={show:!!p.show,textStyle:p.font,icon:"circle",formatter:"function(param){\n            const chartData = JSON.parse(localStorage.getItem('".concat(a,"'));\n            let legendtext = param;\n            if('").concat(m,"' && chartData && chartData['").concat(m,"']){\n              legendtext = chartData['").concat(m,"'][param]\n            }\n            return legendtext;\n          }")};p.position&&Object.assign(v,this.getLegendOPtions(p.position)),i["EC.legend"]=JSON.stringify(v)}if(u){var y=u.show,g=u.showTitle,b=u.titleFont,w=u.showLabel,C=u.labelFont,T=u.showAxisline,x=u.axisline,E=u.showGridline,S=u.gridline,D=u.enableLabelInterval,O=u.labelInterval,A={show:!!y,type:"category",name:g?void 0:"",nameTextStyle:I({},b),axisLabel:I(I(I({show:!!w,interval:D?O:"auto"},this.axisLabel()),C),this.computeLabelEllipsis(D,O)),axisLine:{show:!!T,lineStyle:{type:"doubleDashed"===x.borderStyle?[15]:x.borderStyle,width:x.borderSize,color:x.color}},splitLine:{show:!!E,lineStyle:{type:"doubleDashed"===S.borderStyle?[15]:S.borderStyle,width:S.borderSize,color:S.color}},axisTick:{show:!0}};i["EC.xAxis"]=JSON.stringify(A)}if(h){var M=h.show,L=h.showTitle,R=h.titleFont,k=h.showLabel,F=h.labelFont,N=h.showAxisline,P=h.axisline,B=h.showGridline,z=h.gridline,G={show:!!M,type:"value",showTitle:L,nameLocation:"center",nameGap:50,nameTextStyle:I({},R),axisLabel:I({show:!!k,rich:{top:I({padding:[0,0,15,0]},F),bottom:I({padding:[10,0,0,0]},F)}},F),axisLine:{show:!!N,lineStyle:{type:"doubleDashed"===P.borderStyle?[15]:P.borderStyle,width:P.borderSize,color:P.color}},splitLine:{show:!!B,lineStyle:{type:"doubleDashed"===z.borderStyle?[15]:z.borderStyle,width:z.borderSize,color:z.color}}};i["EC.yAxis"]=JSON.stringify(G)}i["EC.grid"]=this.getDefaultGridOptions(null==p?void 0:p.position)}return{params:i,seriesParams:r,axisParams:{}}}}]),i}(ba),La=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,p,u,h,f,m,v,g,b,w=this,C=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(i=C.length>2&&void 0!==C[2]?C[2]:{}).appDataEntityId,o=i.items,s=i.mode,l=i.chartid,t&&a&&r){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportDimensions&&t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return c={appId:ibiz.env.appId,appDataEntityId:r,caption:t.name,catalog:t.appBIReportDimensions[0].dimensionTag,value:t.appBIReportMeasures[0].measureTag},wt(a,(function(e){return It(e,c)})),a.dechartSerieses=[],p={caption:"srfSerieText",catalogField:"srfCatalogField",echartsType:"radar",chartCoordinateSystemId:"0",chartDataSetId:"0",seriesLayoutBy:"column",seriesType:"radar",valueField:"srfValue",enableChartDataSet:!0,id:"radar_0",appId:"srfAppId"},u=St(t.appBIReportMeasures,p,{appDataEntityId:r,caption:t.name,dimension:t.appBIReportDimensions[0]}),(n=a.dechartSerieses).push.apply(n,d(u)),t&&(f=this.transformStyle(t)||{},m=f.params,v=f.seriesParams,Object.assign(a,{userParam:m}),null===(h=a.dechartSerieses)||void 0===h||h.forEach((function(e){Object.assign(e,{userParam:I({},w.computeMaxMin(v,o,e))})})),g={},"CONTENT"===s&&(b=t.appBIReportMeasures.map((function(e){return{name:e.measureTag,isDrill:!!e.drillDetailAppViewId}})),Object.assign(g,{ENABLEDRILLDETAIL:b})),Object.assign(a,{controlParam:{ctrlParams:I(I({},g),{},{chartid:l})}})),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"computeMaxMin",value:function(e,t,a){var n=H(JSON.parse(e["EC.label"]));if(n&&"all"!==n.scope){var i=a.valueField,r=t.filter((function(e){return Object.prototype.hasOwnProperty.call(e,i)})).map((function(e){return Number(e[i])})),o=Math.max.apply(Math,d(r)),s=Math.min.apply(Math,d(r));n.formatter="function(param) {\n        if(param.value === ".concat(o," || param.value === ").concat(s,"){\n          if('").concat(a.jsonFormat,"' !== 'undefined'){\n            value = ibiz.util.text.format(String(param.value), '").concat(a.jsonFormat,"')\n            return value;\n          } \n          return param.value;\n        }\n        return '';\n          }")}return n&&"all"===n.scope&&(n.formatter="function(param) {\n        if('".concat(a.jsonFormat,"' !== 'undefined'){\n          value = ibiz.util.text.format(String(param.value), '").concat(a.jsonFormat,"')\n          return value;\n        }  \n        return param.value;\n      }")),I(I({},e),{},{"EC.label":JSON.stringify(n)})}},{key:"transformStyle",value:function(e){var t,a={},n={},i=e.reportUIModel;if(i){var r=JSON.parse(i);r.style&&(t=r.style)}if(n["EC.areaStyle"]=JSON.stringify({}),a["EC.title"]=JSON.stringify({show:!1}),t){var o=t,s=o.graphics,l=o.label,c=o.legend;if(s&&Array.isArray(s.color)&&s.color.length&&(a["EC.color"]=JSON.stringify(s.color)),l){var d=I({show:!!l.show,scope:l.scope},l.font);if(n["EC.label"]=JSON.stringify(d),"all"!==l.scope){n["EC.labelLayout"]=function(e){if(""===e.text)return{fontSize:0,height:0,labelLinePoints:[0,0]}}}}if(c){var p={show:!!c.show,textStyle:c.font,icon:"circle"};c.position&&Object.assign(p,this.getLegendOPtions(c.position)),a["EC.legend"]=JSON.stringify(p)}}return{params:a,seriesParams:n,axisParams:{}}}}]),i}(ba),Ra=function(e){n(i,e);var t,a=r(i);function i(){return f(this,i),a.apply(this,arguments)}return v(i,[{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),function(e,a){return t.apply(this,arguments)})}]),i}(ba),ka=function(e){n(l,e);var t,a,i,s=r(l);function l(){var e;f(this,l);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return C(o(e=s.call.apply(s,[this].concat(a))),"codeListItems",void 0),C(o(e),"styleConfig",{}),C(o(e),"hasPeriod",!1),C(o(e),"codelistColumn",[]),C(o(e),"totalColTag","col_sum"),C(o(e),"percentkeys",[]),C(o(e),"measures",[]),C(o(e),"dimensionRow",[]),C(o(e),"dimensionCol",[]),C(o(e),"measuresTotalResult",{}),C(o(e),"colDataMap",new Map),C(o(e),"gridFieldMap",new Map),e}return v(l,[{key:"calcColumnStyle",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.styleConfig,a=t.gridFont,n=t.agg,i={};return a&&(i.align=a.gridBodyAlign),e&&n&&n.show&&(i.aggMode="SUM"),i}},{key:"calcTotalCol",value:function(e,t){var a=this.styleConfig.agg;if(this.dimensionCol.length>0&&a.show&&a.colPosition===e){var n=this.clacMeasureColumns(this.measures,this.totalColTag),i={dataItemName:this.totalColTag,appDEFieldId:this.totalColTag,caption:"合计",codeName:this.totalColTag,columnType:"GROUPGRIDCOLUMN",id:this.totalColTag,appId:"srfAppId",degridColumns:n};t.push(i)}}},{key:"calcGroupType",value:(i=b(y().mark((function e(t){var a,n,i,r,o,s,l,c,d=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!(this.dimensionCol.length>0)){e.next=10;break}if(n=this.dimensionCol[0],i=n.dimensionTag,r=n.appCodeListId,o=this.controller,s=o.context,l=o.viewParams,!r){e.next=7;break}return e.next=7,this.loadCodeList(r,s,l);case 7:c=!1,t.forEach((function(e){var t=e[d.getGridField(i)];t?a.includes(t)||a.push(t):c=!0})),c&&a.push("");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"clacMeasureColumns",value:function(e,t){var a=this;return e.map((function(e){var n=a.getGridField(e.measureTag);t&&(n="".concat(t,"@").concat(n));var i="".concat(a.totalColTag,"@").concat(a.getGridField(e.measureTag));return e.appCodeListId&&a.codelistColumn.push(n),a.percentkeys.push(n),I(I({dataItemName:n,appDEFieldId:n,caption:e.measureName,codeName:n,width:150,widthUnit:"STAR",appCodeListId:e.appCodeListId,columnType:"DEFGRIDCOLUMN",id:n,appId:"srfAppId",totalCodename:i,format:e.jsonFormat,valueType:"SIMPLE"},a.calcColumnStyle()),{},{align:"RIGHT"})}))}},{key:"calcGridColumns",value:function(e){var t=this,a=[];if(this.dimensionRow&&a.push.apply(a,d(this.dimensionRow.map((function(e){return e.appCodeListId&&t.codelistColumn.push(t.getGridField(e.dimensionTag)),I({dataItemName:t.getGridField(e.dimensionTag),appDEFieldId:t.getGridField(e.appDEFieldId||e.dimensionTag),width:150,widthUnit:"STAR",appCodeListId:e.appCodeListId,caption:e.dimensionName,codeName:t.getGridField(e.dimensionTag),columnType:"DEFGRIDCOLUMN",id:t.getGridField(e.dimensionTag),appId:"srfAppId"},t.calcColumnStyle(!1))})))),this.calcTotalCol("left",a),this.dimensionCol.length>0){var n=this.dimensionCol[0],i=e.map((function(e){var a=t.clacMeasureColumns(t.measures,e);return{dataItemName:t.getGridField(n.dimensionTag),appDEFieldId:t.getGridField(n.appDEFieldId),caption:t.transCodeListValue(e),appCodeListId:n.appCodeListId,codeName:t.getGridField(n.dimensionTag),columnType:"GROUPGRIDCOLUMN",id:t.getGridField(n.dimensionTag),appId:"srfAppId",degridColumns:a}}));a.push.apply(a,d(i))}else{var r=this.clacMeasureColumns(this.measures);a.push.apply(a,d(r))}return this.calcTotalCol("right",a),a}},{key:"calcGridDataItems",value:function(e){var t=this,a=[],n=this.styleConfig.function.function||[];return e.forEach((function(e){var i={};n.includes("showPercent")&&e.totalCodename&&t.measuresTotalResult[e.totalCodename]&&(i.customCode=!0,i.scriptCode="\n        if (Object.prototype.hasOwnProperty.call(data, '".concat(e.appDEFieldId,"')) {\n          const value = data['").concat(e.appDEFieldId,"'] / ").concat(t.measuresTotalResult[e.totalCodename],";\n          let formatValue = data['").concat(e.appDEFieldId,"'];\n          if (controller.valueFormat) {\n            formatValue = ibiz.util.text.format(formatValue, controller.valueFormat);\n          }\n          return formatValue + '(' + ibiz.util.text.format(value, '0.##%') + ')'\n        }")),a.push(I({appDEFieldId:e.appDEFieldId,valueType:"SIMPLE",dataType:25,id:e.id,appId:"srfAppId",format:e.format},i)),"GROUPGRIDCOLUMN"===e.columnType&&a.push.apply(a,d(t.calcGridDataItems(e.degridColumns)))})),a}},{key:"calcRowSpan",value:function(){var e=this;return this.dimensionRow.map((function(t){return e.getGridField(t.dimensionTag)}))}},{key:"getItem",value:function(e,t,a){var n=this;return e.find((function(e){return-1===t.findIndex((function(t){return e[n.getGridField(t.dimensionTag)]!==a[n.getGridField(t.dimensionTag)]}))}))}},{key:"calcGridData",value:function(e){var t=this;if(this.colDataMap.clear(),this.dimensionCol.length>0){var a=[],n=this.dimensionCol[0].dimensionTag;return e.forEach((function(e){t.measures.forEach((function(i){var r=t.getGridField(i.measureTag)||"",o=e[t.getGridField(n)],s=r||"";o&&(s="".concat(o,"@").concat(r),t.colDataMap.set(o,t.getDrillValue(e,t.getGridField(n))));var l=t.getItem(a,t.dimensionRow,e);if(l)l[s]=e[r];else{var c=C({},s,e[r]);t.dimensionRow.forEach((function(a){c[t.getGridField(a.dimensionTag)]=e[t.getGridField(a.dimensionTag)]})),c.$origin=e.$origin,a.push(c)}}))})),a}return e}},{key:"calcTotalData",value:function(e){var t=this;this.measures.forEach((function(e){var a="".concat(t.totalColTag,"@").concat(t.getGridField(e.measureTag));t.measuresTotalResult[a]=0})),e.forEach((function(e){t.measures.forEach((function(a){var n="".concat(t.totalColTag,"@").concat(t.getGridField(a.measureTag)),i=t.percentkeys.reduce((function(t,a){var n=Number(e[a])||0;return j(t,n)}),0);t.measuresTotalResult[n]+=i,e[n]=i}))}))}},{key:"translateDataToModel",value:(a=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,d,p,u,h,f,m,v,g=this,b=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(n=b.length>2&&void 0!==b[2]?b[2]:{}).appDataEntityId,r=n.mode,o=n.items,s=void 0===o?[]:o,t&&a&&i){e.next=4;break}return e.abrupt("return");case 4:if(l=t.appBIReportMeasures,c=t.appBIReportDimensions,d=void 0===c?[]:c,l){e.next=7;break}return e.abrupt("return",a);case 7:return this.measures=l,this.getDimension(d),p={appId:ibiz.env.appId,appDataEntityId:i,caption:t.name,value:l[0].measureTag},this.styleConfig=this.getStyleConfig(t)||{},this.codelistColumn=[],this.percentkeys=[],this.calcGridFieldMap(s),u=this.filterPeriod(U(s)),e.next=17,this.calcGroupType(u);case 17:return h=e.sent,f=this.calcGridColumns(h),m=this.calcGridData(u),this.calcTotalData(m),v=this.calcGridDataItems(f),this.controller.state.tableData=m,Object.assign(a,{degridColumns:f,degridDataItems:v}),wt(a,(function(e){return It(e,p)})),this.transformStyle(a,r),"CONTENT"===r&&(this.controller.state.attrs={"cell-class-name":function(e){var t=e.column.property.split("@").pop();if(-1!==g.measures.findIndex((function(e){return g.getGridField(e.measureTag)===t})))return"enable-pointer"},onCellClick:function(e,t){if(!ibiz.fullscreenUtil.isFullScreen){var a=t.property.split("@").pop(),n=l.find((function(e){return g.getGridField(e.measureTag)===a}));if(n&&n.drillDetailAppViewId&&!t.property.startsWith(g.totalColTag)){var i=e.getOrigin(),r=g.dimensionRow.map((function(e){return{value:g.getDrillValue(i.$origin||i,e.dimensionTag),name:e.dimensionTag}}));if(t.property.includes("@")){var o=t.property.split("@").shift();g.colDataMap.has(o)&&(o=g.colDataMap.get(o)),r.push({value:o,name:g.dimensionCol[0].dimensionTag})}var s={measure:{name:a},dimension:r};g.controller.handleDrillDetail(s)}}}}),e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getStyleConfig",value:function(e){var t=e.reportUIModel;if(t){var a=JSON.parse(t);if(a.style)return a.style;this.hasPeriod=!!a.period}}},{key:"getDimension",value:function(e){this.dimensionRow=e.filter((function(e){return"COLHEADER"!==e.placement})),this.dimensionCol=e.filter((function(e){return"COLHEADER"===e.placement}))}},{key:"loadCodeList",value:(t=b(y().mark((function e(t,a,n){var i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ibiz.hub.getApp(a.srfappid)).codeList.getCodeList(t)){e.next=5;break}return ibiz.message.error("未找到代码表: ".concat(t)),e.abrupt("return",[]);case 5:return e.next=7,i.codeList.get(t,a,n);case 7:return r=e.sent,this.codeListItems=r,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})},{key:"transCodeListValue",value:function(e){var t=this.findCodeListItem(this.codeListItems,e);return t?t.text:e}},{key:"findCodeListItem",value:function(e,t){if(e){var a=e.find((function(e){return e.value==t}));if(a)return a;for(var n=0;n<e.length;n++){var i=this.findCodeListItem(e[n].children,t);if(i)return i}}}},{key:"transformStyle",value:function(e,t){var a=this.styleConfig,n={vars:{},classList:[]};if(n.vars={"--ibiz-control-grid-header-align":a.gridFont.gridHeaderAlign,"--ibiz-control-grid-header-font-size":"".concat(a.gridFont.gridHeader.fontSize,"px"),"--ibiz-control-grid-header-font-weight":a.gridFont.gridHeader.fontWeight,"--ibiz-control-grid-header-text-color":a.gridFont.gridHeader.color,"--ibiz-control-grid-header-font-style":a.gridFont.gridHeader.fontStyle,"--ibiz-control-grid-content-font-size":"".concat(a.gridFont.gridBody.fontSize,"px"),"--ibiz-control-grid-content-font-weight":a.gridFont.gridBody.fontWeight,"--ibiz-control-grid-content-text-color":a.gridFont.gridBody.color,"--ibiz-control-grid-content-font-style":a.gridFont.gridBody.fontStyle},a.agg.show&&(Object.assign(e,{aggMode:"PAGE"}),"top"===a.agg.rowPosition&&n.classList.push("el-table--top-agg")),a.function.show){var i={},r=a.function.function||[];if(r.includes("fixedGridHeader")||n.classList.push("el-table--scroll-header"),r.includes("dimensionMerge")){var o=this.calcRowSpan();Object.assign(i,{rowspankeys:o})}r.includes("fixedDimension")&&this.dimensionRow&&Object.assign(e,{frozenFirstColumn:this.dimensionRow.length}),Object.assign(e.controlParam,{ctrlParams:i})}"CONTENT"===t&&n.classList.push("el-table--is-drill"),this.controller.state.style=n}},{key:"filterPeriod",value:function(e){return e.filter((function(e){return!e.srfperiodtype}))}},{key:"getDrillValue",value:function(e,t){return e.$origin&&Object.prototype.hasOwnProperty.call(e.$origin,t)?e.$origin[t]:e[t]}},{key:"calcGridFieldMap",value:function(e){var t=this;this.gridFieldMap.clear();var a=[];e.forEach((function(e){a=Array.from(new Set([].concat(d(a),d(Object.keys(e)))))})),this.measures.forEach((function(e){e.appDEFieldId&&a.includes("".concat(e.appDEFieldId,"_text"))&&t.gridFieldMap.set(e.appDEFieldId,"".concat(e.appDEFieldId,"_text")),e.measureTag&&a.includes("".concat(e.measureTag,"_text"))&&t.gridFieldMap.set(e.measureTag,"".concat(e.measureTag,"_text"))})),[].concat(d(this.dimensionRow),d(this.dimensionCol)).forEach((function(e){e.appDEFieldId&&a.includes("".concat(e.appDEFieldId,"_text"))&&t.gridFieldMap.set(e.appDEFieldId,"".concat(e.appDEFieldId,"_text")),e.dimensionTag&&a.includes("".concat(e.dimensionTag,"_text"))&&t.gridFieldMap.set(e.dimensionTag,"".concat(e.dimensionTag,"_text"))}))}},{key:"getGridField",value:function(e){return e&&this.gridFieldMap.has(e)?this.gridFieldMap.get(e):e}}]),l}(ba),Fa=function(e){n(i,e);var t,a=r(i);function i(){var e;f(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(o(e=a.call.apply(a,[this].concat(n))),"styleConfig",{}),C(o(e),"hasPeriod",!1),C(o(e),"gridFieldMap",new Map),e}return v(i,[{key:"calcColumnStyle",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.styleConfig,a=t.gridFont,n=t.agg,i={};return a&&(i.align=a.gridBodyAlign),e&&n&&n.show&&(i.aggMode="SUM"),i}},{key:"calcGridColumns",value:function(e){var t=this,a=e.appBIReportMeasures,n=void 0===a?[]:a,i=e.appBIReportDimensions,r=void 0===i?[]:i,o=[];if(r.length>0){var s=r.map((function(e){return I({dataItemName:t.getGridField(e.dimensionTag),appDEFieldId:t.getGridField(e.appDEFieldId),caption:e.dimensionName,codeName:t.getGridField(e.dimensionTag),width:150,widthUnit:"STAR",appCodeListId:e.appCodeListId,columnType:"DEFGRIDCOLUMN",id:t.getGridField(e.dimensionTag),appId:"srfAppId"},t.calcColumnStyle(!1))}));o.push.apply(o,d(s))}return n.length>0&&o.push.apply(o,d(n.map((function(e){return I(I({dataItemName:t.getGridField(e.measureTag),appDEFieldId:t.getGridField(e.appDEFieldId||e.measureTag),caption:e.measureName,codeName:t.getGridField(e.measureTag),width:150,widthUnit:"STAR",appCodeListId:e.appCodeListId,columnType:"DEFGRIDCOLUMN",id:t.getGridField(e.measureTag),appId:"srfAppId",format:e.jsonFormat,valueType:"SIMPLE"},t.calcColumnStyle()),{},{align:"RIGHT"})})))),o}},{key:"calcGridDataItems",value:function(e){var t=this,a=[];return e.forEach((function(e){a.push({appDEFieldId:e.appDEFieldId,valueType:"SIMPLE",dataType:25,id:e.id,appId:"srfAppId",format:e.format}),"GROUPGRIDCOLUMN"===e.columnType&&a.push.apply(a,d(t.calcGridDataItems(e.degridColumns)))})),a}},{key:"calcRowSpan",value:function(e){var t=e.appBIReportDimensions;return(void 0===t?[]:t).map((function(e){return e.dimensionTag}))}},{key:"translateDataToModel",value:(t=b(y().mark((function e(t,a){var n,i,r,o,s,l,c,d,p,u,h,f,m=this,v=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(n=v.length>2&&void 0!==v[2]?v[2]:{}).appDataEntityId,r=n.mode,o=n.items,s=void 0===o?[]:o,t&&a&&i){e.next=4;break}return e.abrupt("return");case 4:if(t.appBIReportMeasures){e.next=6;break}return e.abrupt("return",a);case 6:return l={appId:ibiz.env.appId,appDataEntityId:i,caption:t.name,value:t.appBIReportMeasures[0].measureTag},this.calcGridFieldMap(t,s),this.styleConfig=this.getStyleConfig(t)||{},c=this.calcGridColumns(t),d=this.calcGridDataItems(c),Object.assign(a,{degridColumns:c,degridDataItems:d}),this.controller.state.tableData=this.filterPeriod(this.controller.state.items),wt(a,(function(e){return It(e,l)})),this.transformStyle(t,a,r),"CONTENT"===r&&(p=t.appBIReportMeasures,u=void 0===p?[]:p,h=t.appBIReportDimensions,f=void 0===h?[]:h,this.controller.state.attrs={"cell-class-name":function(e){var t=e.column;if(-1!==u.findIndex((function(e){return e.measureTag===t.property})))return"enable-pointer"},onCellClick:function(e,t){if(!ibiz.fullscreenUtil.isFullScreen){var a=u.find((function(e){return e.measureTag===t.property}));if(a&&a.drillDetailAppViewId){var n=e.getOrigin(),i=f.map((function(e){return{value:m.getDrillValue(n.$origin||n,e.dimensionTag),name:e.dimensionTag}})),r={measure:{name:t.property},dimension:i};m.controller.handleDrillDetail(r)}}}}),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"getStyleConfig",value:function(e){var t=e.reportUIModel;if(t){var a=JSON.parse(t);if(a.style)return a.style;this.hasPeriod=!!a.period}}},{key:"transformStyle",value:function(e,t,a){var n=this.styleConfig,i={vars:{},classList:[]};if(i.vars={"--ibiz-control-grid-header-align":n.gridFont.gridHeaderAlign,"--ibiz-control-grid-header-font-size":"".concat(n.gridFont.gridHeader.fontSize,"px"),"--ibiz-control-grid-header-font-weight":n.gridFont.gridHeader.fontWeight,"--ibiz-control-grid-header-text-color":n.gridFont.gridHeader.color,"--ibiz-control-grid-header-font-style":n.gridFont.gridHeader.fontStyle,"--ibiz-control-grid-content-font-size":"".concat(n.gridFont.gridBody.fontSize,"px"),"--ibiz-control-grid-content-font-weight":n.gridFont.gridBody.fontWeight,"--ibiz-control-grid-content-text-color":n.gridFont.gridBody.color,"--ibiz-control-grid-content-font-style":n.gridFont.gridBody.fontStyle},n.agg.show&&(Object.assign(t,{aggMode:"PAGE"}),"top"===n.agg.position&&i.classList.push("el-table--top-agg")),n.function.show){var r={},o=n.function.function||[];if(o.includes("fixedGridHeader")||i.classList.push("el-table--scroll-header"),o.includes("dimensionMerge")){var s=this.calcRowSpan(e);Object.assign(r,{rowspankeys:s})}o.includes("fixedDimension")&&e.appBIReportDimensions&&Object.assign(t,{frozenFirstColumn:e.appBIReportDimensions.length}),o.includes("showPercent")&&Object.assign(r,{percentkeys:e.appBIReportMeasures.map((function(e){return e.measureTag}))}),Object.assign(t.controlParam,{ctrlParams:r})}"CONTENT"===a&&i.classList.push("el-table--is-drill"),this.controller.state.style=i}},{key:"filterPeriod",value:function(e){return e.filter((function(e){return!e.srfperiodtype}))}},{key:"getDrillValue",value:function(e,t){return e.$origin&&Object.prototype.hasOwnProperty.call(e.$origin,t)?e.$origin[t]:e[t]}},{key:"calcGridFieldMap",value:function(e,t){var a=this;this.gridFieldMap.clear();var n=[];t.forEach((function(e){n=Array.from(new Set([].concat(d(n),d(Object.keys(e)))))}));var i=e.appBIReportMeasures,r=void 0===i?[]:i,o=e.appBIReportDimensions,s=void 0===o?[]:o;r.forEach((function(e){e.appDEFieldId&&n.includes("".concat(e.appDEFieldId,"_text"))&&a.gridFieldMap.set(e.appDEFieldId,"".concat(e.appDEFieldId,"_text")),e.measureTag&&n.includes("".concat(e.measureTag,"_text"))&&a.gridFieldMap.set(e.measureTag,"".concat(e.measureTag,"_text"))})),s.forEach((function(e){e.appDEFieldId&&n.includes("".concat(e.appDEFieldId,"_text"))&&a.gridFieldMap.set(e.appDEFieldId,"".concat(e.appDEFieldId,"_text")),e.dimensionTag&&n.includes("".concat(e.dimensionTag,"_text"))&&a.gridFieldMap.set(e.dimensionTag,"".concat(e.dimensionTag,"_text"))}))}},{key:"getGridField",value:function(e){return e&&this.gridFieldMap.has(e)?this.gridFieldMap.get(e):e}}]),i}(ba),Na=function(){function e(){f(this,e)}return v(e,null,[{key:"createConverter",value:function(e,t){return"PIE"===e?new xa(t):"SCATTER"===e?new Ea(t):"STACK_COL"===e?new Sa(t):"GAUGE"===e?new wa(t):"MULTI_SERIES_LINE"===e?new Ca(t):"MULTI_SERIES_BAR"===e?new Ia(t):"MULTI_SERIES_COL"===e?new Ta(t):"ZONE_COL"===e?new Da(t):"STACK_BAR"===e?new Oa(t):"AREA"===e?new Aa(t):"ZONE_LINE"===e?new Ma(t):"RADAR"===e?new La(t):"NUMBER"===e?new Ra(t):"CROSSTABLE"===e?new ka(t):"GRID"===e?new Fa(t):void 0}}]),e}(),Pa=function(){function e(t,a,n,i,r){f(this,e),C(this,"state",void 0),C(this,"converter",void 0),C(this,"chartModel",void 0),C(this,"chartDefaultValue",void 0),C(this,"chartConfig",void 0),C(this,"appDataEntityId",void 0),C(this,"chartController",void 0),C(this,"uuid",""),C(this,"dynaDataDic",{}),this.mode=t,this.context=a,this.viewParams=n,this.config=i,this.initData=r;var o=r.chartModel,s=r.chartConfig,l=r.chartDefaultValue;this.chartModel=o,this.chartConfig=s,this.chartDefaultValue=l;var c="NUMBER";i.reportUIModel&&(c=JSON.parse(i.reportUIModel).selectChartType||"NUMBER");var d=this.config,p=d.appBISchemeId,u=d.appBICubeId,h=d.id,m=d.name;this.uuid="".concat(this.context.srfappid,"@").concat(p,"@").concat(u,"@").concat(h,"@").concat(c,"@").concat(encodeURIComponent(m)),this.converter=Na.createConverter(c,this),this.initState()}var t,a,n,i,r,o,s,l,d,p,u;return v(e,[{key:"setChartController",value:function(e){var t=this;this.chartController=e,e.evt.on("onBeforeUpdate",(function(){if(t.chartController){var e,a=t.chartController.options,n=void 0===a?{}:a,i=n.series||[],r=n.xAxis,o=n.yAxis,s="ROW"===(null===(e=t.state.model.controlParam)||void 0===e||null===(e=e.ctrlParams)||void 0===e?void 0:e.MODE);delete n.dataZoom;var l=i.find((function(e){return e.data&&e.data.length>20}));i.length>0&&(i.length>15||l)&&(n.dataZoom=s?[{yAxisIndex:Array.isArray(o)?o.map((function(e,t){return t})):0,start:0,end:10}]:[{xAxisIndex:Array.isArray(r)?r.map((function(e,t){return t})):0,start:0,end:10}]),i.length>0&&i.forEach((function(e,a){if("radar"===e.type&&t.chartController){var i,r=t.chartController.generator.seriesGenerators[a].valueField,o=null===(i=t.state.reportModel.appBIReportMeasures)||void 0===i?void 0:i.find((function(e){return e.measureTag===r}));null!=o&&o.jsonFormat&&e.data&&e.data.length>0&&e.data.forEach((function(e){e.value=e.value.map((function(e){return ibiz.util.text.format(String(e),o.jsonFormat)}))}));var s=n.radar;s&&Array.isArray(s)&&s.forEach((function(e){e.indicator&&Array.isArray(e.indicator)&&e.indicator.forEach((function(e){var a=Object.keys(t.dynaDataDic).find((function(a){return t.dynaDataDic[a][e.name]}));a&&(e.name=t.dynaDataDic[a][e.name])}))}))}}));var c=t,d=function(e){var t;if(!e)return null;var a=[];if(e.reportUIModel){var n=JSON.parse(e.reportUIModel);n&&n.group&&Array.isArray(n.group)&&(a=Dt(n.group,e.appBIReportDimensions))}var i=!1;return null===(t=e.appBIReportDimensions)||void 0===t?void 0:t.filter((function(e){if(a.length&&!i){var t=a[0].measureTag;return e.dimensionTag!==t||(i=!0,!1)}return!0})).map((function(e){return{codename:e.dimensionTag,name:e.dimensionName,mode:e.appCodeListId?"codelist":"field",textAppDEFieldId:e.textAppDEFieldId,codelistId:e.appCodeListId}}))}(c.state.reportModel);if(d&&d.length>0){var p=d.findIndex((function(e){return"field"===e.mode&&e.textAppDEFieldId}));s?o.forEach((function(e){e.axisLabel&&(e.axisLabel.formatter=function(e){var t=e.split("_").map((function(e){var t,a=c.dynaDataDic[null===(t=d[p])||void 0===t?void 0:t.codename];return a&&a[e]?a[e]:e})).at(-1);return!t||t.indexOf("undefined")>-1?"undefined":t.length>4&&!t.includes("\n")?"".concat(t.slice(0,4),"..."):t})})):r&&Array.isArray(r)&&r.length>0&&r.forEach((function(e){e.axisLabel&&(e.axisLabel.formatter=function(e){return e.split("_").map((function(e){var t,a=c.dynaDataDic[null===(t=d[p])||void 0===t?void 0:t.codename];return a&&a[e]?a[e]:e})).at(-1)})})),n.dataZoom&&Array.isArray(n.dataZoom)&&n.dataZoom.forEach((function(e){if(p>=0){var t,a=c.dynaDataDic[null===(t=d[p])||void 0===t?void 0:t.codename];Object.assign(e,{labelFormatter:function(e,t){var n=t.split("_").at(-1);return a&&n&&a[n]?a[n]:n||"undefined"}})}}))}var u={};t.state.reportModel&&t.state.reportModel.reportUIModel&&(u=JSON.parse(t.state.reportModel.reportUIModel)),i.length>0&&t.state.model.dechartSerieses&&u.extend&&t.state.model.dechartSerieses.forEach((function(e){var a,n=null===(a=u.extend)||void 0===a?void 0:a["cordon@".concat(e.valueField)],r={symbol:"none",silent:!0},o=[];if(n){var l=i.findIndex((function(t){return e.seriesField?t.stack===e.serieText:t.name===e.serieText})),c=1,p=[];d&&d.forEach((function(e){if(p.push(e.codename),e.codelistId){var a=t.chartController.generator.codeListMap.get(e.codelistId);c*=a.length}else{var n=t.state.items.map((function(t){return t[e.codename]||0!==t[e.codename]})),i=Array.from(new Set(n));c*=i.length}})),n.forEach((function(a){var n=function(e,t,a,n,i,r){var o={color:e.lineColor,width:e.lineSize,type:e.lineStyle};"dotted"===e.lineStyle?Object.assign(o,{type:[1,5],dashOffset:5,cap:"round"}):"doubleDashed"===e.lineStyle&&Object.assign(o,{type:[5,5],dashOffset:5,cap:"round"});var s={name:e.name,lineStyle:o,label:{textBorderWidth:0,color:e.lineColor,fontWeight:400,position:"insideEndTop",formatter:function(e){return"".concat(e.name," : ").concat(e.value)}}},l=0;if("FIXED"===e.cordonType)l=e.cordonSize;else if("MAX"===e.cordonType){var c=-1/0;a.forEach((function(e){i.findIndex((function(t){return!e[t]&&0!==e[t]}))<0&&Number(e[t.valueField])>c&&(c=Number(e[t.valueField]))})),l=c}else if("MIN"===e.cordonType){var d=1/0;a.forEach((function(e){i.findIndex((function(t){return!e[t]&&0!==e[t]}))<0&&Number(e[t.valueField])<d&&(d=Number(e[t.valueField]))})),l=d}else if("AVERAGE"===e.cordonType){var p=0;a.forEach((function(e){i.findIndex((function(t){return!e[t]&&0!==e[t]}))<0&&!Number.isNaN(Number(e[t.valueField]))&&(p+=Number(e[t.valueField]))})),n&&(l=p/n)}return r?Object.assign(s,{xAxis:l}):Object.assign(s,{yAxis:l}),s}(a,e,t.state.items,c,p,s);o.push(n)})),Object.assign(r,{data:o}),l>-1?Object.assign(i[l],{markLine:r}):Object.assign(i[0],{markLine:r})}}))}}))}},{key:"initState",value:function(){this.state={},this.state.isCreated=!1,this.state.refreshFlag=!0,this.state.propertyConfig=this.chartConfig,this.state.items=[],this.state.reportModel=this.config}},{key:"created",value:(u=b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.init();case 3:return e.prev=3,this.state.isCreated=!0,e.finish(3);case 6:case"end":return e.stop()}}),e,this,[[0,,3,6]])}))),function(){return u.apply(this,arguments)})},{key:"init",value:(p=b(y().mark((function e(){var t,a,n,i,r,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.config,n=a.appBISchemeId,i=a.appBICubeId,e.next=3,this.getCubeById("".concat(n,".").concat(i));case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.appDataEntityId=r.psdename.toLowerCase(),e.next=9,this.load();case 9:return e.next=11,null===(t=this.converter)||void 0===t?void 0:t.translateDataToModel(this.state.reportModel,H(this.chartModel),{items:this.state.items,mode:this.mode,chartid:this.uuid,appDataEntityId:this.appDataEntityId});case 11:if(o=e.sent){e.next=14;break}return e.abrupt("return");case 14:this.state.model=o;case 15:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getCubeById",value:(d=b(y().mark((function e(t){var a,n,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return(a=H(this.context)).pssysbicube=t,n=ibiz.hub.getApp(ibiz.env.appId),e.next=7,n.deService.exec("pssysbicube","get",a,this.viewParams);case 7:return i=e.sent,e.abrupt("return",i.data||{});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"load",value:(l=b(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.items=[],e.next=3,this.checkData();case 3:if(!e.sent){e.next=9;break}return e.next=7,this.fetchDataSource();case 7:t=e.sent,this.state.items=t;case 9:return e.abrupt("return",this.state.items);case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"destroyed",value:(s=b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(this.uuid);case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"handleValueChange",value:(o=b(y().mark((function e(t,a,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&Object.keys(n).length>0&&((t.startsWith("style")||t.startsWith("extend.cordon")||t.startsWith("extend.axis"))&&Object.assign(this.state.reportModel,n),(t.startsWith("data")||t.startsWith("extend"))&&(this.state.reportModel=n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return o.apply(this,arguments)})},{key:"checkData",value:(r=b(y().mark((function e(){var t,a,n,i,r,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,this.chartConfig){e.next=3;break}return e.abrupt("return",t);case 3:if((a=this.chartConfig.data)&&a.details){e.next=6;break}return e.abrupt("return",t);case 6:if((n=a.details.filter((function(e){return!0===e.required})))&&0!==n.length){e.next=9;break}return e.abrupt("return",t);case 9:i=this.state.reportModel,r=c(n),e.prev=11,s=y().mark((function e(){var a,n,r,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=o.value).id||"measure"!==a.id){e.next=5;break}if(i.appBIReportMeasures&&(!i.appBIReportMeasures||0!==i.appBIReportMeasures.length)){e.next=5;break}return t=!1,e.abrupt("return",0);case 5:if(!a.id||"dimension"!==a.id){e.next=19;break}if(i.appBIReportDimensions&&(!i.appBIReportDimensions||0!==i.appBIReportDimensions.length)){e.next=11;break}return t=!1,e.abrupt("return",0);case 11:if(!i.reportUIModel){e.next=19;break}if(r=H(i.appBIReportDimensions),s=JSON.parse(i.reportUIModel),!((null===(n=s.group)||void 0===n?void 0:n.length)>0)){e.next=19;break}if(s.group.forEach((function(e){var t=e.split(".").pop();r=r.filter((function(e){return e.dimensionTag!==t}))})),0!==r.length){e.next=19;break}return t=!1,e.abrupt("return",0);case 19:case"end":return e.stop()}}),e)})),r.s();case 14:if((o=r.n()).done){e.next=21;break}return e.delegateYield(s(),"t0",16);case 16:if(0!==e.t0){e.next=19;break}return e.abrupt("break",21);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),r.e(e.t1);case 26:return e.prev=26,r.f(),e.finish(26);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}}),e,this,[[11,23,26,29]])}))),function(){return r.apply(this,arguments)})},{key:"refresh",value:(i=b(y().mark((function e(){var t,a,n,i,r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"UI",this.state.refreshFlag=!1,"ALL"!==a){e.next=11;break}return e.next=5,this.checkData();case 5:if(!e.sent){e.next=11;break}return e.next=9,this.fetchDataSource();case 9:n=e.sent,this.state.items=n;case 11:return e.next=13,null===(t=this.converter)||void 0===t?void 0:t.translateDataToModel(this.state.reportModel,H(this.chartModel),{items:this.state.items,mode:this.mode,chartid:this.uuid,appDataEntityId:this.appDataEntityId});case 13:if(i=e.sent){e.next=16;break}return e.abrupt("return");case 16:this.state.model=i,this.state.refreshFlag=!0;case 18:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"fetchDataSource",value:(n=b(y().mark((function e(){var t,a,n,i,r,o,s,l,c,d,p,u,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.config.appBICubeId,a="",!this.config.reportTag||-1!==this.config.reportTag.indexOf(".")){e.next=10;break}return e.next=5,ibiz.hub.getAppDataEntity(this.appDataEntityId,ibiz.env.appId);case 5:n=e.sent,a="/".concat(n.deapicodeName2,"/report?srfreporttag=").concat(this.config.reportTag||"bi_report","&srfcontenttype=json"),this.context&&(i=Z(this.context,n),a=i+a),e.next=12;break;case 10:r=this.config.reportTag.split("."),a="/".concat((f=r[0],Xt(f)),"/report?srfreporttag=").concat(r[1],"&srfcontenttype=json");case 12:return o={bicubetag:t,bimeasures:Tt(this.state.reportModel,this.state.reportModel.appBIReportMeasures||[]),bidimensions:xt(this.state.reportModel,this.state.reportModel.appBIReportDimensions||[]),bisort:Et(this.state.reportModel,this.state.reportModel.appBIReportMeasures,this.state.reportModel.appBIReportDimensions)},s=Nt(this.state.reportModel),this.viewParams&&this.viewParams.srfsearchconds&&(s&&s.length>0?(c=s[0],null===(l=c.searchconds)||void 0===l||l.push(this.viewParams.srfsearchconds)):s=this.viewParams.srfsearchconds),Object.assign(o,{searchconds:s}),this.state.reportModel.reportUIModel&&(d=JSON.parse(this.state.reportModel.reportUIModel)).period&&d.period.length>0&&(p=d.period[0].value)&&Object.assign(o,{biperiod:p}),e.next=19,ibiz.net.post(a,o);case 19:return u=e.sent,h=this.handResponseData(u.data),e.abrupt("return",h);case 22:case"end":return e.stop()}var f}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handResponseData",value:function(e){var t=this,a=[],n=[],i={};return this.state.reportModel.appBIReportDimensions&&this.state.reportModel.appBIReportDimensions.forEach((function(e){if(!e.appCodeListId&&e.textAppDEFieldId&&n.push(e.dimensionTag),e.stdDataType&&Kt(e.stdDataType)){var a=Ct("extend",t.state.reportModel);a&&a["period@".concat(e.dimensionTag)]&&(i[e.dimensionTag]=a["period@".concat(e.dimensionTag)])}})),n.length>0&&(n.forEach((function(a){var n={};e&&e.length>0&&e.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"".concat(a,"_text"))&&(n[e[a]]=e["".concat(a,"_text")])})),t.dynaDataDic[a]=n})),localStorage.setItem(this.uuid,JSON.stringify(this.dynaDataDic))),e&&e.length>0&&e.forEach((function(e){e.$origin=H(e),Object.keys(i).length>0&&Object.keys(i).forEach((function(t){var a,n;e[t]=(a=i[t].unit,n=e[t],a&&"DAY"===a&&n&&/^\d{8}$/.test(n)?"".concat(n.substring(0,4),"年").concat(n.substring(4,6),"月").concat(n.substring(6),"日"):a&&"WEEK"===a&&n&&/^\d{4}W\d{1,2}$/.test(n)?"".concat(n.substring(0,4),"年").concat(n.substring(5),"周"):a&&"MONTH"===a&&n&&/^\d{4}\d{2}$/.test(n)?"".concat(n.substring(0,4),"年").concat(n.substring(4),"月"):a&&"QUARTER"===a&&n&&/^\d{4}Q\d{1}$/.test(n)?"".concat(n.substring(0,4),"年").concat(n.substring(5),"季度"):a&&"YEAR"===a&&n&&/^\d{4}$/.test(n)?"".concat(n.substring(0,4),"年"):n)})),a.push(e)})),a}},{key:"openDrillModal",value:(a=b(y().mark((function e(t,a){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ibiz.overlay.createModal("BIReportDrillShell",{appViewId:t,context:this.context,data:a,reportModel:this.state.reportModel,config:this.config,dynamicDataDic:this.dynaDataDic},{width:"80%",height:"80%"}),e.next=3,n.present();case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"handleDrillDetail",value:(t=b(y().mark((function e(t){var a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.computeDrillDetailAppView(t)){e.next=3;break}return e.abrupt("return");case 3:this.openDrillModal(a,t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"computeDrillDetailAppView",value:function(e){var t,a=e.measure;if(a&&a.name){var n=null===(t=this.config.appBIReportMeasures)||void 0===t?void 0:t.find((function(e){return e.measureTag===a.name}));if(n){var i=n.drillDetailAppViewId;if(i)return i;ibiz.log.error("执行数据反查未找到反查视图中断")}else ibiz.log.error("执行数据反查未找到指标数据中断")}else ibiz.log.error("执行数据反查无指标数据中断")}}]),e}(),Ba=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Je,chartConfig:Xe,chartDefaultValue:We})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),za=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:et,chartConfig:Ze,chartDefaultValue:Qe})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ga=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:be,chartConfig:we,chartDefaultValue:Ie})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Va=function(e){n(s,e);var t,i,o=r(s);function s(e,t,a,n){var i;return f(this,s),(i=o.call(this,e,t,a,n,{chartModel:fe,chartConfig:he,chartDefaultValue:me})).mode=e,i.context=t,i.viewParams=a,i.config=n,i}return v(s,[{key:"handleValueChange",value:(i=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(s.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=13;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=9;break}this.state.items=[],e.next=13;break;case 9:return e.next=11,this.fetchDataSource();case 11:r=e.sent,this.state.items=r;case 13:this.refresh();case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return i.apply(this,arguments)})},{key:"fetchDataSource",value:(t=b(y().mark((function e(){var t,n,i,r,o,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(l(s.prototype),"fetchDataSource",this).call(this);case 2:if(i=e.sent,r=(null===(t=this.state.reportModel.appBIReportMeasures)||void 0===t?void 0:t[0].measureTag)||"",o=(null===(n=this.state.reportModel.appBIReportMeasures)||void 0===n?void 0:n[0].measureName)||"",!i||!r){e.next=8;break}return c=i.reduce((function(e,t){return e+parseFloat("".concat(t[r]||0))}),0),e.abrupt("return",[C({$catalog:o},r,c)]);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),s}(Pa),ja=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Le,chartConfig:Re,chartDefaultValue:ke})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ua=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Ee,chartConfig:Se,chartDefaultValue:De})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),_a=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:ye,chartConfig:ve,chartDefaultValue:ge})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=13;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=9;break}this.state.items=[],e.next=13;break;case 9:return e.next=11,this.fetchDataSource();case 11:r=e.sent,this.state.items=r;case 13:this.refresh();case 14:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ha=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:xe,chartConfig:Ce,chartDefaultValue:Te})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),qa=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Oe,chartConfig:Ae,chartDefaultValue:Me})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Xa=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Be,chartConfig:ze,chartDefaultValue:Ge})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ja=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Fe,chartConfig:Ne,chartDefaultValue:Pe})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Wa=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:Ye,chartConfig:Ke,chartDefaultValue:$e})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ya=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:{},chartConfig:pe,chartDefaultValue:ue})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),$a=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:He,chartConfig:_e,chartDefaultValue:qe})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"initState",value:function(){a(l(o.prototype),"initState",this).call(this),this.state.style={}}},{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Ka=function(e){n(o,e);var t,i=r(o);function o(e,t,a,n){var r;return f(this,o),(r=i.call(this,e,t,a,n,{chartModel:je,chartConfig:Ve,chartDefaultValue:Ue})).mode=e,r.context=t,r.viewParams=a,r.config=n,r}return v(o,[{key:"initState",value:function(){a(l(o.prototype),"initState",this).call(this),this.state.style={},this.state.attrs={}}},{key:"handleValueChange",value:(t=b(y().mark((function e(t,n,i){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(l(o.prototype),"handleValueChange",this).call(this,t,n,i),!t.startsWith("data.")&&!t.startsWith("extend")){e.next=12;break}return e.next=4,this.checkData();case 4:if(e.sent){e.next=8;break}return this.state.model=this.chartModel,e.abrupt("return");case 8:return e.next=10,this.fetchDataSource();case 10:r=e.sent,this.state.items=r;case 12:this.refresh();case 13:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})}]),o}(Pa),Za=function(){function e(){f(this,e),C(this,"component","IBizBIReportNumber")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ya,a)}),I({},e));return a}}]),e}(),Qa=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ba,a)}),I({},e));return a}}]),e}(),en=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Va,a)}),I({},e));return a}}]),e}(),tn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ua,a)}),I({},e));return a}}]),e}(),an=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(ja,a)}),I({},e));return a}}]),e}(),nn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(_a,a)}),I({},e));return a}}]),e}(),rn=function(){function e(){f(this,e),C(this,"component","IBizBIReportGridShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t($a,a)}),I({},e));return a}}]),e}(),on=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(za,a)}),I({},e));return a}}]),e}(),sn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ga,a)}),I({},e));return a}}]),e}(),ln=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ha,a)}),I({},e));return a}}]),e}(),cn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(qa,a)}),I({},e));return a}}]),e}(),dn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Xa,a)}),I({},e));return a}}]),e}(),pn=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ja,a)}),I({},e));return a}}]),e}(),un=function(){function e(){f(this,e),C(this,"component","IBizBIReportChartShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Wa,a)}),I({},e));return a}}]),e}(),hn=function(){function e(){f(this,e),C(this,"component","IBizBIReportGridShell")}return v(e,[{key:"createController",value:function(e){var a=se((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(Ka,a)}),I({},e));return a}}]),e}(),fn=g({name:"IBizBIReportChartShell",props:{c:{type:Object,required:!0}},setup:function(e){var t=s("bi-report-chart-shell"),a=e.c;return{ns:t,controller:a,handleControllerAppear:function(e){a.setChartController(e)}}},render:function(){return this.controller.state.isCreated&&this.controller.state.refreshFlag?T(O("iBizChartControl"),{modelData:this.controller.state.model,context:this.controller.context,isSimple:!0,data:this.controller.state.items,onControllerAppear:this.handleControllerAppear},null):null}}),mn=g({name:"IBizBIReportGridShell",props:{c:{type:Object,required:!0}},setup:function(e){var t=s("bi-report-grid"),a=e.c;return{ns:t,controller:a,handleControllerAppear:function(e){a.setChartController(e)},renderNoData:function(){return T(O("iBizNoData"),{text:ibiz.i18n.t("control.common.currentNoData")},null)}}},render:function(){if(!this.controller.state.isCreated||!this.controller.state.refreshFlag)return null;var e=this.controller.state.style,t=e.vars,a=e.classList,n=void 0===a?[]:a,i=this.controller.state.model.degridColumns;return 0===(void 0===i?[]:i).length?this.renderNoData():T(O("iBizGridControl"),k({modelData:this.controller.state.model,context:this.controller.context,isSimple:!0,style:t,class:[].concat(d(n),[this.ns.b()]),data:this.controller.state.tableData,onControllerAppear:this.handleControllerAppear},this.controller.state.attrs),null)}}),vn=g({name:"IBizBIReportNumber",props:{c:{type:Object,required:!0},enableDrillDetail:{type:Boolean,default:!0}},emits:["drillDetail"],setup:function(e,t){var a=t.emit,n=e.c,i=s("amount"),r=x({visible:!1,yoy:0,qoq:0,currentTotal:0,yoyTotal:0,qoqTotal:0}),o=w((function(){return n.state.reportModel})),l=w((function(){var e;if(null!==(e=o.value)&&void 0!==e&&e.reportUIModel){var t,a=JSON.parse(null===(t=o.value)||void 0===t?void 0:t.reportUIModel);if(a.style)return a.style}return{}})),c=w((function(){var e={};if(l.value&&l.value.font&&l.value.font.font){var t=l.value.font.font,a=t.fontWeight,n=t.fontStyle,i=t.fontSize,r=t.color;Object.assign(e,{fontWeight:a,fontStyle:n,fontSize:"".concat(i,"px"),color:r})}return e})),d=w((function(){var e={};if(l.value&&l.value.font&&l.value.font.font){var t=l.value.font.font,a=t.fontWeight,n=t.fontStyle,i=t.fontSize,r=t.color;Object.assign(e,{fontWeight:a,fontStyle:n,fontSize:"".concat(i/5,"px"),color:r})}return e}));E((function(){return[o.value,n.state.items]}),(function(){var e,t;r.value.yoy=0,r.value.qoq=0,r.value.currentTotal=0,r.value.yoyTotal=0,r.value.qoqTotal=0,(t=null===(e=o.value)||void 0===e||null===(e=e.appBIReportMeasures)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.measureTag)&&(n.state.items.forEach((function(e){e&&"PoP1"===e.srfperiodtype?r.value.qoqTotal=Number.isNaN(Number(e[t]))?0:Number(e[t]):e&&"YoY1"===e.srfperiodtype?r.value.yoyTotal=Number.isNaN(Number(e[t]))?0:Number(e[t]):e&&e[t]&&(r.value.currentTotal=Number.isNaN(Number(e[t]))?0:Number(e[t]))})),r.value.qoq=r.value.currentTotal-r.value.qoqTotal,r.value.yoy=r.value.currentTotal-r.value.yoyTotal)}),{immediate:!0,deep:!0});var p=function(){return T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor",style:"transform: rotate(180deg);"},[T("g",{id:"aft1.Base基础/1.icon图标/5.navigation/caret-down","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M5.02 8.233l5.952-5.952a.6.6 0 0 1 1.025.424v5.952a.6.6 0 0 1-.6.6H5.445a.6.6 0 0 1-.424-1.024z",id:"aft路径",transform:"rotate(45 7.997 5.257)"},null)])])},u=w({get:function(){return r.value.visible&&e.enableDrillDetail&&"CONTENT"===e.c.mode&&!ibiz.fullscreenUtil.isFullScreen},set:function(e){r.value.visible=e}});return{ns:i,controller:n,uiState:r,style:c,renderUpDownResult:function(e,t){if(0===e)return 0===t?T("span",null,[A("-")]):T("div",{class:i.e("up")},[p(),T("span",null,[A("100%")])]);var a=t-e,n=(Math.abs(a)/e*100).toFixed(0);return a<0?T("div",{class:i.e("down")},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"aft1.Base基础/1.icon图标/5.navigation/caret-down","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M5.02 8.233l5.952-5.952a.6.6 0 0 1 1.025.424v5.952a.6.6 0 0 1-.6.6H5.445a.6.6 0 0 1-.424-1.024z",id:"aft路径",transform:"rotate(45 7.997 5.257)"},null)])]),T("span",null,[n,A("%")])]):0===a?T("span",null,[A("-")]):T("div",{class:i.e("up")},[p(),T("span",null,[n,A("%")])])},miniStyle:d,reportUIModelStyle:l,onDrillDetail:function(){var e;r.value.visible=!1,a("drillDetail",{measure:{name:null===(e=o.value)||void 0===e||null===(e=e.appBIReportMeasures)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.measureTag}})},handleFormat:function(e){var t,a=null===(t=o.value)||void 0===t||null===(t=t.appBIReportMeasures)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.jsonFormat;return a?ibiz.util.text.format(String(e),a):e},visibleComp:u}},render:function(){var e,t,a,n,i,r,o=this;return this.controller.state.isCreated&&this.controller.state.refreshFlag?T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("content")},[T(O("el-popover"),{trigger:"click",visible:this.visibleComp,"onUpdate:visible":function(e){return o.visibleComp=e},"popper-class":this.ns.e("check-detail"),placement:"right-start",width:200},{default:function(){return T("div",{onClick:o.onDrillDetail,class:o.ns.em("check-detail","item")},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{id:"aspnormal/preview","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M11.626 0c1.057 0 1.923.818 2 1.855l.005.15v3.411a.6.6 0 0 1-1.192.097l-.008-.097.001-1.348V2.005c0-.41-.31-.749-.705-.799l-.101-.006h-9.62c-.41 0-.75.308-.8.704l-.006.101v11.989c0 .41.308.75.705.8l.101.006h5.906l.017-.004.016-.003h2.074a.598.598 0 1 1 .107 1.187l-.095.01V16H2.006a2.006 2.006 0 0 1-2-1.856L0 13.994V2.005C0 .948.818.082 1.856.005L2.006 0h9.62zm-1.595 6.328a3.669 3.669 0 0 1 3.665 3.665c0 .79-.251 1.523-.678 2.123l2.412 2.412a.6.6 0 1 1-.848.85l-2.41-2.412a3.646 3.646 0 0 1-2.14.692 3.67 3.67 0 0 1-3.667-3.665 3.67 3.67 0 0 1 3.666-3.665zm-5.106 5.29a.6.6 0 0 1 .097 1.191l-.097.008H2.85a.6.6 0 0 1-.097-1.192l.097-.008h2.074zm5.106-4.09a2.468 2.468 0 0 0-2.466 2.465 2.468 2.468 0 0 0 2.466 2.466 2.47 2.47 0 0 0 2.466-2.466 2.469 2.469 0 0 0-2.466-2.465zm-4.815-.126a.6.6 0 0 1 .097 1.193l-.097.007h-2.35A.6.6 0 0 1 2.77 7.41l.098-.008h2.349zm5.58-4a.6.6 0 0 1 .097 1.192l-.097.008H2.867A.6.6 0 0 1 2.77 3.41l.097-.008h7.929z",id:"asp合并形状"},null)])]),T("span",{class:o.ns.em("check-detail","text")},[A("查看明细")])])},reference:function(){return T("div",{class:o.ns.em("content","number")},[T("span",{class:o.ns.em("content","number-text"),style:o.style},[o.handleFormat(o.uiState.currentTotal)]),T("span",{class:o.ns.em("content","number-unit"),style:o.miniStyle},null)])}}),T("div",{class:this.ns.em("content","compare")},[(null===(e=this.reportUIModelStyle.yoy)||void 0===e?void 0:e.show)&&T("div",{class:this.ns.em("content","yoy")},[T("div",{class:this.ns.em("content","compare-number")},[T("span",null,[A("同比")]),T("span",{class:[this.ns.em("content","yoy-yoyTotal"),this.ns.is("show",null===(t=this.reportUIModelStyle.yoy)||void 0===t||null===(t=t.yoy)||void 0===t?void 0:t.includes("orgin"))]},[this.uiState.yoyTotal]),T("span",{class:[this.ns.em("content","yoy-value"),this.ns.is("show",null===(a=this.reportUIModelStyle.yoy)||void 0===a||null===(a=a.yoy)||void 0===a?void 0:a.includes("difference"))]},[A("("),this.uiState.yoy>0?"+":"",this.uiState.yoy,A(")")])]),T("div",{class:this.ns.em("content","icon")},[this.renderUpDownResult(this.uiState.yoyTotal,this.uiState.currentTotal)])]),(null===(n=this.reportUIModelStyle.qoq)||void 0===n?void 0:n.show)&&T("div",{class:this.ns.em("content","qoq")},[T("div",{class:this.ns.em("content","compare-number")},[T("span",null,[A("环比")]),T("span",{class:[this.ns.em("content","qoq-qoqTotal"),this.ns.is("show",null===(i=this.reportUIModelStyle.qoq)||void 0===i||null===(i=i.qoq)||void 0===i?void 0:i.includes("orgin"))]},[this.uiState.qoqTotal]),T("span",{class:[this.ns.em("content","qoq-value"),this.ns.is("show",null===(r=this.reportUIModelStyle.qoq)||void 0===r||null===(r=r.qoq)||void 0===r?void 0:r.includes("difference"))]},[A("("),this.uiState.qoq>0?"+":"",this.uiState.qoq,A(")")])]),T("div",{class:this.ns.em("content","icon")},[this.renderUpDownResult(this.uiState.qoqTotal,this.uiState.currentTotal)])])])])]):null}}),yn=g({name:"IBizBIReportContent",components:{IBizBIReportChartShell:fn,IBizBIReportGridShell:mn,IBizBIReportNumber:vn},props:{mode:{type:String,require:!0},context:{type:Object,require:!0},viewParams:{type:Object,require:!0},controller:{type:Object},config:{type:Object}},emits:["reportChartChange","init"],setup:function(e,t){var a=t.emit,n=s("content"),i={name:"AppView",id:"AppView",viewType:"DECUSTOMVIEW",appId:ibiz.env.appId};F("ctx",new Q(i,_.create({})).ctx);var r=x(),o=x();if("DESIGN"===e.mode){var l;!function(t){var n,i=va(t);r.value=i;var s=I({},e.config);Object.assign(s,{selectChartType:t,selectCubeId:null===(n=e.controller)||void 0===n?void 0:n.state.selectCube.pssysbicubeid}),o.value=null==i?void 0:i.createController({mode:"DESIGN",context:e.context,viewParams:e.viewParams,config:e.config}),a("reportChartChange",o.value)}(null===(l=e.controller)||void 0===l?void 0:l.state.selectChartType)}else{var c=e.config.reportUIModel,d="NUMBER";if(c)d=JSON.parse(c).selectChartType||"NUMBER";var p=va(d);r.value=p,o.value=null==p?void 0:p.createController({mode:"CONTENT",context:e.context,viewParams:e.viewParams,config:e.config})}a("init",o.value),R((function(){o.value&&o.value.destroyed()}));return{ns:n,c:o,provider:r,onDrillDetail:function(e){var t;null===(t=o.value)||void 0===t||t.handleDrillDetail(e)}}},render:function(){var e;return N(T("div",{class:this.ns.b("container")},[(null===(e=this.c)||void 0===e?void 0:e.state.isCreated)&&L(O(this.provider.component),{c:this.c,onDrillDetail:this.onDrillDetail})]),[[P("loading"),this.c&&!this.c.state.isCreated]])}}),gn=g({name:"BIContentCaption",props:{config:{type:Object,default:function(){}},controller:{type:Object}},setup:function(e){var t=s("bi-content-caption"),a=w((function(){var t;return null===(t=e.controller)||void 0===t||null===(t=t.state.propertyData)||void 0===t?void 0:t.caption})),n=x({chartCaption:a.value,isFocus:!1}),i=function(){var t;n.value.isFocus=!1,null===(t=e.controller)||void 0===t||t.setData("caption",n.value.chartCaption)};return{ns:t,caption:w((function(){var t;return(null===(t=e.controller)||void 0===t?void 0:t.state.propertyData.caption)||"未命名"})),uiState:n,onFocus:function(){var t;n.value.isFocus=!0,n.value.chartCaption=null===(t=e.controller)||void 0===t||null===(t=t.state.propertyData)||void 0===t?void 0:t.caption},onChange:i,handleKeyDown:function(t){if(t&&"Enter"===t.code)i();else if(t&&"Escape"===t.code){var a;t.stopPropagation(),n.value.isFocus=!1,n.value.chartCaption=null===(a=e.controller)||void 0===a?void 0:a.state.propertyData.caption}}}},render:function(){var e,t=this;return T("div",{class:this.ns.b()},[T("div",{class:[this.ns.e("caption"),this.ns.is("focus",this.uiState.isFocus)]},[T("div",{class:this.ns.e("label")},[T("span",null,[this.caption]),T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false"},[T("g",{id:"aiwaction/edit","stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M2 8.34L10.71 0 15 4.17 6.538 13H2V8.34zm1.2.512V11.8h2.826l7.283-7.6-2.606-2.533L3.2 8.852zM0 16v-1.2h16V16H0z",id:"aiw编辑"},null)])])]),T(O("el-input"),{class:this.ns.e("input"),modelValue:this.uiState.chartCaption,"onUpdate:modelValue":function(e){return t.uiState.chartCaption=e},placeholder:"请输入报表名称(不超过32字符)",onFocus:this.onFocus,onKeydown:this.handleKeyDown,onBlur:this.onChange},null)]),T("div",{class:this.ns.e("data-total")},[A("共"),T("span",{class:this.ns.e("size")},[(null===(e=this.controller)||void 0===e||null===(e=e.state.reportChart)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.items.length)||0]),A("条数据")])])}}),bn=g({name:"BIDesignHeader",props:{controller:{type:Object,required:!0}},setup:function(e){var t=s("design-header"),a=w((function(){return e.controller.state.propertyData})),n=w((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.caption})),i=function(){var t=b(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.close();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var a=b(y().mark((function a(){return y().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.controller||e.controller.state.dataChangeState){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,ibiz.confirm.warning({title:"确认取消保存",desc:T("div",{class:t.b("report-caption")},[T("div",null,[A("确认取消保存报表"),T("div",{class:t.be("report-caption","name")},[n.value||"未命名"]),A("吗？")]),T("div",{class:t.be("report-caption","desc")},[A("取消保存后无法保存编辑信息。")])])});case 4:a.sent&&e.controller.cancel();case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return{ns:t,caption:n,onSave:function(){e.controller.save()},onClose:i,onReset:r}},render:function(){return T("div",{class:this.ns.b()},[T("div",{class:this.ns.e("caption")},[T("span",{class:this.ns.em("caption","text")},[this.caption])]),T("div",{class:this.ns.e("actions")},[T("div",{class:this.ns.em("actions","close"),onClick:this.onClose},[A("返回")]),T("div",{class:this.ns.em("actions","save")},[T(O("el-dropdown"),{"split-button":!0,type:"primary",onClick:this.onSave,onCommand:this.onReset,"popper-class":this.ns.b("save-popper")},{default:function(){return T("span",null,[A("保存")])},dropdown:function(){return T(O("el-dropdown-menu"),null,{default:function(){return[T(O("el-dropdown-item"),null,{default:function(){return[A("取消保存")]}})]}})}})])])])}}),wn=g({name:"IBizBIReportDesign",components:{"bi-report-select":de,"bi-report-property":pa,"bi-report-content":yn,"bi-content-caption":gn,"bi-design-header":bn},props:{context:{type:Object,require:!0},viewParams:{type:Object,require:!0},dismiss:{type:Object},config:{type:Object,default:function(){return{reportTag:"bi_report",selectChartType:"NUMBER"}}},measureToolbar:{type:Object},dimensionToolbar:{type:Object}},emit:["action-click"],setup:function(e,a){var n=a.emit,i=s("bi-report-design"),r=oe((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t(ga,a)}));return r.evt.on("onActionClick",(function(e){var t=e.detail,a=e.item,i=e.event;n("action-click",{detail:t,item:a,event:i})})),{ns:i,c:r,handleReportChartChange:function(e){r.setReportChart(e)},handleReportChartTypeChange:function(e){r.switchReportType(e)}}},render:function(){return N(T("div",{class:this.ns.b("container")},[this.c.state.isCreated&&[T("div",{class:this.ns.be("container","header")},[T(O("bi-design-header"),{controller:this.c},null)]),T("div",{class:this.ns.be("container","design-area")},[T("div",{class:this.ns.b("sidebar")},[T(O("bi-report-select"),{controller:this.c},null),T(O("bi-report-property"),{controller:this.c,onReportChartTypeChange:this.handleReportChartTypeChange},null)]),T("div",{class:this.ns.b("content")},[T(O("bi-content-caption"),{controller:this.c,config:this.config},null),this.c.state.reportModel&&T(O("bi-report-content"),{mode:"DESIGN",context:this.c.context,viewParams:this.c.viewParams,controller:this.c,config:this.c.state.reportModel,onReportChartChange:this.handleReportChartChange},null)])])]]),[[P("loading"),!this.c.state.isCreated]])}}),In=g({name:"BIReportDrillShell",props:{appViewId:{type:String,required:!0},context:{type:Object,required:!0},data:{type:Object,required:!0},reportModel:{type:Object,required:!0},config:{type:Object,required:!0},dynamicDataDic:{type:Object,required:!0}},setup:function(e){var t=s("bi-report-drill-shell"),a=x(""),n=x([]),i=x([]),r=x(""),o=x({}),l=x(!1),c=function(){var t=b(y().mark((function t(a){var n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.context){t.next=2;break}return t.abrupt("return",[]);case 2:return n=ibiz.hub.getApp(e.context.srfappid),t.next=5,n.codeList.get(a,e.context);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t,a,s=e.config,l=s.appBISchemeId,c=s.appBICubeId,d=e.data.measure,p=null===(t=e.data.dimension)||void 0===t?void 0:t.filter((function(e){return i.value.includes(e.name)})),u="",h={bicubetag:c},f=null===(a=e.reportModel.appBIReportMeasures)||void 0===a?void 0:a.find((function(e){return e.measureTag===d.name}));if(f){Object.assign(h,{bimeasures:Tt(e.reportModel,[f])}),u+="".concat(l,".").concat(c,".").concat(f.measureTag);var m=[];if(Object.assign(h,{bidimensions:[]}),p&&p.length>0){var v;u+="$";var y=new Map;p.forEach((function(e,t){y.set(e.name,e.value),u+="".concat(e.name,"=").concat(e.value),t!==p.length-1&&(u+="&")})),(m=null===(v=e.reportModel.appBIReportDimensions)||void 0===v?void 0:v.filter((function(e){return y.has(e.dimensionTag)})))&&m.length>0&&Object.assign(h,{bidimensions:xt(e.reportModel,m)})}Object.assign(h,{bisort:Et(e.reportModel,[f],m)});var g=[{condtype:"CUSTOM",customtype:"BIDRILLDETAIL",customcond:u}],b=Nt(e.reportModel);b&&g.push(b[0]),Object.assign(h,{searchconds:g}),o.value=h,r.value=n.value.filter((function(e){return i.value.some((function(t){return t===e.name}))})).map((function(e){return e.text})).join(",")}else ibiz.log.error("执行数据反查未找到指标数据中断")},p=function(){var t=b(y().mark((function t(){var r,o,s,p,u,h,f,m;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l.value=!1,r=e.data,o=r.measure,s=r.dimension,o&&(u=null===(p=e.reportModel.appBIReportMeasures)||void 0===p?void 0:p.find((function(e){return e.measureTag===o.name})))&&(a.value=u.measureName||""),!Array.isArray(s)){t.next=12;break}if(!(f=null===(h=e.reportModel.appBIReportDimensions)||void 0===h?void 0:h.filter((function(e){return s.some((function(t){return t.name===e.dimensionTag}))})))||!f.length){t.next=12;break}return t.next=9,Promise.all(f.map(function(){var t=b(y().mark((function t(a){var n,i,r,o,l,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null===(n=s.find((function(e){return e.name===a.dimensionTag})))||void 0===n?void 0:n.value,r=i,!a.appCodeListId){t.next=8;break}return t.next=5,c(a.appCodeListId);case 5:o=t.sent,(l=null==o?void 0:o.find((function(e){return e.value===i})))&&(r=l.text);case 8:return!a.appCodeListId&&a.textAppDEFieldId&&e.dynamicDataDic&&(r=null===(d=e.dynamicDataDic[a.dimensionTag])||void 0===d?void 0:d["".concat(i)]),t.abrupt("return",{text:a.dimensionName,name:a.dimensionTag,value:i,valueText:r});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:m=t.sent,n.value=m,i.value=n.value.map((function(e){return e.name}));case 12:d();case 13:return t.prev=13,l.value=!0,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,,13,16]])})));return function(){return t.apply(this,arguments)}}();p();return{ns:t,caption:a,items:n,activeItems:i,activeText:r,customParams:o,isLoaded:l,handleClick:function(e){var t=i.value.findIndex((function(t){return t===e.name}));-1!==t?i.value.splice(t,1):i.value.push(e.name),d()}}},render:function(){var e=this;if(this.isLoaded)return T("div",{class:this.ns.b()},[T("div",{class:this.ns.b("header")},[this.caption]),T("div",{class:this.ns.b("content")},[this.items.length>0&&T("div",{class:this.ns.b("content-left")},[T("div",{class:this.ns.b("content-left-list")},[this.items.map((function(t){return T("div",{class:[e.ns.b("item"),e.ns.is("active",e.activeItems.includes(t.name))],onClick:function(){e.handleClick(t)}},[T("div",{class:e.ns.be("item","name")},[t.text||""]),T("div",{class:e.ns.be("item","value")},[t.valueText||""])])}))]),T("div",{class:this.ns.b("content-left-active-items"),title:"已过滤的纬度：".concat(this.activeText)},[T("span",{class:this.ns.be("content-left-active-items","text")},[A("已过滤的纬度："),this.activeText])])]),T("div",{class:this.ns.b("content-right")},[L(O("IBizViewShell"),{context:this.context,params:this.customParams,viewId:this.appViewId})])])])}}),Cn=function(e){n(s,e);var t,i=r(s);function s(){var e;f(this,s);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return C(o(e=i.call.apply(i,[this].concat(a))),"config",{}),C(o(e),"context",void 0),C(o(e),"reportKey",""),C(o(e),"measureToolbar",null),C(o(e),"dimensionToolbar",null),e}return v(s,[{key:"initReportKey",value:function(){var e,t,a=null===(e=this.panel.view.model)||void 0===e?void 0:e.appDataEntityId;a&&(this.reportKey=te(a));var n=null===(t=this.model)||void 0===t||null===(t=t.editor)||void 0===t?void 0:t.editorParams;n&&n.appDataEntityId&&(this.reportKey=n.appDataEntityId)}},{key:"initToolbar",value:function(){var e,t=(null===(e=this.panel.view.model.viewLayoutPanel)||void 0===e?void 0:e.controls)||[];this.measureToolbar=t.find((function(e){return"TOOLBAR"===e.controlType&&"measure_toolbar"===e.name})),this.dimensionToolbar=t.find((function(e){return"TOOLBAR"===e.controlType&&"dimension_toolbar"===e.name}))}},{key:"onInit",value:(t=b(y().mark((function e(){var t,n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(l(s.prototype),"onInit",this).call(this);case 2:return this.initReportKey(),this.initToolbar(),t=H(this.panel.context),Object.assign(t,{pssysbireport:t[this.reportKey]}),this.context=t,n=ibiz.hub.getApp(ibiz.env.appId),e.prev=8,this.panel.view.startLoading(),e.next=12,n.deService.exec("pssysbireport","get",t,this.panel.params);case 12:if(!(i=e.sent).data){e.next=20;break}return e.next=16,ibiz.util.biReport.translateDEReportToConfig(i.data);case 16:r=e.sent,this.panel.params.srfreporttag&&(r.reportTag=this.panel.params.srfreporttag),this.panel.params.srfbischematag&&(r.selectedSchemeId=this.panel.params.srfbischematag),this.config=r;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(8),new z(e.t0.message);case 25:return e.prev=25,this.panel.view.endLoading(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[8,22,25,28]])}))),function(){return t.apply(this,arguments)})}]),s}(ee),Tn=g({name:"BIReportPanel",props:{modelData:{type:Object,required:!0},controller:{type:Cn,required:!0}},setup:function(e){var t=s("bi-report-panel"),a=e.controller,n=function(){var e=b(y().mark((function e(t){var n,i,r,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detail,i=t.item,r=t.event,o=I({},a.panel.params),s=n.uiactionId,e.next=5,Y.execAndResolved(s,{context:a.context,params:o,data:[i],view:a.panel.view,event:r},n.appId);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{ns:t,c:a,onActionClick:n}},render:function(){return T("div",{class:this.ns.b()},[T(O("iBizBIReportDesign"),{context:this.c.context,params:this.c.panel.params,config:this.c.config,measureToolbar:this.c.measureToolbar,dimensionToolbar:this.c.dimensionToolbar,dismiss:function(){window.history.back()},onActionClick:this.onActionClick},null)])}}),xn=function(){function e(){f(this,e),C(this,"component","BIReportPanel")}var t;return v(e,[{key:"createController",value:(t=b(y().mark((function e(t,a,n){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Cn(t,a,n),e.next=3,i.init();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),function(e,a,n){return t.apply(this,arguments)})}]),e}(),En={install:function(e){e.component(Tn.name,Tn),ae("CUSTOM_BI_REPORT_PANEL",(function(){return new xn}))}},Sn=function(e){n(a,e);var t=r(a);function a(){var e;f(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return C(o(e=t.call.apply(t,[this].concat(i))),"propertyData",{}),C(o(e),"reportModel",void 0),C(o(e),"gridPropertyData",{}),C(o(e),"gridReportModel",void 0),C(o(e),"defaultPropertyData",{}),C(o(e),"defaultGridPropertyData",{}),C(o(e),"defaultReportModel",void 0),C(o(e),"defaultGridReportModel",void 0),C(o(e),"isLoadedSchema",!1),C(o(e),"schemaFields",[]),C(o(e),"conditionFields",[]),C(o(e),"conditionFieldMap",new Map),C(o(e),"fields",[]),C(o(e),"fieldIconMap",new Map),C(o(e),"measure",[]),C(o(e),"dimension",[]),C(o(e),"cond",void 0),C(o(e),"filter",[]),C(o(e),"filterMode",""),C(o(e),"customCond",""),C(o(e),"condNum",0),e}return v(a)}(ne),Dn=function(e){n(O,e);var t,i,s,c,p,u,h,m,g,w,T,x,E,S,D=r(O);function O(){var e;f(this,O);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return C(o(e=D.call.apply(D,[this].concat(a))),"config",{}),C(o(e),"context",void 0),C(o(e),"grid",void 0),C(o(e),"chart",void 0),C(o(e),"gridType",["GRID","CROSSTABLE"]),C(o(e),"reportKey",""),C(o(e),"appBICube",void 0),e}return v(O,[{key:"createState",value:function(){var e;return new Sn(null===(e=this.parent)||void 0===e?void 0:e.state)}},{key:"initReportKey",value:function(){var e,t,a=null===(e=this.panel.view.model)||void 0===e?void 0:e.appDataEntityId;a&&(this.reportKey=te(a));var n=null===(t=this.model)||void 0===t||null===(t=t.editor)||void 0===t?void 0:t.editorParams;n&&n.appDataEntityId&&(this.reportKey=n.appDataEntityId)}},{key:"setGrid",value:function(e){this.grid=e}},{key:"setChart",value:function(e){this.chart=e}},{key:"initAppBICube",value:(S=b(y().mark((function e(){var t,a,n,i,r,o,s,l,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.config.selectChartType,n=this.gridType.includes(a)?this.state.gridReportModel:this.state.reportModel){e.next=4;break}return e.abrupt("return");case 4:if(i=n.appBISchemeId,r=n.appBICubeId,i&&r){e.next=7;break}return e.abrupt("return");case 7:return(o=H(this.context)).pssysbicube="".concat(i,".").concat(r),s=ibiz.hub.getApp(ibiz.env.appId),e.next=12,s.deService.exec("pssysbicube","get",o,this.panel.params);case 12:l=e.sent,this.appBICube=l.data,null!==(t=this.appBICube)&&void 0!==t&&t.pssysbicubeid&&(this.context.pssysbicube=null===(c=this.appBICube)||void 0===c?void 0:c.pssysbicubeid);case 15:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"initMeasure",value:(E=b(y().mark((function e(){var t,a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(I({},this.panel.params),{n_pssysbicubeid_eq:this.context.pssysbicube,size:1e3}),a=ibiz.hub.getApp(ibiz.env.appId),e.next=4,a.deService.exec("pssysbicubemeasure","fetchdefault",this.context,t);case 4:n=e.sent,Array.isArray(n.data)&&(this.state.measure=n.data);case 6:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"initDimension",value:(x=b(y().mark((function e(){var t,a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(I({},this.panel.params),{n_pssysbicubeid_eq:this.context.pssysbicube,size:1e3}),a=ibiz.hub.getApp(ibiz.env.appId),e.next=4,a.deService.exec("pssysbicubedimension","fetchdefault",this.context,t);case 4:n=e.sent,Array.isArray(n.data)&&(this.state.dimension=n.data);case 6:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"initSchemaFields",value:(T=b(y().mark((function e(){var t,a,n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(t=this.appBICube)||void 0===t?void 0:t.psdename){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Pt(a);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,zt(n);case 10:if(i=e.sent,!Array.isArray(i)){e.next=17;break}return e.next=14,ibiz.hub.getAppDataEntity(a,this.context.srfappid);case 14:(r=e.sent)&&i.forEach((function(e){Object.assign(e,{appDataEntityFullTag:r.defullTag})})),this.state.schemaFields=i;case 17:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"initFields",value:(w=b(y().mark((function e(){var t,a,n,i=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.schemaFields.length){e.next=2;break}return e.abrupt("return");case 2:return t=["COMMON"],a=[].concat(d(this.state.measure.filter((function(e){return t.includes(e.bimeasuretype)}))),d(this.state.dimension.filter((function(e){return t.includes(e.bidimensiontype)})))),e.next=6,Promise.all(a.map(function(){var e=b(y().mark((function e(t){var a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(t,i.state.schemaFields);case 2:return(a=e.sent)&&i.state.fieldIconMap.set(a.appDEFieldId,t.bimeasuretype?"measure":"dimension"),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:n=e.sent,this.state.fields=n.filter((function(e){return!!e}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"initConditionFields",value:(g=b(y().mark((function e(){var t,a,n,i=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.schemaFields.length){e.next=2;break}return e.abrupt("return");case 2:return t=["COMMON"],a=d(this.state.dimension.filter((function(e){return t.includes(e.bidimensiontype)}))),e.next=6,Promise.all(a.map(function(){var e=b(y().mark((function e(t){var a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(t,i.state.schemaFields);case 2:return(a=e.sent)&&i.state.conditionFieldMap.set(a.appDEFieldId,t),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:n=e.sent,this.state.conditionFields=n.filter((function(e){return!!e}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"initFilter",value:function(){var e,t,a,n=this.config.selectChartType,i=this.gridType.includes(n)?this.state.gridPropertyData:this.state.propertyData,r=null==i||null===(e=i.extend)||void 0===e?void 0:e.filterMode;if(this.state.filterMode=r||"",this.state.customCond="",this.state.filter=[],this.state.condNum=0,"pql"!==r){var o=(null==i||null===(t=i.data)||void 0===t?void 0:t.filter)||[];if(Array.isArray(o)&&(this.state.filter=o,this.state.condNum=this.state.filter.length),o.length){var s=[];o.forEach((function(e){var t,a,n;s.push({nodeType:"FIELD",field:null===(t=e.condition)||void 0===t?void 0:t.field,valueOP:null===(a=e.condition)||void 0===a?void 0:a.valueOP,value:null===(n=e.condition)||void 0===n?void 0:n.value})}));var l={nodeType:"GROUP",logicType:(null===(a=o[0])||void 0===a?void 0:a.groupLogicType)||"AND",children:s};this.state.cond=l}}else{var c,d=null==i||null===(c=i.extend)||void 0===c?void 0:c.pqlValue;if(this.state.customCond=d||"",this.state.customCond){var p,u=null===(p=$t(this.state.customCond))||void 0===p?void 0:p.filter((function(e){return"condition"===e.type}));u&&(this.state.condNum=u.length)}}}},{key:"loadSchema",value:(m=b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initAppBICube();case 2:return e.next=4,this.initSchemaFields();case 4:return e.next=6,this.initMeasure();case 6:return e.next=8,this.initDimension();case 8:return e.next=10,this.initConditionFields();case 10:return e.next=12,this.initFields();case 12:this.state.isLoadedSchema=!0;case 13:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"updateFilter",value:(h=b(y().mark((function e(t){var a,n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.filter=t,this.state.condNum=this.state.filter.length,!this.chart||!this.state.propertyData){e.next=11;break}return this.state.propertyData.data||(this.state.propertyData.data={}),this.state.propertyData.extend||(this.state.propertyData.extend={}),this.state.gridPropertyData.extend.filterMode=this.state.filterMode,this.state.propertyData.data.filter=t,e.next=9,this.compileAppBIReport(this.config.selectChartType,this.state.propertyData);case 9:a=e.sent,this.chart.handleValueChange("data.","",a||{});case 11:if(!this.grid||!this.state.defaultGridReportModel){e.next=22;break}return this.state.gridPropertyData.data||(this.state.gridPropertyData.data={}),this.state.propertyData.extend||(this.state.propertyData.extend={}),this.state.gridPropertyData.extend.filterMode=this.state.filterMode,this.state.gridPropertyData.data.filter=t,n=this.config.selectChartType,i=this.gridType.includes(n)?n:"GRID",e.next=20,this.compileAppBIReport(i,this.state.gridPropertyData);case 20:r=e.sent,this.grid.handleValueChange("data.","",r||{});case 22:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"updateCustomCond",value:(u=b(y().mark((function e(t){var a,n,i,r,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.customCond=t,this.state.customCond?(n=null===(a=$t(this.state.customCond))||void 0===a?void 0:a.filter((function(e){return"condition"===e.type})))&&(this.state.condNum=n.length):this.state.condNum=0,!this.chart||!this.state.propertyData){e.next=10;break}return this.state.propertyData.extend||(this.state.propertyData.extend={}),this.state.propertyData.extend.filterMode=this.state.filterMode,this.state.propertyData.extend.pqlValue=t,e.next=8,this.compileAppBIReport(this.config.selectChartType,this.state.propertyData);case 8:i=e.sent,this.chart.handleValueChange("data.","",i||{});case 10:if(!this.grid||!this.state.defaultGridReportModel){e.next=20;break}return this.state.gridPropertyData.extend||(this.state.gridPropertyData.extend={}),this.state.gridPropertyData.extend.filterMode=this.state.filterMode,this.state.gridPropertyData.extend.pqlValue=t,r=this.config.selectChartType,o=this.gridType.includes(r)?r:"GRID",e.next=18,this.compileAppBIReport(o,this.state.gridPropertyData);case 18:s=e.sent,this.grid.handleValueChange("data.","",s||{});case 20:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"resetModel",value:function(){this.state.propertyData=H(this.state.defaultPropertyData),this.state.gridPropertyData=H(this.state.defaultGridPropertyData),this.initFilter(),this.chart&&this.state.defaultReportModel&&this.chart.handleValueChange("data.","",H(this.state.defaultReportModel)),this.grid&&this.state.defaultGridReportModel&&this.grid.handleValueChange("data.","",H(this.state.defaultGridReportModel))}},{key:"onInit",value:(p=b(y().mark((function e(){var t,n,i,r,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(l(O.prototype),"onInit",this).call(this);case 2:return this.initReportKey(),t=H(this.panel.context),Object.assign(t,{pssysbireport:t[this.reportKey]}),this.context=t,n=ibiz.hub.getApp(ibiz.env.appId),e.prev=7,this.panel.view.startLoading(),e.next=11,n.deService.exec("pssysbireport","get",t,this.panel.params);case 11:if(!(i=e.sent).data){e.next=25;break}return e.next=15,ibiz.util.biReport.translateDEReportToConfig(i.data);case 15:if(r=e.sent,this.panel.params.srfreporttag&&(r.reportTag=this.panel.params.srfreporttag),this.config=r,o=this.config.selectChartType,this.gridType.includes(o)){e.next=22;break}return e.next=22,this.initReportModel();case 22:return e.next=24,this.initGridReportModel();case 24:this.initFilter();case 25:e.next=30;break;case 27:throw e.prev=27,e.t0=e.catch(7),new z(e.t0.message);case 30:return e.prev=30,this.panel.view.endLoading(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[7,27,30,33]])}))),function(){return p.apply(this,arguments)})},{key:"getDefaultValue",value:function(e,t){var a=nt(e),n=a.chartDefaultValue,i=a.chartConfig,r=H(n);return t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(e){"data"===e?Object.keys(t.data).forEach((function(e){if(Object.prototype.hasOwnProperty.call(r.data,e)){var a,n=null==i?void 0:i.data.details.find((function(t){return t.id===e}));if(!n)return;if(n&&n.details[0].multiple)r.data[e]=t.data[e];else r.data[e]=null===(a=t.data[e])||void 0===a?void 0:a.slice(0,1)}else"period"===e&&(r.data[e]=t.data[e])})):r[e]=t[e]})),r}},{key:"compileAppBIReport",value:(c=b(y().mark((function e(t,a){var n,i,r,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H(this.context),Object.assign(n,{pssysbireport:"__UNKNOWN__"}),e.next=4,ibiz.util.biReport.translateDataToAppBIReport({reportTag:this.config.reportTag,selectChartType:t,selectCubeId:this.config.selectCubeId,caption:a.caption,data:a.data,style:a.style,extend:a.extend});case 4:return i=e.sent,r=ibiz.hub.getApp(ibiz.env.appId),e.next=8,r.deService.exec("pssysbireport","compileappbireport",n,i);case 8:if(!(o=e.sent)||!o.data){e.next=15;break}return e.next=12,ibiz.hub.translationModelToDsl(o.data,"APPBIREPORT");case 12:return(s=e.sent).appBISchemeId=this.config.selectedSchemeId,e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"initReportModel",value:(s=b(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.propertyData={},this.state.reportModel=void 0,this.state.propertyData=this.getDefaultValue(this.config.selectChartType,H(this.config.propertyData)),this.state.defaultPropertyData=H(this.state.propertyData),e.next=6,this.compileAppBIReport(this.config.selectChartType,this.state.propertyData);case 6:(t=e.sent)&&(this.state.reportModel=t,this.state.defaultReportModel=H(t));case 8:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"initGridReportModel",value:(i=b(y().mark((function e(){var t,a,n,i,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.selectChartType,a=this.gridType.includes(t)?t:"GRID",this.state.gridPropertyData={},this.state.gridReportModel=void 0,n=H(this.gridType.includes(this.config.selectChartType)?this.config.propertyData:this.state.propertyData),i={caption:n.caption},Object.assign(i,{data:n.data}),Object.assign(i,{extend:n.extend}),this.gridType.includes(t)&&Object.assign(i,{style:n.style}),this.state.gridPropertyData=this.getDefaultValue(a,i),this.state.defaultGridPropertyData=H(this.state.gridPropertyData),e.next=13,this.compileAppBIReport(a,this.state.gridPropertyData);case 13:(r=e.sent)&&(this.state.gridReportModel=r,this.state.defaultGridReportModel=H(r));case 15:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateGridReportModel",value:(t=b(y().mark((function e(){var t,a,n,i,r,o,s,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.grid){e.next=2;break}return e.abrupt("return");case 2:return i=this.config.selectChartType,r=this.gridType.includes(i)?i:"GRID",o={},s={selectChartType:r,style:this.state.gridPropertyData.style},null!==(t=this.state.gridPropertyData.data)&&void 0!==t&&t.filter&&Object.assign(s,{filter:this.state.gridPropertyData.data.filter}),null!==(a=this.state.gridPropertyData.data)&&void 0!==a&&a.period&&Object.assign(s,{period:this.state.gridPropertyData.data.period}),(null===(n=this.state.gridPropertyData.data)||void 0===n||null===(n=n.group)||void 0===n?void 0:n.length)>0&&(l=this.state.gridPropertyData.data.group.map((function(e){return e.pssysbicubedimensionid})),Object.assign(s,{group:l})),o.reportUIModel=JSON.stringify(s),e.next=12,this.grid.handleValueChange("style","",o);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),O}(ee);function On(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!M(e)}var An=g({name:"BIFilterCondition",props:{value:{type:Object},schemaFields:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},context:{type:Object,required:!0},params:{type:Object,required:!0},borderMode:{type:String,default:"DEFAULT"}},emits:{change:function(e){return!0}},setup:function(e,t){var a=t.emit,n=s("bi-filter-condition"),i=x([]),r=x([{text:"且",value:"AND"},{text:"或",value:"OR"}]),o=new Map;Lt.forEach((function(e){return o.set(e.valueOP,e.label)}));var l=x(new Map);E((function(){return e.schemaFields}),(function(){l.value=new Map,e.schemaFields.forEach((function(e){l.value.set(e.appDEFieldId,e)}))}),{immediate:!0});var c=function(){var t=b(y().mark((function t(a){var n,i,r,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.editorProvider=void 0,a.editor=void 0,n=l.value.get(a.field)){t.next=5;break}return t.abrupt("return");case 5:return i=Ft(n),t.next=8,J(i);case 8:if(!(r=t.sent)){t.next=15;break}return a.editorProvider=r,t.next=13,r.createController(i,{context:e.context,params:e.params});case 13:o=t.sent,a.editor=o;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();E((function(){return e.value}),b(y().mark((function t(){var a,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.value){t.next=3;break}return i.value=[],t.abrupt("return");case 3:if(a=e.value.children,!Array.isArray(a)||!a.length){t.next=10;break}return n=e.value.logicType||"",t.next=8,Promise.all(a.map(function(){var e=b(y().mark((function e(t){var a,i,r,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.field||"",i=t.valueOP||"",r=t.value,o={key:ut(),connection:n,field:a,valueOP:i,value:r},e.next=6,c(o);case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return i.value=t.sent,t.abrupt("return");case 10:i.value=[];case 11:case"end":return t.stop()}}),t)}))),{immediate:!0});var d=function(){var e;if(i.value.length){var t=[];i.value.forEach((function(e){t.push({nodeType:"FIELD",field:e.field,valueOP:e.valueOP,value:e.value})}));var n={nodeType:"GROUP",logicType:(null===(e=i.value[0])||void 0===e?void 0:e.connection)||"AND",children:t};a("change",n)}else a("change",null)},p=function(){var t=b(y().mark((function t(){var a,n,r,o,s,p;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disabled){t.next=2;break}return t.abrupt("return");case 2:return r=i.value[0],o=(null===(a=e.schemaFields[0])||void 0===a?void 0:a.appDEFieldId)||"",s=(null===(n=l.value.get(o))||void 0===n||null===(n=n.valueOPs)||void 0===n?void 0:n[0])||"",p={key:ut(),connection:(null==r?void 0:r.connection)||"AND",field:o,valueOP:s},t.next=8,c(p);case 8:i.value.push(p),d();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var e=b(y().mark((function e(t){var a,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.value.get(t.field),t.valueOP=(null==n||null===(a=n.valueOPs)||void 0===a?void 0:a[0])||"",t.value=void 0,e.next=5,c(t);case 5:d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{ns:n,items:i,connectionItems:r,filterModeMap:o,schemaFieldMap:l,handleAdd:p,handleRemove:function(t){e.disabled||(i.value.splice(t,1),d())},renderEditor:function(t){if(!t.valueOP||Mt.includes(t.valueOP))return null;if(t.editorProvider&&t.editor){var a=O(t.editorProvider.formEditor);return L(a,{value:t.value,controller:t.editor,disabled:e.disabled,onChange:function(e){t.value=e,d()}})}},handleConnectionChange:function(e){i.value.forEach((function(t){t.connection=e.connection})),d()},handleFieldChange:u,handleValueOPChange:function(e){e.value=void 0,d()}}},render:function(){var e=this;return T("div",{class:[this.ns.b(),this.disabled&&this.ns.m("disabled")]},["BORDER"===this.borderMode&&T("div",{class:this.ns.e("filter-number")},[A("查询条件("),this.items.length,A(")")]),T("div",{class:[this.ns.b("content"),this.ns.is("border-mode","BORDER"===this.borderMode)]},[this.items.map((function(t,a){var n,i;return T("div",{class:e.ns.b("item")},[T("div",{class:[e.ns.be("item","connection"),0===a&&e.ns.bem("item","connection","init")]},[0===a?T("div",null,[A("当")]):T(O("el-select"),{modelValue:t.connection,"onUpdate:modelValue":function(e){return t.connection=e},disabled:a>1||e.disabled,onChange:function(){e.handleConnectionChange(t)}},On(n=e.connectionItems.map((function(e){return T(O("el-option"),{key:e.value,value:e.value,label:e.text},null)})))?n:{default:function(){return[n]}})]),T("div",{class:e.ns.b("item-content")},[T("div",{class:e.ns.be("item","field")},[T(O("el-select"),{modelValue:t.field,"onUpdate:modelValue":function(e){return t.field=e},disabled:e.disabled,onChange:function(){e.handleFieldChange(t)}},On(i=e.schemaFields.map((function(e){return T(O("el-option"),{key:e.appDEFieldId,value:e.appDEFieldId,label:e.caption},null)})))?i:{default:function(){return[i]}})]),T("div",{class:e.ns.be("item","valueOP")},[T(O("el-select"),{modelValue:t.valueOP,"onUpdate:modelValue":function(e){return t.valueOP=e},disabled:e.disabled,onChange:function(){e.handleValueOPChange(t)}},{default:function(){var a;return[null===(a=e.schemaFieldMap.get(t.field))||void 0===a||null===(a=a.valueOPs)||void 0===a?void 0:a.map((function(t){return T(O("el-option"),{key:t,value:t,label:e.filterModeMap.get(t)||t},null)}))]}})]),T("div",{class:e.ns.be("item","editor")},[e.renderEditor(t)])]),T("div",{class:e.ns.be("item","btn"),title:"删除",onClick:function(t){t.stopPropagation(),e.handleRemove(a)}},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.002 3.403V1a1 1 0 0 1 1-1h6.003a1 1 0 0 1 1 1v2.403h3.396a.6.6 0 1 1 0 1.2h-1.395V15a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4.603H.6a.6.6 0 1 1 0-1.2h3.4zm8.804 1.205H3.2V14.8h9.605V4.608zM5.202 1.2v2.155h5.603V1.2H5.202zm.6 6.417a.6.6 0 0 1 1.201 0v4.758a.6.6 0 0 1-1.2 0V7.617zm3.202 0a.6.6 0 0 1 1.2 0v4.758a.6.6 0 0 1-1.2 0V7.617z"},null)])])])])}))]),T("div",{class:[this.ns.b("footer"),this.ns.is("border-mode","BORDER"===this.borderMode)]},[T("div",{class:this.ns.b("footer-btn"),onClick:this.handleAdd},[T("svg",{class:this.ns.be("footer-btn","icon"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M8.578 7.383V1.602a.601.601 0 1 0-1.2 0v5.781H1.6a.601.601 0 0 0 0 1.203h5.777v5.812a.601.601 0 1 0 1.2 0V8.586H14.4a.601.601 0 0 0 0-1.203H8.578z"},null)])]),T("div",{class:this.ns.be("footer-btn","text")},[A("新增筛选条件")])])])])}}),Mn=g({name:"BIFilter",components:{"bi-filter-condition":An},props:{modal:{type:Object,required:!0},state:{type:Object,required:!0},context:{type:Object,required:!0},params:{type:Object,required:!0},borderMode:{type:String,default:"DEFAULT"}},emit:["confirm"],setup:function(e,t){var a=t.emit,n=s("bi-filter"),i=x(e.state.filterMode||"default"),r=w((function(){return e.state.isLoadedSchema})),o=x();E((function(){return e.state.cond}),(function(){o.value=e.state.cond}),{immediate:!0});var l=w((function(){return e.state.conditionFields})),c=w((function(){return e.state.fields})),d=w((function(){return e.state.fieldIconMap})),p=x(""),u=x();E((function(){return e.state.customCond}),(function(){p.value=e.state.customCond||""}),{immediate:!0});return{ns:n,activeTab:i,isLoaded:r,cond:o,schemaFields:l,handleCondChange:function(e){o.value=e},customCond:p,pqlEditor:u,fields:c,fieldIconMap:d,handleCustomCondChange:function(e){p.value=e},handleReset:function(t){t.stopPropagation(),e.modal.dismiss(),a("reset")},handleCancel:function(t){t.stopPropagation(),e.modal.dismiss()},handleConfirm:function(t){t.stopPropagation();try{if("pql"===i.value){var n,r;if(u.value)if(!(null===(n=(r=u.value).verify)||void 0===n?void 0:n.call(r)))return;a("confirm",{type:i.value,customCond:p.value})}else a("confirm",{type:i.value,cond:o.value});e.modal.dismiss()}catch(s){ibiz.log.error(null==s?void 0:s.message)}},renderItem:function(e){return[T("div",{class:n.be("item","icon")},["measure"===d.value.get(e.value)?T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M4.236 9.9l.422-3.8H2.6a.6.6 0 1 1 0-1.2h2.19l.372-3.347a.6.6 0 1 1 1.192.133L5.998 4.9h4.793l.37-3.347a.6.6 0 0 1 1.193.133L11.998 4.9h2.459a.6.6 0 0 1 0 1.2h-2.592l-.421 3.8h2.013a.6.6 0 0 1 0 1.2H11.31l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H5.311l-.374 3.368a.6.6 0 0 1-1.192-.132l.358-3.236H1.6a.6.6 0 0 1 0-1.2h2.636zm1.208 0h4.792l.422-3.8H5.865l-.421 3.8z"},null)])]):T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",focusable:"false",fill:"currentColor"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M9 1.2v4.974h1V3.2h2v2.974h1.5a1.5 1.5 0 0 1 1.5 1.5v5.784a1.5 1.5 0 0 1-1.5 1.5h-11a1.5 1.5 0 0 1-1.5-1.5V7.674a1.5 1.5 0 0 1 1.5-1.5H4V3.2h2v2.974h1V1.2h2zM6 6.636H4v4.038h2V6.636zm1 4.038h2V6.636H7v4.038zm5-4.053h-2v4.053h2V6.621z"},null)])])]),T("div",{class:n.be("item","text")},[e.label||""])]}}},render:function(){var e=this;return N(T("div",{class:this.ns.b()},[this.isLoaded?[T("div",{class:this.ns.b("header")},[T("div",{class:this.ns.b("header-text")},[A("筛选")]),T("div",{class:[this.ns.b("header-tab"),this.ns.bm("header-tab",this.activeTab)]},[T(O("el-tabs"),{type:"card",modelValue:this.activeTab,"onUpdate:modelValue":function(t){return e.activeTab=t}},{default:function(){return[T(O("el-tab-pane"),{name:"default",label:"基本"},null),T(O("el-tab-pane"),{name:"pql",label:"PQL"},null)]}})]),T("div",{class:this.ns.b("header-btn"),onClick:this.handleCancel},[T("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M7.456 7.456V-.115h1.2v7.571h7.572v1.2H8.656v7.572h-1.2V8.656H-.115v-1.2h7.571z",transform:"rotate(45 8.056 8.056)"},null)])])])]),T("div",{class:this.ns.b("content")},["pql"===this.activeTab?T(O("iBizPqlEditor"),{ref:"pqlEditor",class:this.ns.e("pql-editor"),placeholder:"输入筛选条件",value:this.customCond,fields:this.fields,context:this.context,params:this.params,renderItem:this.renderItem,onChange:this.handleCustomCondChange},null):T(O("bi-filter-condition"),{class:this.ns.e("filter-condition"),value:this.cond,schemaFields:this.schemaFields,context:this.context,params:this.params,onChange:this.handleCondChange,borderMode:this.borderMode},null)]),T("div",{class:this.ns.b("footer")},[T("div",{class:this.ns.be("footer","reset-btn"),onClick:this.handleReset},[A("重置")]),T(O("el-button"),{class:this.ns.be("footer","cancel-btn"),text:!0,onClick:this.handleCancel},{default:function(){return[A("取消")]}}),T(O("el-button"),{class:this.ns.be("footer","confirm-btn"),onClick:this.handleConfirm},{default:function(){return[A("确认")]}})])]:null]),[[P("loading"),!this.isLoaded]])}}),Ln=g({name:"BIReportPanelContent",props:{modelData:{type:Object,required:!0},controller:{type:Dn,required:!0}},setup:function(e){var t,a,n=s("bi-report-panel-content"),i=e.controller,r=x(["chart","grid"]),o=x(!1),l=x(!1);o.value=!(null===(t=i.state.gridPropertyData)||void 0===t||null===(t=t.style)||void 0===t||null===(t=t.agg)||void 0===t||!t.show);var c=null===(a=i.state.gridPropertyData)||void 0===a||null===(a=a.style)||void 0===a||null===(a=a.function)||void 0===a?void 0:a.function;Array.isArray(c)&&(l.value=c.includes("showPercent"));var d,p=function(){var e=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.state.gridPropertyData.style||(i.state.gridPropertyData.style={}),i.state.gridPropertyData.style.agg||(i.state.gridPropertyData.style.agg={}),i.state.gridPropertyData.style.agg.show=t,i.updateGridReportModel();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=x();S((function(){u.value&&ResizeObserver&&(d=new ResizeObserver((function(){var e,t;null===(e=i.chart)||void 0===e||null===(e=e.chartController)||void 0===e||null===(t=e.resizeChart)||void 0===t||t.call(e)}))).observe(u.value)})),R((function(){var e;null===(e=d)||void 0===e||e.disconnect()}));var h,f=x(!1),m=function(){var e,t;i.resetModel(),o.value=!(null===(e=i.state.gridPropertyData)||void 0===e||null===(e=e.style)||void 0===e||null===(e=e.agg)||void 0===e||!e.show);var a=null===(t=i.state.gridPropertyData)||void 0===t||null===(t=t.style)||void 0===t||null===(t=t.function)||void 0===t?void 0:t.function;Array.isArray(a)?l.value=a.includes("showPercent"):l.value=!1},v=function(e){var t=e.type;if(i.state.filterMode=t,"default"===t){var a=e.cond;if(i.state.cond=a,a){var n=a.children;if(Array.isArray(n)&&n.length){var r=a.logicType,o=n.map((function(e){return I(I({},i.state.conditionFieldMap.get(e.field)),{},{groupLogicType:r,condition:{value:e.value,valueOP:e.valueOP,nodeType:"FIELD",field:e.field}})}));return void i.updateFilter(o)}}i.updateFilter([])}"pql"===t&&i.updateCustomCond(e.customCond)},g=function(){var e=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!h){e.next=3;break}return e.abrupt("return");case 3:return i.state.isLoadedSchema||i.loadSchema(),h=ibiz.overlay.createPopover((function(e){return L(Mn,{modal:e,state:i.state,context:i.panel.context,params:i.panel.params,onConfirm:v,onReset:m})}),void 0,{placement:"bottom-start",autoClose:!0,noArrow:!0,width:800}),e.next=7,h.present(t.target);case 7:return f.value=!0,e.next=10,h.onWillDismiss();case 10:f.value=!1,h=void 0;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return R((function(){var e;null===(e=h)||void 0===e||e.dismiss()})),{ns:n,c:i,value:r,showAgg:o,showPercent:l,chartRef:u,isActive:f,handleShowAggChange:p,handleShowPercentChange:function(e){i.state.gridPropertyData.style||(i.state.gridPropertyData.style={}),i.state.gridPropertyData.style.function||(i.state.gridPropertyData.style.function={}),Array.isArray(i.state.gridPropertyData.style.function.function)||(i.state.gridPropertyData.style.function.function=[]);var t=i.state.gridPropertyData.style.function.function,a=t.indexOf("showPercent");e&&-1===a&&t.push("showPercent"),e||-1===a||t.splice(a,1),i.updateGridReportModel()},handleGridInit:function(e){i.setGrid(e)},handleChartInit:function(e){i.setChart(e)},openFilterPopover:g}},render:function(){var e=this;return T("div",{class:this.ns.b()},[T(O("el-collapse"),{modelValue:this.value,"onUpdate:modelValue":function(t){return e.value=t}},{default:function(){return[e.c.state.reportModel&&T(O("el-collapse-item"),{name:"chart"},{title:function(){return T("div",{class:e.ns.b("item-header")},[T("div",{class:e.ns.b("item-header-left")},[A("图表")])])},default:function(){return T("div",{class:e.ns.b("chart"),ref:"chartRef"},[T(O("iBizBIReportContent"),{mode:"CONTENT",context:e.c.context,viewParams:e.c.panel.params,config:e.c.state.reportModel,onInit:e.handleChartInit},null)])}}),e.c.state.gridReportModel&&T(O("el-collapse-item"),{name:"grid"},{title:function(){return T("div",{class:e.ns.b("item-header")},[T("div",{class:e.ns.b("item-header-left")},[e.c.gridType.includes(e.c.config.selectChartType)?"图表":"数据"]),T("div",{class:[e.ns.b("filter"),e.ns.is("active",e.isActive)],onClick:e.openFilterPopover},[T("svg",{class:e.ns.be("filter","icon"),viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",preserveAspectRatio:"xMidYMid meet",focusable:"false"},[T("g",{"stroke-width":"1","fill-rule":"evenodd"},[T("path",{d:"M1.6 2h12.8a.6.6 0 0 1 0 1.2H1.6a.6.6 0 1 1 0-1.2zm2.5 5.393h7.8a.6.6 0 0 1 0 1.2H4.1a.6.6 0 1 1 0-1.2zm2.5 5.416h2.8a.6.6 0 0 1 0 1.2H6.6a.6.6 0 1 1 0-1.2z"},null)])]),T("div",{class:e.ns.be("filter","text")},[A("筛选")]),!!e.c.state.condNum&&T("div",{class:e.ns.be("filter","badge")},[e.c.state.condNum])]),T("div",{class:e.ns.b("item-header-right"),onClick:function(e){e.stopPropagation()}},[T(O("el-checkbox"),{modelValue:e.showAgg,"onUpdate:modelValue":function(t){return e.showAgg=t},onChange:e.handleShowAggChange,label:"显示合计",size:"large"},null),T(O("el-checkbox"),{modelValue:e.showPercent,"onUpdate:modelValue":function(t){return e.showPercent=t},onChange:e.handleShowPercentChange,label:"显示百分比",size:"large"},null)])])},default:function(){return T("div",{class:e.ns.b("grid")},[T(O("iBizBIReportContent"),{mode:"CONTENT",context:e.c.context,viewParams:e.c.panel.params,config:e.c.state.gridReportModel,onInit:e.handleGridInit},null)])}})]}})])}}),Rn=function(){function e(){f(this,e),C(this,"component","BIReportPanelContent")}var t;return v(e,[{key:"createController",value:(t=b(y().mark((function e(t,a,n){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Dn(t,a,n),e.next=3,i.init();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),function(e,a,n){return t.apply(this,arguments)})}]),e}(),kn={install:function(e){e.component(Ln.name,Ln),ae("CUSTOM_BI_REPORT_PANEL_CONTENT",(function(){return new Rn}))}},Fn={install:function(e){e.use(En),e.use(kn)}};i("default",{install:function(e){e.component(wn.name,wn),e.component(yn.name,yn),e.component(In.name,In),ma("NUMBER",(function(){return new Za})),ma("PIE",(function(){return new Qa})),ma("SCATTER",(function(){return new on})),ma("STACK_COL",(function(){return new sn})),ma("GAUGE",(function(){return new en})),ma("MULTI_SERIES_BAR",(function(){return new tn})),ma("MULTI_SERIES_LINE",(function(){return new an})),ma("MULTI_SERIES_COL",(function(){return new nn})),ma("ZONE_COL",(function(){return new ln})),ma("STACK_BAR",(function(){return new cn})),ma("AREA",(function(){return new dn})),ma("ZONE_LINE",(function(){return new pn})),ma("RADAR",(function(){return new un})),ma("CROSSTABLE",(function(){return new rn})),ma("GRID",(function(){return new hn})),e.use(Fn)}})}}}))}();
